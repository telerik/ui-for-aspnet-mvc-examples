<script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/8.0.7/signalr.min.js"
        integrity="sha512-7SRCYIJtR6F8ocwW7UxW6wGKqbSyqREDbfCORCbGLatU0iugBLwyOXpzhkPyHIFdBO0K2VCu57fvP2Twgx1o2A=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
    var hubUrl = "https://demos.telerik.com/service/v2/signalr/products";
    var hub = new signalR.HubConnectionBuilder()
        .withUrl(hubUrl, {
            skipNegotiation: true,
            transport: signalR.HttpTransportType.WebSockets
        })
        .build();

    var hubStart = hub.start()
        .then(function (e) {
            $("#notification").data("kendoNotification").success("SignalR Hub Started!");
        })
        .catch(function (err) {
            return console.error(err.toString());
        });
</script>

@(Html.Kendo().Notification()
      .Name("notification")
      .Width("100%")
      .Position(position => position.Top(0).Left(0))
      .AppendTo("#notification-container")
)
<div id="notification-container"></div>
@(Html.Kendo().Chart<Telerik.Examples.Mvc.Areas.ChartSignalR.Models.ProductViewModel>()
        .Name("chart")
        .Legend(false)
        .DataSource(dataSource => dataSource
            .SignalR()
            .AutoSync(true)
            .Events(events => events.Push(@<text>
                    function(e) {
                    var notification = $("#notification").data("kendoNotification");
                    notification.success(e.type);
                    }
            </text>))
            .Sort(s => s.Add("CreatedAt").Descending())
            .Transport(tr => tr
                .Promise("hubStart")
                .Hub("hub")
                .Client(c => c
                    .Read("read")
                    .Create("create")
                    .Update("update")
                    .Destroy("destroy"))
                .Server(s => s
                    .Read("read")
                    .Create("create")
                    .Update("update")
                .Destroy("destroy"))
            )
            .Schema(schema => schema
                .Model(model =>
                {
                    model.Id("ID");
                    model.Field("ID", typeof(string)).Editable(false);
                    model.Field("CreatedAt", typeof(DateTime));
                    model.Field("UnitPrice", typeof(int));
                }
            ))
        )
        .Series(series =>
        {
            series.Line(
                model => model.UnitPrice,
                categoryExpression: model => model.ProductName
            );
        })
        .Transitions(false)
        .CategoryAxis(axis =>
            axis.Labels(labels => labels.Rotation(-90))
        )
)

<br />
<div class="configuration-horizontal">
    <span class="configHead">Information</span>
    <p>
        This demo demonstrates real-time push-notifications from <a href="http://signalr.net/">SignalR</a>.
    </p>
    <p>
        To see the real-time updates:
    </p>
    <ol>
        <li>Create, update or destroy grid items below. The Grid is loaded in an IFRAME to simulate a remote client.</li>
    </ol>
</div>
<iframe src="~/GridSignalR/Home/Index" style="width: 100%; height: 800px;" frameborder="0"></iframe>
<style>
    .footer:first-of-type {
        display: none !important;
    }
</style>