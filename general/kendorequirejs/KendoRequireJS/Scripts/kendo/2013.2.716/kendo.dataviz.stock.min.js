/*
* Kendo UI Complete v2013.2.716 (http://kendoui.com)
* Copyright 2013 Telerik AD. All rights reserved.
*
* Kendo UI Complete commercial licenses may be obtained at
* https://www.kendoui.com/purchase/license-agreement/kendo-ui-complete-commercial.aspx
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/


("function"==typeof define&&define.amd?define:function(t,e){return e()})(["./kendo.dataviz.chart.min"],function(){!function(t){function e(){}function i(t){return e.prototype=t,new e}var a,o=window.kendo,n=o.Class,s=o.Observable,r=o.deepExtend,l=Math,c=t.proxy,d=o.dataviz,p=o.template,u=d.defined,f=d.ui.Chart,h=d.Selection,m=d.addDuration,v=d.duration,g=d.last,x=d.lteDateIndex,_=d.renderTemplate,b=d.toDate,y=d.toTime,S=28,w="change",A="k-",D="drag",T="dragEnd",C="_navigator",k=C,E=3,U="zoom",B="zoomEnd",F=f.extend({init:function(e,i){t(e).addClass(A+"chart"),f.fn.init.call(this,e,i)},_applyDefaults:function(t,e){var i=this,a=i.element.width()||d.DEFAULT_WIDTH,o={seriesDefaults:{categoryField:t.dateField},axisDefaults:{categoryAxis:{name:"default",majorGridLines:{visible:!1},labels:{step:2},majorTicks:{visible:!1},maxDateGroups:l.floor(a/S)}}};e&&(e=r({},e,o)),i._navigator||z.setup(t,e),f.fn._applyDefaults.call(i,t,e)},_initDataSource:function(t){var e,i,a=t||{},o=a.dataSource,n=o&&o.serverFiltering,s=[].concat(a.categoryAxis)[0],l=a.navigator||{},c=l.select,p=c&&c.from&&c.to;n&&p&&(e=[].concat(o.filter||[]),i=new d.DateCategoryAxis(r({baseUnit:"fit"},s,{categories:[c.from,c.to]})),o.filter=z.buildFilter(i.range().min,c.to).concat(e)),f.fn._initDataSource.call(this,t)},options:{name:"StockChart",dateField:"date",axisDefaults:{categoryAxis:{type:"date",baseUnit:"fit",justified:!0},valueAxis:{narrowRange:!0,labels:{format:"C"}}},navigator:{select:{},seriesDefaults:{markers:{visible:!1},tooltip:{visible:!0,template:"#= kendo.toString(category, 'd') #"},line:{width:2}},hint:{},visible:!0},tooltip:{visible:!0},legend:{visible:!1}},_redraw:function(){var t=this,e=t._navigator;e&&e.dataSource?e.redrawSlaves():(e||(e=t._navigator=new z(t)),e.filterAxes(),f.fn._redraw.call(t),e.redraw())},_onDataChanged:function(){var t=this;f.fn._onDataChanged.call(t),t._dataBound=!0},_bindCategoryAxis:function(t,e,i){var a,o=this,n=o.options.categoryAxis,s=n.length;if(f.fn._bindCategoryAxis.apply(this,arguments),t.name===k)for(;s>i;)a=n[i++],a.pane==C&&(a.categories=t.categories)},_trackSharedTooltip:function(t){var e=this,i=e._plotArea,a=i.paneByPoint(t);a&&a.options.name===C?e._unsetActivePoint():f.fn._trackSharedTooltip.call(e,t)},destroy:function(){var t=this;t._navigator.destroy(),f.fn.destroy.call(t)}}),z=s.extend({init:function(t){var e=this;e.chart=t,e.options=r({},e.options,t.options.navigator),e._initDataSource(),u(e.options.hint.visible)||(e.options.hint.visible=e.options.visible),t.bind(D,c(e._drag,e)),t.bind(T,c(e._dragEnd,e)),t.bind(U,c(e._zoom,e)),t.bind(B,c(e._zoomEnd,e))},options:{},_initDataSource:function(){var t=this,e=t.options,i=e.autoBind,a=e.dataSource;u(i)||(i=t.chart.options.autoBind),t._dataChangedHandler=c(t._onDataChanged,t),a&&(t.dataSource=o.data.DataSource.create(a).bind(w,t._dataChangedHandler),i&&t.dataSource.fetch())},_onDataChanged:function(){var t,e,i,a,o,n=this,s=n.chart,r=s.options.series,l=r.length,c=s.options.categoryAxis,d=c.length,p=n.dataSource.view();for(t=0;l>t;t++)i=r[t],i.axis==k&&s._isBindable(i)&&(i.data=p);for(e=0;d>e;e++)a=c[e],a.pane==C&&(a.name==k?(s._bindCategoryAxis(a,p,e),o=a.categories):a.categories=o);s._model&&(n.redraw(),n.filterAxes(),(!s.options.dataSource||s.options.dataSource&&s._dataBound)&&n.redrawSlaves())},destroy:function(){var t=this,e=t.dataSource;e&&e.unbind(w,t._dataChangeHandler),t.selection&&t.selection.destroy()},redraw:function(){this._redrawSelf();var e=this,o=e.chart,n=e.options,s=e.mainAxis(),r=i(s),l=s.options.categories,c=e.options.select||{},d=e.selection,p=l[0],u=g(l),f=c.from||p,m=c.to||u;l.length>0&&(d&&(d.destroy(),d.wrapper.remove()),r.box=s.box,d=e.selection=new h(o,r,{min:p,max:u,from:f,to:m,selectStart:t.proxy(e._selectStart,e),select:t.proxy(e._select,e),selectEnd:t.proxy(e._selectEnd,e),mousewheel:{zoom:"left"}}),n.hint.visible&&(e.hint=new a(o.element,{min:l[0],max:g(l),template:n.hint.template,format:n.hint.format})))},_redrawSelf:function(t){var e=this.chart._plotArea;e&&e.redraw(g(e.panes),t)},redrawSlaves:function(){var t=this,e=t.chart,i=e._plotArea,a=i.panes.slice(0,-1);i.srcSeries=e.options.series,i.redraw(a)},_drag:function(t){var e,i,a,o=this,n=o.chart,s=n._eventCoordinates(t.originalEvent),r=o.mainAxis(),c=r.pane.box.containsPoint(s),p=r.options.categories,u=n._plotArea.categoryAxis,f=u.options.baseUnit,h=t.axisRanges[u.options.name],g=o.selection;h&&!c&&g&&(e=u.options.min&&u.options.max?v(u.options.min,u.options.max,f):v(g.options.from,g.options.to,f),i=b(l.min(l.max(p[0],h.min),m(d.last(p),-e,f))),a=b(l.min(m(i,e,f),d.last(p))),o.options.select={from:i,to:a},o._liveDrag()&&(o.filterAxes(),o.redrawSlaves()),g.set(i,m(i,e,f)),o.showHint(i,a))},_dragEnd:function(){var t=this;t.filterAxes(),t.filterDataSource(),t.redrawSlaves(),t.hint&&t.hint.hide()},_liveDrag:function(){var t=o.support,e=t.touch,i=t.browser,a=i.mozilla,n=i.msie&&i.version<9;return!e&&!a&&!n},readSelection:function(){var t=this,e=t.selection,i=e.options,a=t.options.select;a.from=i.from,a.to=i.to},filterAxes:function(){var t,e,i,a,o,n=this,s=n.options.select||{},r=n.chart,l=r.options.categoryAxis,c=s.from,d=s.to;for(a=0;a<l.length;a++)if(o=l[a],o.name===k&&(t=o.categories,t&&t.length>0)){e=y(t[0]),i=y(g(t)),c=y(c),(e>c||c>i)&&(c=e),d=y(d),(e>d||d>i)&&(d=i);break}for(a=0;a<l.length;a++)o=l[a],o.pane!==C&&(o.min=b(c),o.max=b(d))},filterDataSource:function(){var t,e=this,i=e.options.select||{},a=e.chart,o=a.dataSource,n=o&&o.options.serverFiltering;e.dataSource&&n&&(t=new d.DateCategoryAxis(r({baseUnit:"fit"},a.options.categoryAxis[0],{categories:[i.from,i.to]})).options,o.filter(z.buildFilter(m(t.min,-t.baseUnitStep,t.baseUnit),m(t.max,t.baseUnitStep,t.baseUnit))))},_zoom:function(t){var e,i,a=this,n=a.chart,s=t.delta,r=n._plotArea.categoryAxis,c=a.options.select,d=a.selection,p=a.mainAxis().options.categories;d&&(e=x(d.options.from,p),i=x(d.options.to,p),t.originalEvent.preventDefault(),l.abs(s)>1&&(s*=E),i-e>1?(d.expand(s),a.readSelection()):(r.options.min=c.from,c.from=r.scaleRange(-t.delta).min),o.support.touch||(a.filterAxes(),a.redrawSlaves()),d.set(c.from,c.to),a.showHint(a.options.select.from,a.options.select.to))},_zoomEnd:function(t){this._dragEnd(t)},showHint:function(t,e){var i=this,a=i.chart,o=a._plotArea;i.hint&&i.hint.show(t,e,o.backgroundBox())},_selectStart:function(t){var e=this.chart;e._selectStart.call(e,t)},_select:function(t){var e=this,i=e.chart;e.showHint(t.from,t.to),i._select.call(i,t)},_selectEnd:function(t){var e=this,i=e.chart;e.hint&&e.hint.hide(),e.readSelection(),e.filterAxes(),e.filterDataSource(),e.redrawSlaves(),i._selectEnd.call(i,t)},mainAxis:function(){var t=this.chart._plotArea;return t?t.namedCategoryAxes[k]:undefined}});z.setup=function(t,e){t=t||{},e=e||{};var i=r({},e.navigator,t.navigator),a=t.panes=[].concat(t.panes),o=r({},i.pane,{name:C});i.visible||(o.visible=!1,o.height=.1),a.push(o),z.attachAxes(t,i),z.attachSeries(t,i,e)},z.attachAxes=function(t,e){var i=t.categoryAxis=[].concat(t.categoryAxis),a=t.valueAxis=[].concat(t.valueAxis),o=r({type:"date",pane:C,roundToBaseUnit:!1,justified:!0,tooltip:{visible:!1},labels:{step:1},autoBind:!e.dataSource,autoBaseUnitSteps:{minutes:[1],hours:[1],days:[1],weeks:[],months:[1],years:[1]},_overlap:!1},e.categoryAxis);i.push(r({},o,{name:k,baseUnit:"fit",maxDateGroups:200,baseUnitStep:"auto",labels:{visible:!1},majorTicks:{visible:!1}}),r({},o,{name:k+"_labels",maxDateGroups:20,baseUnitStep:"auto",autoBaseUnitSteps:{minutes:[]},majorTicks:{visible:!0}}),r({},o,{name:k+"_ticks",maxDateGroups:200,majorTicks:{visible:!0,width:.5},labels:{visible:!1,mirror:!0}})),a.push({name:k,pane:C,majorGridLines:{visible:!1},visible:!1})},z.attachSeries=function(t,e,i){var a,o=t.series=t.series||[],n=[].concat(e.series),s=i.seriesColors,l=e.seriesDefaults;for(a=0;a<n.length;a++)o.push(r({color:s[a%s.length],categoryField:e.dateField,visibleInLegend:!1,tooltip:{visible:!1}},l,n[a],{axis:k,categoryAxis:k,autoBind:!e.dataSource}))},z.buildFilter=function(t,e){return[{field:"Date",operator:"gte",value:b(t)},{field:"Date",operator:"lt",value:b(e)}]},a=n.extend({init:function(e,i){var a=this;a.options=r({},a.options,i),a.container=e,a.chartPadding={top:parseInt(e.css("paddingTop"),10),left:parseInt(e.css("paddingLeft"),10)},a.template=a.template,a.template||(a.template=a.template=_("<div class='"+A+"navigator-hint' "+"style='display: none; position: absolute; top: 1px; left: 1px;'>"+"<div class='"+A+"tooltip'>&nbsp;</div>"+"<div class='"+A+"scroll' />"+"</div>")),a.element=t(a.template()).appendTo(e)},options:{format:"{0:d} - {1:d}",hideDelay:500},show:function(t,e,i){var a,n=this,s=b(y(t)+y(e-t)/2),r=n.options,l=o.format(n.options.format,t,e),c=n.element.find("."+A+"tooltip"),d=n.element.find("."+A+"scroll"),u=.4*i.width(),f=i.center().x-u,h=i.center().x,m=h-f,v=r.max-r.min,g=m/v,x=s-r.min;n._hideTimeout&&clearTimeout(n._hideTimeout),n._visible||(n.element.stop(!1,!0).css("visibility","hidden").show(),n._visible=!0),r.template&&(a=p(r.template),l=a({from:t,to:e})),c.text(l).css({left:i.center().x-c.outerWidth()/2,top:i.y1}),d.css({width:u,left:f+x*g,top:i.y1+parseInt(c.css("margin-top"),10)+parseInt(c.css("border-top-width"),10)+c.height()/2}),n.element.css("visibility","visible")},hide:function(){var t=this;t._hideTimeout&&clearTimeout(t._hideTimeout),t._hideTimeout=setTimeout(function(){t._visible=!1,t.element.fadeOut("slow")},t.options.hideDelay)}}),d.ui.plugin(F),r(d,{Navigator:z})}(window.kendo.jQuery)});