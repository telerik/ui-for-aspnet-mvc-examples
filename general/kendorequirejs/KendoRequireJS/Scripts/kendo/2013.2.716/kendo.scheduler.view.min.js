/*
* Kendo UI Complete v2013.2.716 (http://kendoui.com)
* Copyright 2013 Telerik AD. All rights reserved.
*
* Kendo UI Complete commercial licenses may be obtained at
* https://www.kendoui.com/purchase/license-agreement/kendo-ui-complete-commercial.aspx
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/


("function"==typeof define&&define.amd?define:function(e,t){return t()})(["./kendo.core.min"],function(){!function(e){function t(e,t){function r(e,s){var i,o;if(s=s[t])for(i=n[e]=n[e]||[],o=0;o<s.length;o++)i.push(s[o]),r(e+1,s[o])}var n=[];return r(0,e),n}function r(){return H.support.cssBorderSpacing?"":'cellspacing="0"'}function n(t,n){return t.length?"<table "+r()+' class="'+e.trim("k-scheduler-table "+(n||""))+'">'+"<tr>"+t.join("</tr><tr>")+"</tr>"+"</table>":""}function s(t,r,s){var i,o=[];if(s>0)for(i=0;t>i;i++)o.push("<th></th>");return r&&o.push('<th class="k-scheduler-times-all-day">'+r.text+"</th>"),1>s?e():e('<div class="k-scheduler-times">'+n(o)+"</div>")}function i(t,r,s){var i,o,l,a,c,h,u,d,f=[];for(o=0;o<t.length;o++){for(l=t[o],a=[],c=r/l.length,i=0;i<l.length;i++)a.push('<th colspan="'+c+'" class="'+(l[i].className||"")+'">'+l[i].text+"</th>");f.push(a.join(""))}if(h=[],s){for(u=t[t.length-1],d=[],i=0;i<u.length;i++)d.push('<td class="'+(u[i].className||"")+'">&nbsp;</th>');h.push(d.join(""))}return e('<div class="k-scheduler-header k-state-default"><div class="k-scheduler-header-wrap">'+n(f)+n(h,"k-scheduler-header-all-day")+"</div>"+"</div>")}function o(t,r){var s,i,o,l,a,c=Array(r).join().split(","),h=[];for(i=0;i<t.length;i++)for(o=t[i],l=r/o.length,s=0;s<o.length;s++)a=o[s].className||"",o[s].allDay&&(a="k-scheduler-times-all-day"),c[l*s]+='<th class="'+a+'" rowspan="'+l+'">'+o[s].text+"</th>";for(s=0;r>s;s++)h.push(c[s]);return 1>r?e():e('<div class="k-scheduler-times">'+n(h)+"</div>")}function l(){return e('<div class="k-scheduler-content"><table '+r()+' class="k-scheduler-table"/>'+"</div>")}function a(e,t,r){return c(e,t,r,!0)}function c(e,t,r,n){var s,i,o,l,a;for(s=e.length-1;s>=0;s--)i=h(e[s]),o=i.start,a=i.end,l=n?t>=o&&a>=t:t>o&&a>t,(l||o>=t&&r>=a||o>=t&&r>=o)&&(t>o&&(t=o),a>r&&(r=a));return u(e,t,r)}function h(e){return{start:e.start,end:e.end}}function u(e,t,r){var n,s,i=[];for(n=0;n<e.length;n++)s=h(e[n]),(s.start<t&&s.end>t||s.start>=t&&s.end<=r)&&i.push(e[n]);return i}function d(e){return g(e)}function f(e){return g(e,!0)}function g(e,t){var r,n,s,i,o,l,a,c=[];for(r=0;r<e.length;r++){for(n=e[r],s=h(n),i=null,o=0,l=c.length;l>o;o++)if(a=t?s.start>c[o].end:s.start>=c[o].end,s.start<c[o].start||a){i=c[o],i.end<s.end&&(i.end=s.end);break}i||(i={start:s.start,end:s.end,events:[]},c.push(i)),i.events.push(n)}return c}function p(e,t,r){var n,s,i,o,l=t[0];if(l){for(n=[],s=l.dataSource.view(),i=0;i<s.length;i++)o={text:H.getter(l.dataTextField)(s[i]),className:"k-slot-cell"},o[e]=p(e,t.slice(1),r),n.push(o);return n}return r}function v(t,r){if(e.isArray(t)){for(var n=0;n<t.length;n++)if(t[n]==r)return!0;return!1}return t==r}var m,H=window.kendo,b=H.ui,k=b.Widget,_=".kendoSchedulerView",w='<div class="k-marquee k-scheduler-marquee"><div class="k-marquee-color"></div><div class="k-marquee-text"><div class="k-label-top"></div><div class="k-label-bottom"></div></div></div>';H.ui.SchedulerView=k.extend({init:function(t,r){k.fn.init.call(this,t,r),this._scrollbar=H.support.scrollbar(),m=H.support.isRtl(t),this._resizeHint=e(),this._moveHint=e(),this._cellId=H.guid(),this._resourcesForGroups()},dateForTitle:function(){return H.format(this.options.selectedDateFormat,this.startDate(),this.endDate())},move:function(){return!1},moveToEvent:function(){return!1},isInRange:function(e){return this.startDate()<=e&&e<=this.endDate()},_createResizeHint:function(t,r,n,s){return e(w).css({left:t,top:r,width:n,height:s})},_removeResizeHint:function(){this._resizeHint.remove(),this._resizeHint=e()},_removeMoveHint:function(){this._moveHint.remove(),this._moveHint=e()},_scrollTo:function(e,t){var r=e.offsetTop,n=e.offsetHeight,s=t.scrollTop,i=t.clientHeight,o=r+n,l=0;l=s>r?r:o>s+i?i>=n?o-i:r:s,t.scrollTop=l},eventResources:function(e){var t,r,n,s,i,o,l,a,c,h=[],u=this.options;if(!u.resources)return h;for(t=0;t<u.resources.length;t++)if(r=u.resources[t],n=r.field,s=H.getter(n)(e))for(r.multiple||(s=[s]),i=r.dataSource.view(),o=0;o<s.length;o++){for(l=null,a=s[o],r.valuePrimitive||(a=H.getter(r.dataValueField)(a)),c=0;c<i.length;c++)if(i[c].get(r.dataValueField)==a){l=i[c];break}null!=l&&h.push({text:H.getter(r.dataTextField)(l),value:a,color:H.getter(r.dataColorField)(l)})}return h},createLayout:function(n){var s,i,o,l,a,c=-1;for(n.rows||(n.rows=[]),s=0;s<n.rows.length;s++)if(n.rows[s].allDay){c=s;break}i=n.rows[c],c>=0&&n.rows.splice(c,1),o=this.columnLevels=t(n,"columns"),l=this.rowLevels=t(n,"rows"),this.table=e("<table "+r()+' class="k-scheduler-layout">'),a=l[l.length-1].length,this.table.append(this._topSection(o,i,a)),this.table.append(this._bottomSection(o,l,a)),this.element.append(this.table),this._scroller()},refreshLayout:function(){var t,r,n,s,i,o=this,l=o.element.find(">.k-scheduler-toolbar"),a=o.element.innerHeight(),c=this._scrollbar,h=0,u=m?"left":"right";l.length&&(a-=l.outerHeight()),o.datesHeader&&(h=o.datesHeader.outerHeight()),o.timesHeader&&o.timesHeader.outerHeight()>h&&(h=o.timesHeader.outerHeight()),o.datesHeader&&o.timesHeader&&(t=o.datesHeader.find("table:first tr"),o.timesHeader.find("tr").height(function(r){e(this).height(t.eq(r).height())})),h&&(a-=h),o.footer&&(a-=o.footer.outerHeight()),r=function(e){var t,r;return e[0].style.height?!0:(t=e.height(),e.height("auto"),r=e.height(),t!=r?(e.height(""),!0):(e.height(""),!1))},n=o.content[0],s=H.support.kineticScrollNeeded?0:c,r(o.element)&&(a>2*c?o.content.height(a):o.content.height(2*c+1),o.times.height(n.clientHeight),i=o.times.find("table"),i.length&&i.height(o.content.find("table")[0].clientHeight)),n.offsetWidth-n.clientWidth>0&&(o.table.addClass("k-scrollbar-v"),o.datesHeader.css("padding-"+u,s-parseInt(o.datesHeader.children().css("border-"+u+"-width"),10))),(n.offsetHeight-n.clientHeight>0||n.clientHeight>o.content.children(".k-scheduler-table").height())&&o.table.addClass("k-scrollbar-h")},_topSection:function(t,r,n){this.timesHeader=s(t.length,r,n);var o=t[t.length-1].length;return this.datesHeader=i(t,o,r),e("<tr>").append(this.timesHeader.add(this.datesHeader).wrap("<td>").parent())},_bottomSection:function(t,r,n){return this.times=o(r,n),this.content=l(t[t.length-1],r[r.length-1]),e("<tr>").append(this.times.add(this.content).wrap("<td>").parent())},_scroller:function(){var t,r=this;this.content.bind("scroll"+_,function(){r.datesHeader.find(">.k-scheduler-header-wrap").scrollLeft(this.scrollLeft),r.times.scrollTop(this.scrollTop)}),t=H.touchScroller(this.content,{avoidScrolling:function(t){return e(t.event.target).closest(".k-event.k-state-selected").length>0}}),t&&t.movable&&(this._touchScroller=t,this.content=t.scrollElement,t.movable.bind("change",function(e){r.datesHeader.find(">.k-scheduler-header-wrap").scrollLeft(-e.sender.x),r.times.scrollTop(-e.sender.y)}))},_resourcesForGroups:function(){var e,t,r,n,s=[],i=this.options.group,o=this.options.resources;if(i=i&&i.resources?i.resources:[],o&&i.length)for(e=0,t=o.length;t>e;e++)for(r=0,n=i.length;n>r;r++)o[e].name===i[r]&&s.push(o[e]);this.groupedResources=s},_isGroupedByDate:function(){var t=this.options.group;return t=t&&t.resources?t.resources:[],e.inArray("date",t)>-1},_createColumnsLayout:function(e,t){if(this._isGroupedByDate()){for(var r=0,n=t.length;n>r;r++)t[r].columns=p("columns",e);return t}return p("columns",e,t)},_groupOrientation:function(){var e=this.options.group;return e&&e.resources?e.orientation:"horizontal"},_isVerticallyGrouped:function(){return this.groupedResources.length&&"vertical"===this._groupOrientation()},_createRowsLayout:function(e,t){return p("rows",e,t)},selectionByElement:function(){return null},clearSelection:function(){this.content.find(".k-state-selected").removeClass("k-state-selected")},select:function(){},destroy:function(){var e=this;k.fn.destroy.call(this),e.table&&(H.destroy(e.table),e.table.remove())}}),e.extend(b.SchedulerView,{createColumns:d,createRows:f,rangeIndex:h,collidingEvents:c,collidingHorizontallyEvents:a,groupEqFilter:v})}(window.kendo.jQuery)});