/*
* Kendo UI Complete v2012.2.710 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Complete commercial licenses may be obtained at http://kendoui.com/complete-license
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
;(function(a,b){function z(a){var b=a.split("?")[1]||"",c={},d=b.split(/&|=/),e=d.length,f=0;for(;f<e;f+=2)c[d[f]]=d[f+1];return c}function q(a,b){a[0]&&b[0]&&a[0]!=b[0]&&a.kendoAnimateTo(b,{effects:"fade"})}var c=window.kendo,d=c.mobile,e=d.ui,f=c.attr,g=c.Class,h=e.Widget,i="init",j="show",k="beforeShow",l="hide",m="z-index",n=c.data,o=c.roleSelector,p=h.extend({init:function(b,c){var d=this;h.fn.init.call(d,b,c),b=d.element,d.params={},d.lastParams={},a.extend(d,c),d._layout(),d._scroller(),d._model()},events:[i,k,j,l],options:{name:"View",title:"",defaultTransition:"",stretch:!1,model:null},showStart:function(){var a=this;a.element.css("display",""),a.inited||(a.inited=!0,a.trigger(i,{view:a})),a.layout&&a.layout.attach(a),a._eachWidget(function(b){b.viewShow(a)}),a.trigger(j,{view:a})},hideStart:function(){var a=this;a.layout&&a.layout.detach(a)},hideComplete:function(){var a=this;a.element.hide(),a.trigger(l,{view:a})},updateParams:function(a){var b=this;b.trigger(k,{view:b})||(b.lastParams=b.params,b.params=a,b.trigger(j,{view:b}))},switchWith:function(a,b,c,d){var e=this;e.trigger(k,{view:e})||(e.lastParams=e.params,e.params=c,a?(a.hideStart(),e.showStart(),new r({current:a,next:e,transition:b,defaultTransition:a.options.defaultTransition,complete:d})):(e.showStart(),d()))},parallaxContents:function(a){var b=this,c=b.content;a.header[0]||(c=c.add(b.header)),a.footer[0]||(c=c.add(b.footer));return c},_scroller:function(){var a=this;a.options.stretch?a.content.addClass("km-stretched-view"):(a.content.kendoMobileScroller(),a.scroller=a.content.data("kendoMobileScroller"),a.scrollerContent=a.scroller.scrollElement)},_model:function(){var a=this,b=a.element,f=a.options.model;typeof f=="string"&&(f=c.getter(f)(window)),a.model=f,b.find(o("popover")).each(function(){c.initWidget(this,{},e.roles)}),f?c.bind(b.children(),f,e):d.init(b.children())},_layout:function(){var a=this,b=o("content"),c=a.element;c.data("kendoView",a).addClass("km-view"),a.transition=n(c,"transition"),a.header=c.children(o("header")).addClass("km-header"),a.footer=c.children(o("footer")).addClass("km-footer"),c.children(b)[0]||c.wrapInner("<div "+f("role")+'="content"></div>'),a.content=c.children(o("content")).addClass("km-content"),a.element.prepend(a.header).append(a.footer),a.id=n(c,"url")||"#"+c.attr("id"),a.layout&&a.layout.setup(a)},_eachWidget:function(b){var d;this.element.find("[data-"+c.ns+"role]").each(function(){d=c.widgetInstance(a(this),e),d&&b(d)})}}),r=g.extend({init:function(b){a.extend(this,b);var c=this,d=c.current,e=c.next,f=d.element,g=e.element,h=e,i=d,j=c._transition();j.reverse&&!j.parallax&&(h=d,i=e),h.element.css(m,1),i.element.css(m,0),j.parallax&&(q(d.footer,e.footer),q(d.header,e.header),f=d.parallaxContents(e),g=e.parallaxContents(d)),f.kendoAnimateTo(g,j),c.back()||(d.nextView=e,d.backTransition=j.transition)},_transition:function(){var a=this,b=a.current,c=a.next,d=a.back(),e=function(){b.hideComplete(),a.complete()},f=d?c.backTransition:c.transition,g=a.transition||f||a.defaultTransition,h=g.split(" "),i=h[0],j=/^slide/.test(i),k=h[1]==="reverse";a.back()&&!a.transition&&(k=!k);return{effects:i,reverse:k,parallax:j,complete:e,transition:g}},back:function(){var a=this.next,b=this.current;return a.nextView===b&&JSON.stringify(a.params)===JSON.stringify(a.lastParams)}}),s=h.extend({init:function(a,b){var d=this;h.fn.init.call(d,a,b),a=d.element,d.element=a.detach(),d.header=a.children(o("header")).addClass("km-header"),d.footer=a.children(o("footer")).addClass("km-footer"),d.elements=d.header.add(d.footer),c.mobile.init(d.element.children()),d.trigger(i,{layout:d})},options:{name:"Layout"},events:[i,j,l],setup:function(a){a.header[0]||(a.header=this.header),a.footer[0]||(a.footer=this.footer)},detach:function(a){var b=this;a.header===b.header&&a.element.prepend(b.header.detach().clone(!0)),a.footer===b.footer&&a.element.append(b.footer.detach().clone(!0)),b.trigger(l,{layout:b,view:a})},attach:function(a){var b=this;a.header===b.header&&(b.header.detach(),a.element.children(o("header")).remove(),a.element.prepend(b.header)),a.footer===b.footer&&(b.footer.detach(),a.element.children(o("footer")).remove(),a.element.append(b.footer)),b.trigger(j,{layout:b,view:a})}}),t=c.Observable,u=/<body[^>]*>(([\u000a\u000d\u2028\u2029]|.)*)<\/body>/i,v="loadStart",w="loadComplete",x="showStart",y="viewShow",A=t.extend({init:function(b){var c=this,d;t.fn.init.call(c),a.extend(c,b),c.sandbox=a("<div />"),d=c._hideViews(c.container),c.rootView=d.first(),c._view=null,c.layouts={},c._setupLayouts(c.container),c.loader&&(c.bind(x,function(){c.loader.transition()}),c.bind(v,function(){c.loader.show()}),c.bind(w,function(){c.loader.hide()}),c.bind(y,function(){c.loader.transitionDone()}))},view:function(){return this._view},showView:function(a,b){var c=this,d=c.container,e=z(a),g=a.charAt(0),h=g==="#",i=g==="/",j,k;a!==c.url&&(c.url=a,c.trigger(x),a?(k=d.children("["+f("url")+"='"+a+"']"),!k[0]&&!i&&(k=d.children(h?a:"#"+a))):k=c.rootView,j=k.data("kendoView"),k[0]?(j||(j=c._createView(k)),c._show(j,b,e)):c._loadView(a,function(a){c._show(a,b,e)}))},_createView:function(a){var b=this,d,f=n(a,"layout");typeof f=="undefined"&&(f=b.layout),f&&(f=b.layouts[f]),d={defaultTransition:b.transition,loader:b.loader,container:b.container,layout:f};return c.initWidget(a,d,e.roles)},_loadView:function(b,c){var d=this;d._xhr&&d._xhr.abort(),d.trigger(v),d._xhr=a.get(b,function(a){d.trigger(w),c(d._createRemoteView(b,a))},"html").fail(function(){d.trigger(w)})},_createRemoteView:function(a,b){var c=this,d=c.sandbox,e=c.container,g,h;u.test(b)&&(b=RegExp.$1),d[0].innerHTML=b,g=c._hideViews(d),h=g.first(),h.hide().attr(f("url"),a),c._setupLayouts(d),e.append(d.children(o("layout")+", script, style")).append(g);return c._createView(h)},_show:function(a,b,c){var d=this;d._view!==a?a.switchWith(d._view,b,c,function(){d._view=a,d.trigger(y,{view:a})}):(d._view.updateParams(c),d.trigger(y,{view:a}))},_hideViews:function(a){return a.children(o("view splitview")).hide()},_setupLayouts:function(f){var g=this;f.children(o("layout")).each(function(){var f=a(this),h=n(f,"platform");if(h===b||h===d.application.os)g.layouts[f.data("id")]=c.initWidget(f,{},e.roles)})}});c.mobile.ViewEngine=A,e.plugin(p),e.plugin(s)})(jQuery);