/*
* Kendo UI v2014.2.716 (http://www.telerik.com/kendo-ui)
* Copyright 2014 Telerik AD. All rights reserved.
*
* Kendo UI commercial licenses may be obtained at
* http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
!function(e,define){define(["./kendo.dataviz.chart.min"],e)}(function(){return function(e,t){var n,i=window.kendo,r=i.deepExtend,o=e.extend,a=i.isFunction,s=i.template,l=i.dataviz,d=l.Color,c=l.ChartElement,u=l.PieChartMixin,p=l.PlotAreaBase,h=l.PlotAreaFactory,f=l.Point2D,m=l.Box2D,g=l.SeriesBinder,v=l.TextBox,_=l.append,k=l.autoFormat,b=l.evalOptions,y=l.limitValue,w=l.seriesTotal,x=l.uniqueId,C="category",T="color",S="funnel",D="value",A="black",E="white",I=p.extend({render:function(){var e=this,t=e.series;e.createFunnelChart(t)},createFunnelChart:function(e){var t=this,n=e[0],i=new F(t,{series:e,legend:t.options.legend,neckRatio:n.neckRatio,dynamicHeight:n.dynamicHeight,dynamicSlope:n.dynamicSlope,segmentSpacing:n.segmentSpacing,highlight:n.highlight});t.appendChart(i)},appendChart:function(e,t){p.fn.appendChart.call(this,e,t),_(this.options.legend.items,e.legendItems)}}),F=c.extend({init:function(e,t){var n=this;c.fn.init.call(n,t),n.plotArea=e,n.points=[],n.labels=[],n.legendItems=[],n.render()},options:{neckRatio:.3,width:300,dynamicSlope:!1,dynamicHeight:!0,segmentSpacing:0,labels:{visible:!1,align:"center",position:"center"}},formatPointValue:function(e,t){return k(t,e.value)},render:function(){var e,n,i,o,s,l,d,c=this,u=c.options,p=c.plotArea.options.seriesColors||[],h=p.length,f=u.series[0],m=f.data;if(m)for(i=w(f),s=0;m.length>s;s++)e=g.current.bindPoint(f,s),o=e.valueFields.value,null!==o&&o!==t&&(n=e.fields,a(f.color)||(f.color=n.color||p[s%h]),n=r({index:s,owner:c,series:f,category:n.category,dataItem:m[s],percentage:o/i,visibleInLegend:n.visibleInLegend,visible:n.visible},n),l=c.createSegment(o,n),d=c.createLabel(o,n),l&&d&&l.append(d))},evalSegmentOptions:function(e,t,n){var i=n.series;b(e,{value:t,series:i,dataItem:n.dataItem,index:n.index},{defaults:i._defaults,excluded:["data"]})},createSegment:function(e,i){var a,s,l=this;return l.createLegendItem(e,i),i.visible!==!1?(s=r({},i.series),l.evalSegmentOptions(s,e,i),a=new n(e,s,i),o(a,i),l.append(a),l.points.push(a),a):t},createLabel:function(e,n){var i,o,a,l=this,c=n.series,u=n.dataItem,p=r({},l.options.labels,c.labels),h=e;return p.visible?(p.template?(o=s(p.template),h=o({dataItem:u,value:e,percentage:n.percentage,category:n.category,series:c})):p.format&&(h=k(p.format,h)),p.color||"center"!==p.align||(a=new d(c.color).percBrightness(),p.color=a>180?A:E),l.evalSegmentOptions(p,e,n),i=new v(h,r({vAlign:p.position,id:x()},p)),l.labels.push(i),i):t},labelPadding:function(){var e,t,n,i,r=this.labels,o={left:0,right:0};for(i=0;r.length>i;i++)e=r[i],t=e.options.align,"center"!==t&&(n=r[i].box.width(),"left"===t?o.left=Math.max(o.left,n):o.right=Math.max(o.right,n));return o},reflow:function(t){var n,i,r,o,a,s,l,d,c,u,p,h,m=this,g=m.options,v=m.points,_=v.length,k=1>=g.neckRatio,b=t.clone().unpad(m.labelPadding()),w=b.width(),x=0,C=k?0:(w-w/g.neckRatio)/2,T=g.segmentSpacing,S=g.dynamicSlope,D=b.height()-T*(_-1),A=k?g.neckRatio*w:w;if(_){if(S)for(l=v[0],d=l,e.each(v,function(e,t){t.percentage>d.percentage&&(d=t)}),r=l.percentage/d.percentage*w,C=(w-r)/2,n=0;_>n;n++)a=v[n].percentage,c=v[n+1],u=c?c.percentage:a,o=v[n].points=[],i=g.dynamicHeight?D*a:D/_,s=(w-r*(u/a))/2,s=y(s,0,w),o.push(f(b.x1+C,b.y1+x)),o.push(f(b.x1+w-C,b.y1+x)),o.push(f(b.x1+w-s,b.y1+i+x)),o.push(f(b.x1+s,b.y1+i+x)),C=s,x+=i+T,r*=u/a,r=y(r,0,w);else for(p=k?w:w-2*C,h=(p-A)/2,n=0;_>n;n++)o=v[n].points=[],a=v[n].percentage,s=g.dynamicHeight?h*a:h/_,i=g.dynamicHeight?D*a:D/_,o.push(f(b.x1+C,b.y1+x)),o.push(f(b.x1+w-C,b.y1+x)),o.push(f(b.x1+w-C-s,b.y1+i+x)),o.push(f(b.x1+C+s,b.y1+i+x)),C+=s,x+=i+T;for(n=0;_>n;n++)v[n].reflow(t)}}});r(F.fn,u),n=c.extend({init:function(e,t,n){var i=this;c.fn.init.call(i,t),i.value=e,i.id=x(),i.options.index=n.index,i.enableDiscovery()},options:{color:E,border:{width:1}},reflow:function(e){var t=this,n=t.points,i=t.children[0];t.box=new m(n[0].x,n[0].y,n[1].x,n[2].y),i&&i.reflow(new m(e.x1,n[0].y,e.x2,n[2].y))},getViewElements:function(e){var t=this,n=t.options,i=n.border,r=[];return r.push(e.createPolyline(t.points,!0,{id:t.id,fill:n.color,fillOpacity:n.opacity,stroke:i.color,strokeOpacity:i.opacity,strokeWidth:i.width,data:{modelId:t.modelId}})),_(r,c.fn.getViewElements.call(t,e)),r},highlightOverlay:function(e,t){var n,i,r,a=this.options,s=a.highlight||{};if(s.visible!==!1)return n=s.border||{},i=o({},t,{fill:s.color,stroke:n.color,strokeOpacity:n.opacity,strokeWidth:n.width,fillOpacity:s.opacity,data:{modelId:this.modelId}}),r=e.createPolyline(this.points,!0,i)},tooltipAnchor:function(e){var t=this.box;return new f(t.center().x-e/2,t.y1)},formatValue:function(e){var t=this;return t.owner.formatPointValue(t,e)}}),r(n.fn,l.PointEventsMixin),h.current.register(I,[S]),g.current.register([S],[D],[C,T,"visibleInLegend","visible"]),r(l,{FunnelChart:F})}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t){t()});