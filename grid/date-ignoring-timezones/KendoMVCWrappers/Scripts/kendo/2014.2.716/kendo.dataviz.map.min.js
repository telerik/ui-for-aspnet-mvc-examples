/*
* Kendo UI v2014.2.716 (http://www.telerik.com/kendo-ui)
* Copyright 2014 Telerik AD. All rights reserved.
*
* Kendo UI commercial licenses may be obtained at
* http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
!function(e,define){define(["./kendo.data.min","./kendo.userevents.min","./kendo.tooltip.min","./kendo.dataviz.core.min","./kendo.mobile.scroller.min","./kendo.dataviz.drawing.min"],e)}(function(){return function(e,t){var n,i=Math,r=i.abs,o=i.atan,a=i.atan2,s=i.cos,l=i.max,d=i.min,c=i.sin,u=i.tan,h=window.kendo,p=h.Class,f=h.dataviz,m=h.deepExtend,g=f.util,v=g.defined,_=g.deg,w=g.rad,k=g.round,y=g.sqr,b=g.valueOrDefault,x=p.extend({init:function(e,t){1===arguments.length?(this.lat=e[0],this.lng=e[1]):(this.lat=e,this.lng=t)},DISTANCE_ITERATIONS:100,DISTANCE_CONVERGENCE:1e-12,DISTANCE_PRECISION:2,FORMAT:"{0:N6},{1:N6}",toArray:function(){return[this.lat,this.lng]},equals:function(e){return e&&e.lat===this.lat&&e.lng===this.lng},clone:function(){return new x(this.lat,this.lng)},round:function(e){return this.lng=k(this.lng,e),this.lat=k(this.lat,e),this},wrap:function(){return this.lng=this.lng%180,this.lat=this.lat%90,this},distanceTo:function(e,t){return this.greatCircleTo(e,t).distance},destination:function(e,t,n){var r,o,l,d,u;return t=w(t),n=n||f.map.datums.WGS84,r=w(this.lat),o=w(this.lng),l=e/h.dataviz.map.datums.WGS84.a,d=i.asin(c(r)*s(l)+s(r)*c(l)*s(t)),u=o+a(c(t)*c(l)*s(r),s(l)-c(r)*c(d)),new x(_(d),_(u))},greatCircleTo:function(e,t){var n,l,d,h,p,m,g,v,b,C,T,S,D,A,E,I,P,F,z,M,H,R,B,L,N,O,V,W,U;if(e=x.create(e),t=t||f.map.datums.WGS84,!e||this.clone().round(8).equals(e.clone().round(8)))return{distance:0,azimuthFrom:0,azimuthTo:0};for(n=t.a,l=t.b,d=t.f,h=w(e.lng-this.lng),p=o((1-d)*u(w(this.lat))),m=c(p),g=s(p),v=o((1-d)*u(w(e.lat))),b=c(v),C=s(v),T=h,D=this.DISTANCE_ITERATIONS,A=!1;!A&&D-->0;)E=c(T),I=s(T),P=i.sqrt(y(C*E)+y(g*b-m*C*I)),z=m*b+g*C*I,H=a(P,z),R=g*C*E/P,F=1-y(R),M=0,0!==F&&(M=z-2*m*b/F),S=T,B=d/16*F*(4+d*(4-3*F)),T=h+(1-B)*d*R*(H+B*P*(M+B*z*(-1+2*y(M)))),A=r(T-S)<=this.DISTANCE_CONVERGENCE;return L=F*(y(n)-y(l))/y(l),N=1+L/16384*(4096+L*(-768+L*(320-175*L))),O=L/1024*(256+L*(-128+L*(74-47*L))),V=O*P*(M+O/4*(z*(-1+2*y(M))-O/6*M*(-3+4*y(P))*(-3+4*y(M)))),W=a(C*E,g*b-m*C*I),U=a(g*E,-m*C+g*b*I),{distance:k(l*N*(H-V),this.DISTANCE_PRECISION),azimuthFrom:_(W),azimuthTo:_(U)}}});x.fn.toString=function(){return h.format(this.FORMAT,this.lng,this.lat)},x.fromLngLat=function(e){return new x(e[1],e[0])},x.fromLatLng=function(e){return new x(e[0],e[1])},x.create=function(e,n){return v(e)?e instanceof x?e.clone():1===arguments.length&&2===e.length?x.fromLatLng(e):new x(e,n):t},n=p.extend({init:function(e,t){e=x.create(e),t=x.create(t),e.lng+180>t.lng+180&&t.lat+90>e.lat+90?(this.se=e,this.nw=t):(this.se=t,this.nw=e)},contains:function(e){var t=this.nw,n=this.se,i=b(e.lng,e[1]),r=b(e.lat,e[0]);return e&&i+180>=t.lng+180&&n.lng+180>=i+180&&r+90>=n.lat+90&&t.lat+90>=r+90},center:function(){var e=this.nw,t=this.se,n=e.lng+(t.lng-e.lng)/2,i=e.lat+(t.lat-e.lat)/2;return new x(i,n)},containsAny:function(e){var t,n=!1;for(t=0;e.length>t;t++)n=n||this.contains(e[t]);return n},include:function(e){var t=this.nw,n=this.se,i=b(e.lng,e[1]),r=b(e.lat,e[0]);t.lng=d(t.lng,i),t.lat=l(t.lat,r),n.lng=l(n.lng,i),n.lat=d(n.lat,r)},includeAll:function(e){for(var t=0;e.length>t;t++)this.include(e[t])},edges:function(){var e=this.nw,t=this.se;return{nw:this.nw,ne:new x(e.lat,t.lng),se:this.se,sw:new x(e.lng,t.lat)}},toArray:function(){var e=this.nw,t=this.se;return[e,new x(e.lat,t.lng),t,new x(e.lng,t.lat)]},overlaps:function(e){return this.containsAny(e.toArray())||e.containsAny(this.toArray())}}),n.World=new n([90,-180],[-90,180]),n.create=function(e,i){return e instanceof n?e:e&&i?new n(e,i):e&&4===e.length&&!i?new n([e[0],e[1]],[e[2],e[3]]):t},m(f,{map:{Extent:n,Location:x}})}(window.kendo.jQuery),function(){var e=window.kendo,t=e.ui.Widget,n=e.template,i=e.dataviz,r=i.util.valueOrDefault,o=t.extend({init:function(e,n){t.fn.init.call(this,e,n),this._initOptions(n),this.items=[],this.element.addClass("k-widget k-attribution")},options:{name:"Attribution",separator:"&nbsp;|&nbsp;",itemTemplate:"#= text #"},filter:function(e,t){this._extent=e,this._zoom=t,this._render()},add:function(e){e&&("string"==typeof e&&(e={text:e}),this.items.push(e),this._render())},remove:function(e){var t,n,i=[];for(t=0;this.items.length>t;t++)n=this.items[t],n.text!==e&&i.push(n);this.items=i,this._render()},clear:function(){this.items=[],this.element.empty()},_render:function(){var e,t,i,r,o=[];for(this.element.empty(),e=n(this.options.itemTemplate),t=0;this.items.length>t;t++)i=this.items[t],r=this._itemText(i),""!==r&&o.push(e({text:r}));this.element.append(o.join(this.options.separator))},_itemText:function(e){var t="",n=this._inZoomLevel(e.minZoom,e.maxZoom),i=this._inArea(e.extent);return n&&i&&(t+=e.text),t},_inZoomLevel:function(e,t){var n=!0;return e=r(e,-Number.MAX_VALUE),t=r(t,Number.MAX_VALUE),n=this._zoom>e&&t>this._zoom},_inArea:function(e){var t=!0;return e&&(t=e.contains(this._extent)),t}});e.dataviz.ui.plugin(o)}(jQuery),function(e){function t(e){return n.format('<button class="k-button k-navigator-{0}"><span class="k-icon k-i-arrow-{0}"/></button>',e)}var n=window.kendo,i=n.ui.Widget,r=n.keys,o=e.proxy,a=".kendoNavigator",s=t("n")+t("e")+t("s")+t("w"),l=i.extend({init:function(e,t){i.fn.init.call(this,e,t),this._initOptions(t),this.element.addClass("k-widget k-header k-shadow k-navigator").append(s).on("click"+a,".k-button",o(this,"_click"));var r=this.element.parent().closest("["+n.attr("role")+"]");this._keyroot=r.length>0?r:this.element,this._tabindex(this._keyroot),this._keydown=o(this._keydown,this),this._keyroot.on("keydown",this._keydown)},options:{name:"Navigator",panStep:1},events:["pan"],dispose:function(){this._keyroot.off("keydown",this._keydown)},_pan:function(e,t){var n=this.options.panStep;this.trigger("pan",{x:e*n,y:t*n})},_click:function(t){var n=0,i=0,r=e(t.currentTarget);r.is(".k-navigator-n")?i=1:r.is(".k-navigator-s")?i=-1:r.is(".k-navigator-e")?n=1:r.is(".k-navigator-w")&&(n=-1),this._pan(n,i),t.preventDefault()},_keydown:function(e){switch(e.which){case r.UP:this._pan(0,1),e.preventDefault();break;case r.DOWN:this._pan(0,-1),e.preventDefault();break;case r.RIGHT:this._pan(1,0),e.preventDefault();break;case r.LEFT:this._pan(-1,0),e.preventDefault()}}});n.dataviz.ui.plugin(l)}(jQuery),function(e){function t(e,t){return n.format('<button class="k-button k-zoom-{0}" title="zoom-{0}">{1}</button>',e,t)}var n=window.kendo,i=n.ui.Widget,r=n.keys,o=e.proxy,a=".kendoZoomControl",s=t("in","+")+t("out","-"),l=187,d=189,c=61,u=173,h=i.extend({init:function(e,t){i.fn.init.call(this,e,t),this._initOptions(t),this.element.addClass("k-widget k-zoom-control k-button-wrap k-buttons-horizontal").append(s).on("click"+a,".k-button",o(this,"_click"));var r=this.element.parent().closest("["+n.attr("role")+"]");this._keyroot=r.length>0?r:this.element,this._tabindex(this._keyroot),this._keydown=o(this._keydown,this),this._keyroot.on("keydown",this._keydown)},options:{name:"ZoomControl",zoomStep:1},events:["change"],_change:function(e){var t=this.options.zoomStep;this.trigger("change",{delta:e*t})},_click:function(t){var n=e(t.currentTarget),i=1;n.is(".k-zoom-out")&&(i=-1),this._change(i),t.preventDefault()},_keydown:function(e){switch(e.which){case r.NUMPAD_PLUS:case l:case c:this._change(1);break;case r.NUMPAD_MINUS:case d:case u:this._change(-1)}}});n.dataviz.ui.plugin(h)}(jQuery),function(){var e=Math,t=e.atan,n=e.exp,i=e.pow,r=e.sin,o=e.log,a=e.tan,s=window.kendo,l=s.Class,d=s.dataviz,c=d.Matrix,u=s.deepExtend,h=d.geometry,p=h.Point,f=d.map,m=f.Location,g=d.util,v=g.rad,_=g.deg,w=g.limitValue,k=e.PI,y=k/2,b=k/4,x=k/180,C={a:6378137,b:6356752.314245179,f:.0033528106647474805,e:.08181919084262149},T=l.extend({init:function(e){this._initOptions(e)},MAX_LNG:180,MAX_LAT:85.0840590501,INVERSE_ITERATIONS:15,INVERSE_CONVERGENCE:1e-12,options:{centralMeridian:0,datum:C},forward:function(e,t){var n=this,i=n.options,r=i.datum,o=r.a,a=i.centralMeridian,s=w(e.lat,-n.MAX_LAT,n.MAX_LAT),l=t?w(e.lng,-n.MAX_LNG,n.MAX_LNG):e.lng,d=v(l-a)*o,c=n._projectLat(s);return new p(d,c)},_projectLat:function(e){var t=this.options.datum,n=t.e,s=t.a,l=v(e),d=a(b+l/2),c=n*r(l),u=i((1-c)/(1+c),n/2);return s*o(d*u)},inverse:function(e,t){var n=this,i=n.options,r=i.datum,o=r.a,a=i.centralMeridian,s=e.x/(x*o)+a,l=w(n._inverseY(e.y),-n.MAX_LAT,n.MAX_LAT);return t&&(s=w(s,-n.MAX_LNG,n.MAX_LNG)),new m(l,s)},_inverseY:function(o){var a,s,l,d,c=this,u=c.options.datum,h=u.a,p=u.e,f=p/2,m=n(-o/h),g=y-2*t(m);for(a=0;c.INVERSE_ITERATIONS>=a&&(s=p*r(g),l=i((1-s)/(1+s),f),d=y-2*t(m*l)-g,g+=d,!(e.abs(d)<=c.INVERSE_CONVERGENCE));a++);return _(g)}}),S=T.extend({MAX_LAT:85.0511287798,_projectLat:function(e){var t=this.options.datum.a,n=v(e),i=a(b+n/2);return t*o(i)},_inverseY:function(e){var i=this.options.datum.a,r=n(-e/i);return _(y-2*t(r))}}),D=l.extend({forward:function(e){return new p(e.lng,e.lat)},inverse:function(e){return new m(e.y,e.x)}}),A=l.extend({init:function(){var e=this,t=e._proj=new S,n=this.c=2*k*t.options.datum.a;this._tm=c.translate(.5,.5).times(c.scale(1/n,-1/n)),this._itm=c.scale(n,-n).times(c.translate(-.5,-.5))},toPoint:function(e,t,n){var i=this._proj.forward(e,n);return i.transform(this._tm).scale(t||1)},toLocation:function(e,t,n){return e=e.clone().scale(1/(t||1)).transform(this._itm),this._proj.inverse(e,n)}}),E=l.extend({init:function(){this._proj=new T},toPoint:function(e){return this._proj.forward(e)},toLocation:function(e){return this._proj.inverse(e)}}),I=l.extend({init:function(){this._proj=new D},toPoint:function(e){return this._proj.forward(e)},toLocation:function(e){return this._proj.inverse(e)}});u(d,{map:{crs:{EPSG3395:E,EPSG3857:A,EPSG4326:I},datums:{WGS84:C},projections:{Equirectangular:D,Mercator:T,SphericalMercator:S}}})}(window.kendo.jQuery),function(e){var t=e.proxy,n=window.kendo,i=n.Class,r=n.dataviz,o=n.deepExtend,a=r.defined,s=r.map.Extent,l=i.extend({init:function(n,i){this._initOptions(i),this.map=n,this.element=e("<div class='k-layer'></div>").css({zIndex:this.options.zIndex,opacity:this.options.opacity}).appendTo(n.scrollElement),this._beforeReset=t(this._beforeReset,this),this._reset=t(this._reset,this),this._resize=t(this._resize,this),this._panEnd=t(this._panEnd,this),this._activate(),this._updateAttribution()},destroy:function(){this._deactivate()},show:function(){this.reset(),this._activate(),this._applyExtent(!0)},hide:function(){this._deactivate(),this._setVisibility(!1)},reset:function(){this._beforeReset(),this._reset()},_reset:function(){this._applyExtent()},_beforeReset:e.noop,_resize:e.noop,_panEnd:function(){this._applyExtent()},_applyExtent:function(){var e=this.options,t=this.map.zoom(),n=!a(e.minZoom)||t>=e.minZoom,i=!a(e.maxZoom)||e.maxZoom>=t,r=s.create(e.extent),o=!r||r.overlaps(this.map.extent());this._setVisibility(n&&i&&o)},_setVisibility:function(e){this.element.css("display",e?"":"none")},_activate:function(){var e=this.map;e.bind("beforeReset",this._beforeReset),e.bind("reset",this._reset),e.bind("resize",this._resize),e.bind("panEnd",this._panEnd)},_deactivate:function(){var e=this.map;e.unbind("beforeReset",this._beforeReset),e.unbind("reset",this._reset),e.unbind("resize",this._resize),e.unbind("panEnd",this._panEnd)},_updateAttribution:function(){var e=this.map.attribution;e&&e.add(this.options.attribution)}});o(r,{map:{layers:{Layer:l}}})}(window.kendo.jQuery),function(e){var t=e.proxy,n=window.kendo,i=n.Class,r=n.data.DataSource,o=n.dataviz,a=n.deepExtend,s=o.last,l=o.util.defined,d=o.geometry,c=o.drawing,u=c.Group,h=o.map,p=h.Location,f=h.layers.Layer,m=f.extend({init:function(e,t){f.fn.init.call(this,e,t),this.surface=c.Surface.create(this.element,{width:e.scrollElement.width(),height:e.scrollElement.height()}),this._initRoot(),this.movable=new n.ui.Movable(this.surface.element),this._markers=[],this._click=this._handler("shapeClick"),this.surface.bind("click",this._click),this._mouseenter=this._handler("shapeMouseEnter"),this.surface.bind("mouseenter",this._mouseenter),this._mouseleave=this._handler("shapeMouseLeave"),this.surface.bind("mouseleave",this._mouseleave),this._initDataSource()},options:{autoBind:!0},destroy:function(){f.fn.destroy.call(this),this.surface.destroy(),this.dataSource.unbind("change",this._dataChange)},setDataSource:function(e){this.dataSource&&this.dataSource.unbind("change",this._dataChange),this.dataSource=e,this.dataSource.bind("change",this._dataChange),this.options.autoBind&&this.dataSource.fetch()},_reset:function(){f.fn._reset.call(this),this._translateSurface(),this._data&&this._load(this._data)},_initRoot:function(){this._root=new u,this.surface.draw(this._root)},_beforeReset:function(){this.surface.clear(),this._initRoot()},_resize:function(){this.surface.size(this.map.size())},_initDataSource:function(){var e=this.options.dataSource;this._dataChange=t(this._dataChange,this),this.dataSource=r.create(e).bind("change",this._dataChange),e&&this.options.autoBind&&this.dataSource.fetch()},_dataChange:function(e){this._data=e.sender.view(),this._load(this._data)},_load:function(e){var t,n,i;for(this._clearMarkers(),this._loader||(this._loader=new g(this.map,this.options.style,this)),t=new u,n=0;e.length>n;n++)i=this._loader.parse(e[n]),i&&t.append(i);this._root.clear(),this._root.append(t)},shapeCreated:function(e){var t,n=!1;return e instanceof c.Circle&&(n=l(this._createMarker(e))),n||(t={layer:this,shape:e},n=this.map.trigger("shapeCreated",t)),n},_createMarker:function(e){var t=this.map.markers.bind({location:e.location},e.dataItem);return t&&this._markers.push(t),t},_clearMarkers:function(){for(var e=0;this._markers.length>e;e++)this.map.markers.remove(this._markers[e]);this._markers=[]},_panEnd:function(e){f.fn._panEnd.call(this,e),this._translateSurface()},_translateSurface:function(){var e=this.map,t=e.locationToView(e.extent().nw);this.surface.translate&&(this.surface.translate(t),this.movable.moveTo({x:t.x,y:t.y}))},_handler:function(e){var t=this;return function(n){if(n.element){var i={layer:t,shape:n.element,originalEvent:n.originalEvent};t.map.trigger(e,i)}}}}),g=i.extend({init:function(e,t,n){this.observer=n,this.locator=e,this.style=t},parse:function(e){var t=new u;return"Feature"===e.type?this._loadGeometryTo(t,e.geometry,e):this._loadGeometryTo(t,e,e),2>t.children.length&&(t=t.children[0]),t},_shapeCreated:function(e){var t=!1;return this.observer&&this.observer.shapeCreated&&(t=this.observer.shapeCreated(e)),t},_loadGeometryTo:function(e,t,n){var i,r,o=t.coordinates;switch(t.type){case"LineString":r=this._loadPolygon(e,[o],n),this._setLineFill(r);break;case"MultiLineString":for(i=0;o.length>i;i++)r=this._loadPolygon(e,[o[i]],n),this._setLineFill(r);break;case"Polygon":this._loadPolygon(e,o,n);break;case"MultiPolygon":for(i=0;o.length>i;i++)this._loadPolygon(e,o[i],n);break;case"Point":this._loadPoint(e,o,n);break;case"MultiPoint":for(i=0;o.length>i;i++)this._loadPoint(e,o[i],n)}},_setLineFill:function(e){var t=e.segments;(4>t.length||!t[0].anchor().equals(s(t).anchor()))&&(e.options.fill=null)},_loadShape:function(e,t){return this._shapeCreated(t)||e.append(t),t},_loadPolygon:function(e,t,n){var i=this._buildPolygon(t);return i.dataItem=n,this._loadShape(e,i)},_buildPolygon:function(e){var t,n,i,r=e.length>1?c.MultiPath:c.Path,o=new r(this.style);for(t=0;e.length>t;t++)for(n=0;e[t].length>n;n++)i=this.locator.locationToView(p.fromLngLat(e[t][n])),0===n?o.moveTo(i.x,i.y):o.lineTo(i.x,i.y);return o},_loadPoint:function(e,t,n){var i=p.fromLngLat(t),r=this.locator.locationToView(i),o=new d.Circle(r,10),a=new c.Circle(o,this.style);return a.dataItem=n,a.location=i,this._loadShape(e,a)}});a(n.data,{schemas:{geojson:{type:"json",data:function(e){return"FeatureCollection"===e.type?e.features:"GeometryCollection"===e.type?e.geometries:e}}},transports:{geojson:{read:{dataType:"json"}}}}),a(o,{map:{layers:{shape:m,ShapeLayer:m},GeoJSONLoader:g}})}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.getter,i=t.dataviz,r=t.deepExtend,o=i.util,a=o.defined,s=i.geometry,l=i.drawing,d=i.map,c=d.Location,u=d.layers.ShapeLayer,h=u.extend({options:{autoBind:!0,locationField:"location",valueField:"value",minSize:0,maxSize:100,scale:"sqrt",symbol:"circle"},_load:function(e){var t,i,r,o,s,l,d,u,h,p,f,m;if(0!==e.length)for(t=this.options,i=n(t.valueField),e=e.slice(0),e.sort(function(e,t){return i(t)-i(e)}),r=i(e[0]),o=this._scaleType(),l=0;e.length>l;l++)d=e[l],u=n(t.locationField)(d),h=n(t.valueField)(d),a(u)&&a(h)&&(s||(s=new o([0,h],[t.minSize,t.maxSize])),u=c.create(u),p=this.map.locationToView(u),f=s.map(h),m=this._createSymbol({center:p,size:f,style:t.style,dataItem:d,location:u}),m.dataItem=d,m.location=u,m.value=h,this._drawSymbol(m))},_scaleType:function(){var e=this.options.scale;return t.isFunction(e)?e:i.map.scales[e]},_createSymbol:function(e){var n=this.options.symbol;return t.isFunction(n)||(n=i.map.symbols[n]),n(e)},_drawSymbol:function(e){var t={layer:this,shape:e},n=this.map.trigger("shapeCreated",t);n||this.surface.draw(e)}}),p=t.Class.extend({init:function(e,t){var n,i;this._domain=e,this._range=t,n=Math.sqrt(e[1])-Math.sqrt(e[0]),i=t[1]-t[0],this._ratio=i/n},map:function(e){var t=(Math.sqrt(e)-Math.sqrt(this._domain[0]))*this._ratio;return this._range[0]+t}}),f={circle:function(e){var t=new s.Circle(e.center,e.size/2);return new l.Circle(t,e.style)},square:function(e){var t=new l.Path(e.style),n=e.size/2,i=e.center;return t.moveTo(i.x-n,i.y-n).lineTo(i.x+n,i.y-n).lineTo(i.x+n,i.y+n).lineTo(i.x-n,i.y+n).close(),t}};r(i,{map:{layers:{bubble:h,BubbleLayer:h},scales:{sqrt:p},symbols:f}})}(window.kendo.jQuery),function(e){function t(e){return new h(d(e.x),d(e.y))}function n(e,t){return"x:"+e.x+"y:"+e.y+"zoom:"+t}var i=Math,r=e.proxy,o=window.kendo,a=o.Class,s=o.template,l=o.dataviz,d=l.round,c=o.deepExtend,u=l.geometry,h=u.Point,p=l.map.layers.Layer,f=l.util,m=f.renderSize,g=f.limitValue,v=p.extend({init:function(e,t){p.fn.init.call(this,e,t),"string"==typeof this.options.subdomains&&(this.options.subdomains=this.options.subdomains.split(""));var n=this._viewType();this._view=new n(this.element,this.options)},destroy:function(){p.fn.destroy.call(this),this._view.destroy(),this._view=null},_reset:function(){p.fn._reset.call(this),this._updateView(),this._view.clear(),this._view.reset()},_viewType:function(){return _},_activate:function(){p.fn._activate.call(this),o.support.mobileOS||(this._pan||(this._pan=r(this._throttleRender,this)),this.map.bind("pan",this._pan))},_deactivate:function(){p.fn._deactivate.call(this),this._pan&&this.map.unbind("pan",this._pan)},_updateView:function(){var e=this._view,t=this.map,n=t.extent(),i={nw:t.locationToLayer(n.nw).round(),se:t.locationToLayer(n.se).round()};e.center(t.locationToLayer(t.center())),e.extent(i),e.zoom(t.zoom())},_resize:function(){this._render()},_throttleRender:function(){var e=this,t=new Date,n=e._renderTimestamp;(!n||t-n>100)&&(this._render(),e._renderTimestamp=t)},_panEnd:function(e){p.fn._panEnd.call(this,e),this._render()},_render:function(){this._updateView(),this._view.render()}}),_=a.extend({init:function(e,t){this.element=e,this._initOptions(t),this.pool=new k},options:{tileSize:256,subdomains:["a","b","c"],urlTemplate:""},center:function(e){this._center=e},extent:function(e){this._extent=e},zoom:function(e){this._zoom=e},pointToTileIndex:function(e){return new h(i.floor(e.x/this.options.tileSize),i.floor(e.y/this.options.tileSize))},clear:function(){this.pool.empty()},tileCount:function(){var e=this.size(),t=this.pointToTileIndex(this._extent.nw),n=this._extent.nw,r=this.indexToPoint(t).translate(-n.x,-n.y);return{x:i.ceil((i.abs(r.x)+e.width)/this.options.tileSize),y:i.ceil((i.abs(r.y)+e.height)/this.options.tileSize)}},size:function(){var e=this._extent.nw,t=this._extent.se,n=t.clone().translate(-e.x,-e.y);return{width:n.x,height:n.y}},indexToPoint:function(e){var t=e.x,n=e.y;return new h(t*this.options.tileSize,n*this.options.tileSize)},subdomainText:function(){var e=this.options.subdomains;return e[this.subdomainIndex++%e.length]},destroy:function(){this.element.empty(),this.pool.empty()},reset:function(){this.subdomainIndex=0,this.basePoint=this._extent.nw,this.render()},render:function(){var e,t,n,i=this.tileCount(),r=this.pointToTileIndex(this._extent.nw);for(t=0;i.x>t;t++)for(n=0;i.y>n;n++)e=this.createTile({x:r.x+t,y:r.y+n}),e.options.visible||(this.element.append(e.element),e.options.visible=!0)},createTile:function(e){var t=this.tileOptions(e);return this.pool.get(this._center,t)},tileOptions:function(e){var n=this.wrapIndex(e),i=this.indexToPoint(e),r=this.basePoint,o=i.clone().translate(-r.x,-r.y);return{index:n,currentIndex:e,point:i,offset:t(o),zoom:this._zoom,subdomain:this.subdomainText(),urlTemplate:this.options.urlTemplate,errorUrlTemplate:this.options.errorUrlTemplate}},wrapIndex:function(e){var t=i.pow(2,this._zoom);return{x:this.wrapValue(e.x,t),y:g(e.y,0,t-1)}},wrapValue:function(e,t){var n=i.abs(e)%t;return e=e>=0?n:t-(0===n?t:n)}}),w=a.extend({init:function(e){this._initOptions(e),this.createElement(),this.load(),this.options.visible=!1},options:{urlTemplate:"",errorUrlTemplate:"",visible:!1},createElement:function(){this.element=e("<img style='position: absolute; display: block; visibility: visible;' />").error(r(function(e){this.errorUrl()?e.target.setAttribute("src",this.errorUrl()):e.target.removeAttribute("src")},this))},load:function(e){this.options=c({},this.options,e);var t=this.element[0];t.style.visibility="visible",t.style.display="block",t.style.top=m(this.options.offset.y),t.style.left=m(this.options.offset.x),t.setAttribute("src",this.url()),this.options.id=n(this.options.currentIndex,this.options.zoom),this.options.visible=!0},url:function(){var e=s(this.options.urlTemplate);return e(this.urlOptions())},errorUrl:function(){var e=s(this.options.errorUrlTemplate);return e(this.urlOptions())},urlOptions:function(){var e=this.options;return{zoom:e.zoom,subdomain:e.subdomain,z:e.zoom,x:e.index.x,y:e.index.y,s:e.subdomain,quadkey:e.quadkey,q:e.quadkey,culture:e.culture,c:e.culture}},destroy:function(){this.element&&(this.element.remove(),this.element=null)}}),k=a.extend({init:function(){this._items=[]},options:{maxSize:100},get:function(e,t){var n,i=this;return n=i._items.length>=i.options.maxSize?i._update(e,t):i._create(t)},empty:function(){var e,t=this._items;for(e=0;t.length>e;e++)t[e].destroy();this._items=[]},_create:function(e){var t,i,r,o,a=this,s=a._items,l=n(e.currentIndex,e.zoom);for(i=0;s.length>i;i++)r=s[i],r.options.id===l&&(t=r,o=t);return t?t.load(e):(o=new w(e),this._items.push(o)),o},_update:function(e,t){var i,r,o,a,s=this,l=s._items,d=-Number.MAX_VALUE,c=n(t.currentIndex,t.zoom);for(o=0;l.length>o;o++){if(a=l[o],i=a.options.point.clone().distanceTo(e),a.options.id===c)return l[o];i>d&&(r=o,d=i)}return l[r].load(t),l[r]}});c(l,{map:{layers:{tile:v,TileLayer:v,ImageTile:w,TilePool:k,TileView:_}}})}(window.kendo.jQuery),function(e){var t=e.proxy,n=window.kendo,i=n.template,r=n.dataviz,o=n.deepExtend,a=r.defined,s=r.map.Extent,l=r.map.Location,d=r.map.layers.TileLayer,c=r.map.layers.TileView,u=d.extend({init:function(e,t){d.fn.init.call(this,e,t),this._initView()},options:{settingsUrl:"http://dev.virtualearth.net/REST/v1/Imagery/Metadata/#= imagerySet #?output=json&jsonp=bingTileParams&include=ImageryProviders&key=#= key #",imagerySet:"road"},_initView:function(){var n,r,o=this.options;if(o.settingsUrl){if(!o.key)throw Error("Bing tile layer: API key is required");n=i(o.settingsUrl),r=n({key:o.key,imagerySet:o.imagerySet}),e.ajax({url:r,type:"get",dataType:"jsonp",jsonpCallback:"bingTileParams",success:t(this._success,this)})}},_success:function(e){var t,n;e&&e.resourceSets.length&&(t=this.resource=e.resourceSets[0].resources[0],o(this._view.options,{urlTemplate:t.imageUrl.replace("{subdomain}","#= subdomain #").replace("{quadkey}","#= quadkey #").replace("{culture}","#= culture #"),subdomains:t.imageUrlSubdomains}),n=this.options,a(n.minZoom)||(n.minZoom=t.zoomMin),a(n.maxZoom)||(n.maxZoom=t.zoomMax),this._addAttribution(),this.reset())},_viewType:function(){return h},_addAttribution:function(){var e,t,n,i,r,o=this.map.attribution;if(o&&(e=this.resource.imageryProviders))for(t=0;e.length>t;t++)for(n=e[t],i=0;n.coverageAreas.length>i;i++)r=n.coverageAreas[i],o.add({text:n.attribution,minZoom:r.zoomMin,maxZoom:r.zoomMax,extent:new s(new l(r.bbox[2],r.bbox[1]),new l(r.bbox[0],r.bbox[3]))})}}),h=c.extend({options:{culture:"en-US"},tileOptions:function(e){var t=c.fn.tileOptions.call(this,e);return t.culture=this.options.culture,t.quadkey=this.tileQuadKey(this.wrapIndex(e)),t},tileQuadKey:function(e){var t,n,i,r="";for(i=this._zoom;i>0;i--)t=0,n=1<<i-1,0!==(e.x&n)&&t++,0!==(e.y&n)&&(t+=2),r+=t;return r}});o(r,{map:{layers:{bing:u,BingLayer:u,BingView:h}}})}(window.kendo.jQuery),function(e,t){var n=document,i=Math,r=e.inArray,o=e.proxy,a=window.kendo,s=a.Class,l=a.data.DataSource,d=a.ui.Tooltip,c=a.dataviz,u=a.deepExtend,h=c.map,p=h.Location,f=h.layers.Layer,m=f.extend({init:function(e,t){f.fn.init.call(this,e,t),this.items=[],this._initDataSource()},destroy:function(){f.fn.destroy.call(this),this.dataSource.unbind("change",this._dataChange),this.clear()},options:{zIndex:1e3,autoBind:!0,dataSource:{},locationField:"location",titleField:"title"},add:function(t){if(!e.isArray(t))return this._addOne(t);for(var n=0;t.length>n;n++)this._addOne(t[n])},remove:function(e){e.destroy();var t=r(e,this.items);t>-1&&this.items.splice(t,1)},clear:function(){for(var e=0;this.items.length>e;e++)this.items[e].destroy();this.items=[]},update:function(e){var t=e.location();t&&e.showAt(this.map.locationToView(t))},reset:function(){var e,t;for(f.fn.reset.call(this),e=this.items,t=0;e.length>t;t++)this.update(e[t])},bind:function(e,n){var i,r,o=h.Marker.create(e,this.options);return o.dataItem=n,i={marker:o},r=this.map.trigger("markerCreated",i),r?t:(this.add(o),o)},setDataSource:function(e){this.dataSource&&this.dataSource.unbind("change",this._dataChange),this.dataSource=e,this.dataSource.bind("change",this._dataChange),this.options.autoBind&&this.dataSource.fetch()},_addOne:function(e){var t=g.create(e,this.options);return t.addTo(this),t},_initDataSource:function(){var e=this.options.dataSource;this._dataChange=o(this._dataChange,this),this.dataSource=l.create(e).bind("change",this._dataChange),e&&this.options.autoBind&&this.dataSource.fetch()},_dataChange:function(e){this._load(e.sender.view())},_load:function(e){var t,n,i,r;for(this._data=e,this.clear(),t=a.getter(this.options.locationField),n=a.getter(this.options.titleField),i=0;e.length>i;i++)r=e[i],this.bind({location:t(r),title:n(r)},r)}}),g=s.extend({init:function(e){this.options=e||{}},addTo:function(e){this.layer=e.markers||e,this.layer.items.push(this),this.layer.update(this)},location:function(e){return e?(this.options.location=p.create(e).toArray(),this.layer&&this.layer.update(this),this):p.create(this.options.location)},showAt:function(e){this.render(),this.element.css({left:i.round(e.x),top:i.round(e.y)}),this.tooltip&&this.tooltip.popup&&this.tooltip.popup._position()},hide:function(){this.element&&(this.element.remove(),this.element=null),this.tooltip&&(this.tooltip.destroy(),this.tooltip=null)},destroy:function(){this.layer=null,this.hide()},render:function(){var t,i;this.element||(t=this.options,i=this.layer,this.element=e(n.createElement("span")).addClass("k-marker k-marker-"+a.toHyphens(t.shape||"pin")).attr("title",t.title).css("zIndex",t.zIndex),i&&i.element.append(this.element),this.renderTooltip())},renderTooltip:function(){var e,t,n=this,i=n.options.title,r=n.options.tooltip||{};r&&d&&(e=r.template,e&&(t=a.template(e),r.content=function(e){return e.location=n.location(),e.marker=n,t(e)}),(i||r.content||r.contentUrl)&&(this.tooltip=new d(this.element,r),this.tooltip.marker=this))}});g.create=function(e,t){return e instanceof g?e:new g(u({},t,e))},u(c,{map:{layers:{marker:m,MarkerLayer:m},Marker:g}})}(window.kendo.jQuery),function(e){var t=document,n=Math,i=n.min,r=n.pow,o=e.proxy,a=window.kendo,s=a.ui.Widget,l=a.deepExtend,d=a.dataviz,c=d.ui,u=d.defined,h=d.geometry,p=h.Point,f=d.map,m=f.Extent,g=f.Location,v=f.crs.EPSG3857,_=d.util,w=_.limitValue,k=_.renderPos,y=_.valueOrDefault,b="k-",x=.9,C=.93,T="DOMMouseScroll mousewheel",S=5,D=s.extend({init:function(e,n){a.destroy(e),s.fn.init.call(this,e),this._initOptions(n),this.bind(this.events,n),this.crs=new v,this.element.addClass(b+this.options.name.toLowerCase()).css("position","relative").empty().append(t.createElement("div")),this._viewOrigin=this._getOrigin(),this._initScroller(),this._initMarkers(),this._initControls(),this._initLayers(),this._reset(),this._mousewheel=o(this._mousewheel,this),this.element.bind("click",o(this._click,this)),this.element.bind(T,this._mousewheel)},options:{name:"Map",controls:{attribution:!0,navigator:{panStep:100},zoom:!0},layers:[],layerDefaults:{shape:{style:{fill:{color:"#fff"},stroke:{color:"#aaa",width:.5}}},bubble:{style:{fill:{color:"#fff",opacity:.5},stroke:{color:"#aaa",width:.5}}},marker:{shape:"pinTarget",tooltip:{position:"top"}}},center:[0,0],zoom:3,minSize:256,minZoom:1,maxZoom:19,markers:[],markerDefaults:{shape:"pinTarget",tooltip:{position:"top"}},wraparound:!0},events:["beforeReset","click","reset","pan","panEnd","markerCreated","shapeClick","shapeCreated","shapeMouseEnter","shapeMouseLeave","zoomStart","zoomEnd"],destroy:function(){this.scroller.destroy(),this.navigator&&this.navigator.destroy(),this.attribution&&this.attribution.destroy(),this.zoomControl&&this.zoomControl.destroy(),this.markers.destroy();for(var e=0;this.layers.length>e;e++)this.layers[e].destroy();s.fn.destroy.call(this)},zoom:function(e){var t=this.options;return u(e)?(e=w(e,t.minZoom,t.maxZoom),t.zoom!==e&&(t.zoom=e,this._reset()),this):t.zoom},center:function(e){return e?(this.options.center=g.create(e).toArray(),this._reset(),this):g.create(this.options.center)},extent:function(e){return e?(this._setExtent(e),this):this._getExtent()},setOptions:function(e){s.fn.setOptions.call(this,e),this._reset()},locationToLayer:function(e,t){var n=!this.options.wraparound;return e=g.create(e),this.crs.toPoint(e,this._layerSize(t),n)},layerToLocation:function(e,t){var n=!this.options.wraparound;return e=p.create(e),this.crs.toLocation(e,this._layerSize(t),n)},locationToView:function(e){var t,n;return e=g.create(e),t=this.locationToLayer(this._viewOrigin),n=this.locationToLayer(e),n.translateWith(t.scale(-1))},viewToLocation:function(e,t){var n=this.locationToLayer(this._getOrigin(),t);return e=p.create(e),e=e.clone().translateWith(n),this.layerToLocation(e,t)},eventOffset:function(e){var t=this.element.offset(),n=e.originalEvent||e,i=y(n.pageX,n.clientX)-t.left,r=y(n.pageY,n.clientY)-t.top;return new h.Point(i,r)},eventToView:function(e){var t=this.eventOffset(e);return this.locationToView(this.viewToLocation(t))},eventToLayer:function(e){return this.locationToLayer(this.eventToLocation(e))},eventToLocation:function(e){var t=this.eventOffset(e);return this.viewToLocation(t)},viewSize:function(){var e=this.element,t=this._layerSize(),n=e.width();return this.options.wraparound||(n=i(t,n)),{width:n,height:i(t,e.height())}},_setOrigin:function(e,t){var n,i=this.viewSize();return e=this._origin=g.create(e),n=this.locationToLayer(e,t),n.x+=i.width/2,n.y+=i.height/2,this.options.center=this.layerToLocation(n,t).toArray(),this},_getOrigin:function(e){var t,n=this.viewSize();return(e||!this._origin)&&(t=this.locationToLayer(this.center()),t.x-=n.width/2,t.y-=n.height/2,this._origin=this.layerToLocation(t)),this._origin},_setExtent:function(e){var t,i,r,o,a,s,l;for(e=m.create(e),this.center(e.center()),t=this.element.width(),i=this.element.height(),r=this.options.maxZoom;r>=this.options.minZoom&&(o=this.locationToLayer(e.nw,r),a=this.locationToLayer(e.se,r),s=n.abs(a.x-o.x),l=n.abs(a.y-o.y),!(t>=s&&i>=l));r--);this.zoom(r)},_getExtent:function(){var e,t=this._getOrigin(),n=this.locationToLayer(t),i=this.viewSize();return n.x+=i.width,n.y+=i.height,e=this.layerToLocation(n),new m(t,e)},_zoomAround:function(e,t){this._setOrigin(this.layerToLocation(e,t),t),this.zoom(t)
},_initControls:function(){var e=this.options.controls;c.Attribution&&e.attribution&&this._createAttribution(e.attribution),a.support.mobileOS||(c.Navigator&&e.navigator&&this._createNavigator(e.navigator),c.ZoomControl&&e.zoom&&this._createZoomControl(e.zoom))},_createControlElement:function(t,n){var i=t.position||n,r="."+k(i).replace(" ","."),o=e(".k-map-controls"+r,this.element);return 0===o.length&&(o=e("<div>").addClass("k-map-controls "+k(i)).appendTo(this.element)),e("<div>").appendTo(o)},_createAttribution:function(e){var t=this._createControlElement(e,"bottomRight");this.attribution=new c.Attribution(t,e)},_createNavigator:function(e){var t=this._createControlElement(e,"topLeft"),n=this.navigator=new c.Navigator(t,e);this._navigatorPan=o(this._navigatorPan,this),n.bind("pan",this._navigatorPan),this._navigatorCenter=o(this._navigatorCenter,this),n.bind("center",this._navigatorCenter)},_navigatorPan:function(e){var t=this,n=t.scroller,i=n.scrollLeft+e.x,r=n.scrollTop-e.y,o=this._virtualSize,a=this.element.height(),s=this.element.width();i=w(i,o.x.min,o.x.max-s),r=w(r,o.y.min,o.y.max-a),t.scroller.one("scroll",function(e){t._scrollEnd(e)}),t.scroller.scrollTo(-i,-r)},_navigatorCenter:function(){this.center(this.options.center)},_createZoomControl:function(e){var t=this._createControlElement(e,"topLeft"),n=this.zoomControl=new c.ZoomControl(t,e);this._zoomControlChange=o(this._zoomControlChange,this),n.bind("change",this._zoomControlChange)},_zoomControlChange:function(e){this.trigger("zoomStart",{originalEvent:e})||(this.zoom(this.zoom()+e.delta),this.trigger("zoomEnd",{originalEvent:e}))},_initScroller:function(){var e=a.support.mobileOS?C:x,t=this.options.zoomable!==!1,n=this.scroller=new a.mobile.ui.Scroller(this.element.children(0),{friction:e,velocityMultiplier:S,zoom:t,mousewheelScrolling:!1});n.bind("scroll",o(this._scroll,this)),n.bind("scrollEnd",o(this._scrollEnd,this)),n.userEvents.bind("gesturestart",o(this._scaleStart,this)),n.userEvents.bind("gestureend",o(this._scale,this)),this.scrollElement=n.scrollElement},_initLayers:function(){var e,t,n,i,r,o=this.options.layers,a=this.layers=[];for(e=0;o.length>e;e++)t=o[e],n=t.type||"shape",i=this.options.layerDefaults[n],r=d.map.layers[n],a.push(new r(this,l({},i,t)))},_initMarkers:function(){this.markers=new f.layers.MarkerLayer(this,this.options.markerDefaults),this.markers.add(this.options.markers)},_scroll:function(e){var t=this.locationToLayer(this._viewOrigin).round(),n=e.sender.movable,i=new h.Point(n.x,n.y).scale(-1).scale(1/n.scale);t.x+=i.x,t.y+=i.y,this._setOrigin(this.layerToLocation(t)),this.trigger("pan",{originalEvent:e,origin:this._getOrigin(),center:this.center()})},_scrollEnd:function(e){this.trigger("panEnd",{originalEvent:e,origin:this._getOrigin(),center:this.center()})},_scaleStart:function(e){if(this.trigger("zoomStart",{originalEvent:e})){var t=e.touches[1];t&&t.cancel()}},_scale:function(e){var t=this.scroller.movable.scale,n=this._scaleToZoom(t),i=new h.Point(e.center.x,e.center.y),r=this.viewToLocation(i,n),o=this.locationToLayer(r,n),a=o.translate(-i.x,-i.y);this._zoomAround(a,n),this.trigger("zoomEnd",{originalEvent:e})},_scaleToZoom:function(e){var t=this._layerSize()*e,i=t/this.options.minSize,r=n.log(i)/n.log(2);return n.round(r)},_reset:function(){this.attribution&&this.attribution.filter(this.center(),this.zoom()),this._viewOrigin=this._getOrigin(!0),this._resetScroller(),this.trigger("beforeReset"),this.trigger("reset")},_resetScroller:function(){var e,t,n,i,o=this.scroller,a=o.dimensions.x,s=o.dimensions.y,l=this._layerSize(),d=20*l,c=this.extent().nw,u=this.locationToLayer(c).round();o.movable.round=!0,o.reset(),o.userEvents.cancel(),e=this.options.maxZoom-this.zoom(),o.dimensions.maxScale=r(2,e),t={min:-u.x,max:l-u.x},n={min:-u.y,max:l-u.y},this.options.wraparound&&(t.min=-d,t.max=d),this.options.pannable===!1&&(i=this.viewSize(),t.min=n.min=0,t.max=i.width,n.max=i.height),a.makeVirtual(),s.makeVirtual(),a.virtualSize(t.min,t.max),s.virtualSize(n.min,n.max),this._virtualSize={x:t,y:n}},_renderLayers:function(){var e,t,n,i,r,o=this.options.layers,a=this.layers=[],s=this.scrollWrap;for(s.empty(),e=0;o.length>e;e++)t=o[e],n=t.type||"shape",i=this.options.layerDefaults[n],r=d.map.layers[n],a.push(new r(this,l({},i,t)))},_layerSize:function(e){return e=y(e,this.options.zoom),this.options.minSize*r(2,e)},_click:function(e){var t=this.eventOffset(e);this.trigger("click",{originalEvent:e,location:this.viewToLocation(t)})},_mousewheel:function(e){var t,n,i,r,o,a,s,l;e.preventDefault(),t=d.mwDelta(e)>0?-1:1,n=this.options,i=this.zoom(),r=w(i+t,n.minZoom,n.maxZoom),n.zoomable!==!1&&r!==i&&(this.trigger("zoomStart",{originalEvent:e})||(o=this.eventOffset(e),a=this.viewToLocation(o),s=this.locationToLayer(a,r),l=s.translate(-o.x,-o.y),this._zoomAround(l,r),this.trigger("zoomEnd",{originalEvent:e})))}});d.ui.plugin(D)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t){t()});