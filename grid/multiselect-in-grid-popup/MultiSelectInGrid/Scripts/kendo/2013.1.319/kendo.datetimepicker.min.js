/*
* Kendo UI Complete v2013.1.319 (http://kendoui.com)
* Copyright 2013 Telerik AD. All rights reserved.
*
* Kendo UI Complete commercial licenses may be obtained at
* https://www.kendoui.com/purchase/license-agreement/kendo-ui-complete-commercial.aspx
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
("function"==typeof define&&define.amd?define:function(e,t){return t()})(["./kendo.datepicker.min","./kendo.timepicker.min"],function(){(function(e,t){function a(e){e.preventDefault()}function n(t){var a,n=i.getCulture(t.culture).calendars.standard.patterns;t.format=s(t.format||n.g),t.timeFormat=a=s(t.timeFormat||n.t),i.DateView.normalize(t),-1===e.inArray(a,t.parseFormats)&&t.parseFormats.splice(1,0,a)}var i=window.kendo,o=i.TimeView,r=i.parseDate,l=i._activeElement,s=i._extractFormat,d=i.calendar,u=d.isInRange,c=d.restrictValue,m=d.isEqualDatePart,p=o.getMilliseconds,f=i.ui,_=f.Widget,v="open",h="close",g="change",w=".kendoDateTimePicker",k="click"+w,x="disabled",V="readonly",y="k-state-default",b="k-state-focused",D="k-state-hover",A="k-state-disabled",I="mouseenter"+w+" mouseleave"+w,T="mousedown"+w,C="month",F="<span/>",R="aria-activedescendant",W="aria-expanded",H="aria-hidden",S="aria-owns",E="aria-disabled",M="aria-readonly",q=Date,B=new q(1900,0,1),N=new q(2099,11,31),O={view:"date"},P={view:"time"},j=e.extend,L=_.extend({init:function(e,t){var a,o=this;_.fn.init.call(o,e,t),e=o.element,t=o.options,n(t),o._wrapper(),o._views(),o._icons(),o._reset(),o._template(),e[0].type="text",e.addClass("k-input").attr({role:"textbox","aria-haspopup":!0,"aria-expanded":!1}),o._midnight=0===p(t.min)+p(t.max),a=e.is("[disabled]"),a?o.enable(!1):o.readonly(e.is("[readonly]")),o.value(t.value||e.val()),i.notify(o)},options:{name:"DateTimePicker",value:null,format:"",timeFormat:"",culture:"",parseFormats:[],dates:[],min:new q(B),max:new q(N),interval:30,height:200,footer:"",start:C,depth:C,animation:{},month:{},ARIATemplate:'Current focused date is #=kendo.toString(data.current, "G")#'},events:[v,h,g],setOptions:function(e){var t=this,a=t.dateView.options,i=t.timeView.options;_.fn.setOptions.call(t,e),n(t.options),e=t.options,j(a,e,{change:a.change,close:a.close,open:a.open}),j(i,e,{format:e.timeFormat,active:i.active,change:i.change,close:i.close,open:i.open}),t.timeView.ul[0].innerHTML=""},_editable:function(t){var n=this,o=n.element.off(w),r=n._dateIcon.off(w),s=n._timeIcon.off(w),d=n._inputWrapper.off(w),u=t.readonly,c=t.disable;u||c?(d.addClass(c?A:y).removeClass(c?y:A),o.attr(x,c).attr(V,u).attr(E,c).attr(M,u)):(d.addClass(y).removeClass(A).on(I,n._toggleHover),o.removeAttr(x).removeAttr(V).attr(E,!1).attr(M,!1).on("keydown"+w,e.proxy(n._keydown,n)).on("focus"+w,function(){n._inputWrapper.addClass(b)}).on("blur"+w,function(){n._inputWrapper.removeClass(b),o.val()!==n._oldText&&n._change(o.val()),n.close("date"),n.close("time")}),r.on(T,a).on(k,function(){n.toggle("date"),i.support.touch||o[0]===l()||o.focus()}),s.on(T,a).on(k,function(){n.toggle("time"),i.support.touch||o[0]===l()||o.focus()}))},readonly:function(e){this._editable({readonly:e===t?!0:e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t?!0:e)})},destroy:function(){var e=this;_.fn.destroy.call(e),e.dateView.destroy(),e.timeView.destroy(),e.element.off(w),e._dateIcon.off(w),e._timeIcon.off(w),e._inputWrapper.off(w),e._form&&e._form.off("reset",e._resetHandler)},close:function(e){"time"!==e&&(e="date"),this[e+"View"].close()},open:function(e){"time"!==e&&(e="date"),this[e+"View"].open()},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},toggle:function(e){var t="timeView";"time"!==e?e="date":t="dateView",this[e+"View"].toggle(),this[t].close()},value:function(e){var a=this;return e===t?a._value:(a._old=a._update(e),null===a._old&&a.element.val(""),a._oldText=a.element.val(),t)},_change:function(e){var t=this;e=t._update(e),+t._old!=+e&&(t._old=e,t._oldText=t.element.val(),t.trigger(g),t.element.trigger(g))},_option:function(e,a){var n=this,i=n.options,o=n.timeView,l=o.options,s=n._value||n._old;if(a===t)return i[e];if(a=r(a,i.parseFormats,i.culture)){if(i[e]=new q(+a),n.dateView[e](a),n._midnight=0===p(i.min)+p(i.max),s&&m(a,s)){if(n._midnight&&"max"==e)return l[e]=N,o.dataBind([N]),t;l[e]=a}else l.max=N,l.min=B;o.bind()}},_toggleHover:function(t){e(t.currentTarget).toggleClass(D,"mouseenter"===t.type)},_update:function(t){var a,n,o,l,s,d=this,p=d.options,f=p.min,_=p.max,v=p.dates,h=d.timeView,g=r(t,p.parseFormats,p.culture);return+g===+d._value?(s=i.toString(g,p.format,p.culture),s!==t&&d.element.val(null===g?t:s),g):(null!==g&&m(g,f)?g=c(g,f,_):u(g,f,_)||(g=null),d._value=g,h.value(g),d.dateView.value(g),g&&(o=d._old,n=h.options,v[0]&&(v=e.grep(v,function(e){return m(g,e)}),v[0]&&(h.dataBind(v),l=!0)),l||(m(g,f)&&(n.min=f,n.max=N,a=!0),m(g,_)&&(d._midnight?(h.dataBind([N]),l=!0):(n.max=_,a||(n.min=B),a=!0))),!l&&(!o&&a||o&&!m(o,g))&&(a||(n.max=N,n.min=B),h.bind())),d.element.val(g?i.toString(g,p.format,p.culture):t),d._updateARIA(g),g)},_keydown:function(e){var t=this,a=t.dateView,n=t.timeView,o=t.element.val(),r=a.popup.visible();e.altKey&&e.keyCode===i.keys.DOWN?t.toggle(r?"time":"date"):r?(a.move(e),t._updateARIA(a._current)):n.popup.visible()?n.move(e):e.keyCode===i.keys.ENTER&&o!==t._oldText&&t._change(o)},_views:function(){var e,t,a,n,l,s=this,d=s.element,c=s.options,m=d.attr("id");s.dateView=e=new i.DateView(j({},c,{id:m,anchor:s.wrapper,change:function(){var t,a=e.calendar.value(),n=+a,i=+c.min,o=+c.max;(n===i||n===o)&&(t=new q(+s._value),t.setFullYear(a.getFullYear()),t.setMonth(a.getMonth()),t.setDate(a.getDate()),u(t,i,o)&&(a=t)),s._change(a),s.close("date")},close:function(e){s.trigger(h,O)?e.preventDefault():(d.attr(W,!1),a.attr(H,!0),t.popup.visible()||d.removeAttr(S))},open:function(t){s.trigger(v,O)?t.preventDefault():(s.element.val()!==s._oldText&&(l=r(d.val(),c.parseFormats,c.culture),l?(s.dateView._current=l,s.dateView.calendar._focus(l)):s.dateView.value(l)),a.attr(H,!1),d.attr(W,!0).attr(S,e._dateViewID))}})),a=e.div,s.timeView=t=new o({id:m,value:c.value,anchor:s.wrapper,animation:c.animation,format:c.timeFormat,culture:c.culture,height:c.height,interval:c.interval,min:new q(B),max:new q(N),parseFormats:c.parseFormats,change:function(a,n){a=t._parse(a),c.min>a?(a=new q(+c.min),t.options.min=a):a>c.max&&(a=new q(+c.max),t.options.max=a),n?(s._timeSelected=!0,s._change(a)):(d.val(i.toString(a,c.format,c.culture)),e.value(a),s._updateARIA(a))},close:function(t){s.trigger(h,P)?t.preventDefault():(n.attr(H,!0),d.attr(W,!1),e.popup.visible()||d.removeAttr(S))},open:function(e){t._adjustListWidth(),s.trigger(v,P)?e.preventDefault():(n.attr(H,!1),d.attr(W,!0).attr(S,t._timeViewID))},active:function(e){d.removeAttr(R),e&&d.attr(R,t._optionID)}}),n=t.ul},_icons:function(){var t,a=this,n=a.element;t=n.next("span.k-select"),t[0]||(t=e('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-calendar">select</span><span unselectable="on" class="k-icon k-i-clock">select</span></span>').insertAfter(n)),t=t.children(),a._dateIcon=t.eq(0).attr({role:"button","aria-controls":a.dateView._dateViewID}),a._timeIcon=t.eq(1).attr({role:"button","aria-controls":a.timeView._timeViewID})},_wrapper:function(){var t,a=this,n=a.element;t=n.parents(".k-datetimepicker"),t[0]||(t=n.wrap(F).parent().addClass("k-picker-wrap k-state-default"),t=t.wrap(F).parent()),t[0].style.cssText=n[0].style.cssText,n.css({width:"100%",height:n[0].style.height}),a.wrapper=t.addClass("k-widget k-datetimepicker k-header").addClass(n[0].className),a._inputWrapper=e(t[0].firstChild)},_reset:function(){var e=this,t=e.element,a=t.closest("form");a[0]&&(e._resetHandler=function(){e.value(t[0].defaultValue)},e._form=a.on("reset",e._resetHandler))},_template:function(){this._ariaTemplate=i.template(this.options.ARIATemplate)},_updateARIA:function(e){this.element.attr("aria-label",this._ariaTemplate({current:e}))}});f.plugin(L)})(window.kendo.jQuery)});