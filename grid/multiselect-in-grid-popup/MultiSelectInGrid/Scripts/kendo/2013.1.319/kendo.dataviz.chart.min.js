/*
* Kendo UI Complete v2013.1.319 (http://kendoui.com)
* Copyright 2013 Telerik AD. All rights reserved.
*
* Kendo UI Complete commercial licenses may be obtained at
* https://www.kendoui.com/purchase/license-agreement/kendo-ui-complete-commercial.aspx
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
("function"==typeof define&&define.amd?define:function(e,t){return t()})(["./kendo.data.min","./kendo.userevents.min","./kendo.dataviz-core.min","./kendo.dataviz-svg.min"],function(){(function(e,t){function n(e,t,n){function i(e,t,i){var o,r=typeof t;return o=r===Ni?It[t](e):"function"===r?t(e,i,n):It.max(e)}function o(e,t,n){var o,r,a,s=C(n.type),l=s.length,c=e.length,h=[],u=[];for(o=0;l>o;o++){for(a=s[o],r=0;c>r;r++)u.push(e[r][a]);h.push(i(u,t[a],n)),u=[]}return h}var r,a=t.aggregate;return r="object"==typeof a?o(e,a,t):i(e,a,t)}function i(e){return r(e).min}function o(e){return r(e).max}function r(e){var n,i,o=gi,r=fi,a=e.length;for(n=0;a>n;n++)i=e[n],null!==i&&isFinite(i)&&(o=Rt.min(o,i),r=Rt.max(r,i));return{min:o===gi?t:o,max:r===fi?t:r}}function a(e,t,n,i){var o,r,a=(i.x-n.x)*(e.y-n.y)-(i.y-n.y)*(e.x-n.x),s=(i.y-n.y)*(t.x-e.x)-(i.x-n.x)*(t.y-e.y);return 0!==s&&(r=a/s,o=new tn(e.x+r*(t.x-e.x),e.y+r*(t.y-e.y))),o}function s(e,t){var n,i,o=e.series,r=o.length,a=e.seriesDefaults,s=Wt({},e.seriesDefaults),c=t?Wt({},t.seriesDefaults):{},h=Wt({},c);for(l(s),l(h),n=0;r>n;n++)i=o[n].type||e.seriesDefaults.type,o[n]=Wt({},h,c[i],{tooltip:e.tooltip},s,a[i],o[n])}function l(e){delete e.bar,delete e.column,delete e.line,delete e.verticalLine,delete e.pie,delete e.donut,delete e.area,delete e.verticalArea,delete e.scatter,delete e.scatterLine,delete e.bubble,delete e.candlestick,delete e.ohlc,delete e.bullet,delete e.verticalBullet}function c(e){var t,n=e.series,i=n.length,o=e.seriesColors||[];for(t=0;i>t;t++)n[t].color=n[t].color||o[t%o.length]}function h(e){var t;Dt([Ln,io,co,ho],function(){t=this+"Axes",e[t]&&(e[this+"Axis"]=e[t],delete e[t])})}function u(t,n){var i=(n||{}).axisDefaults||{};Dt([Ln,io,co,ho],function(){var n=this+"Axis",o=[].concat(t[n]),r=t.axisDefaults||{};o=e.map(o,function(e){var t=(e||{}).color,o=Wt({},i,i[n],r,r[n],{line:{color:t},labels:{color:t},title:{color:t}},e);return delete o[n],o}),t[n]=o.length>1?o:o[0]})}function p(e,t,n){e[t]=(e[t]||0)+n}function d(e){var t,n=e.length,i=0;for(t=0;n>t;t++)i=Rt.max(i,e[t].data.length);return i}function g(e){return e*e}function f(e,t){if(null===t)return t;var n=jt(e,!0);return n(t)}function x(e){var t,n,i;if(e instanceof Date)t=e;else if(typeof e===Ni)n=Xn.exec(e),t=new Date(n?parseInt(n[1],10):e);else if(e)if(e.length)for(t=[],i=0;e.length>i;i++)t.push(x(e[i]));else t=new Date(e);return t}function v(e){return Bt(e)?Et(e,v):e?x(e).getTime():t}function m(e,t,n,i){var o=e;return e&&(e=x(e),n===uo?o=new Date(e.getFullYear()+t,0,1):n===vi?o=new Date(e.getFullYear(),e.getMonth()+t,1):n===so?o=m(y(e,i),7*t,Gn):n===Gn?o=new Date(e.getFullYear(),e.getMonth(),e.getDate()+t):n===ai?(o=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours()+t),t>0&&R(e,o)&&(o=m(e,t+1,n,i))):n===xi&&(o=new Date(e.getTime()+t*Fi),o.setSeconds(0))),o}function y(e,t){var n=e.getDay(),i=0;for(t=t||0;n!==t;)0===n?n=6:n--,i++;return _(e,-i*ji)}function w(e,t,n){return e=x(e),m(e,0,t,n)}function b(e,t,n){return e=x(e),e&&w(e,t,n).getTime()===e.getTime()?e:m(e,1,t,n)}function A(e,t){var n=e.getTime()-t,i=e.getTimezoneOffset()-t.getTimezoneOffset();return n-i*Fi}function _(e,t){var n=e.getTimezoneOffset(),i=new Date(e.getTime()+t),o=i.getTimezoneOffset()-n;return new Date(i.getTime()+o*Fi)}function k(e,t,n){var i;return i=n===uo?t.getFullYear()-e.getFullYear():n===vi?12*k(e,t,uo)+t.getMonth()-e.getMonth():n===Gn?Rt.floor(A(t,e)/ji):Rt.floor((t-e)/qi[n])}function C(e){var t=[io];return gn(e,[Rn,Ci])?t=["open","high","low","close"]:gn(e,[En,ro])?t=["current","target"]:gn(e,yo)&&(t=[co,ho],e===Bn&&t.push("size")),t}function P(e,t,n){var i,o,r,a,s=e.data[t],l={},c=C(e.type),h={value:s};return un(s)?Bt(s)?(i=s.slice(c.length),a=S(s,c),l=S(i,n)):"object"==typeof s&&(o=I(e,c),r=I(e,n),a=T(s,c,o),l=T(s,n,r)):a=T({},c),un(a)&&(1===c.length&&(a=a[c[0]]),h.value=a),h.fields=l,h}function S(e,t){var n,i,o={};if(t)for(i=Rt.min(t.length,e.length),n=0;i>n;n++)o[t[n]]=e[n];return o}function T(e,t,n){var i,o,r,a,s={};if(t)for(o=t.length,n=n||t,i=0;o>i;i++)r=t[i],a=n[i],s[r]=f(a,e);return s}function I(e,t){var n,i,o,r,a;if(t)for(i=t.length,r=[],n=0;i>n;n++)o=t[n],a=o===io?"field":o+"Field",r.push(e[a]||o);return r}function V(e){return 1===e.length?e[0]:e}function D(e,t,n){return Rt.max(Rt.min(e,n),t)}function B(e){var t,n,i,o=e.length;if(o>0)for(n=0;o>n;n++)i=e[n].box,t?t.wrap(i):t=i.clone();return t||Jt()}function E(e,t){return e&&t?e.toLowerCase()===t.toLowerCase():e===t}function R(e,t){return e&&t?v(e)===v(t):e===t}function L(e){for(var t,n=e.length;n--;)if(t=e[n],un(t)&&null!==t)return t}function z(e,t){null!==t&&e.push(t)}function O(e,t){for(var n,i,o=0,r=e.length-1;r>=o;)if(n=Rt.floor((o+r)/2),i=e[n],t>i)o=n+1;else{if(!(i>t))return n;r=n-1}return t>=e[n]?n:n-1}function H(e){var t,n,i=!0,o=e.length;for(t=0;o>t;t++)if(n=e[t],"number"!=typeof n||isNaN(n)){i=!1;break}return i}function U(e){var t,n,i,o={};for(t=0;e.length>t;t++)n=e[t],i=n.options.name,i&&(o[i]=n.range());return o}function M(e){var t=e.originalEvent,n=0;return t.wheelDelta&&(n=-t.wheelDelta/120,n=n>0?Rt.ceil(n):Rt.floor(n)),t.detail&&(n=vn(t.detail/3)),n}var N,F,W,j,Y,X,G,q,J,K,Q,$,Z,et,tt,nt,it,ot,rt,at,st,lt,ct,ht,ut,pt,dt,gt,ft,xt,vt,mt,yt,wt,bt,At,_t,kt,Ct,Pt,St,Tt,It,Vt,Dt=e.each,Bt=e.isArray,Et=e.map,Rt=Math,Lt=e.extend,zt=e.proxy,Ot=window.kendo,Ht=Ot.Class,Ut=Ot.Observable,Mt=Ot.data.DataSource,Nt=Ot.ui.Widget,Ft=Ot.template,Wt=Ot.deepExtend,jt=Ot.getter,Yt=Ot.dataviz,Xt=Yt.Axis,Gt=Yt.AxisLabel,qt=Yt.BarAnimation,Jt=Yt.Box2D,Kt=Yt.BoxElement,Qt=Yt.ChartElement,$t=Yt.Color,Zt=Yt.ElementAnimation,en=Yt.NumericAxis,tn=Yt.Point2D,nn=Yt.RootElement,on=Yt.Ring,rn=Yt.Text,an=Yt.TextBox,sn=Yt.Title,ln=Yt.animationDecorator,cn=Yt.append,hn=Yt.autoFormat,un=Yt.defined,pn=Yt.getElement,dn=Yt.getSpacing,gn=Yt.inArray,fn=Yt.interpolateValue,xn=Yt.last,vn=Yt.round,mn=Yt.renderTemplate,yn=Yt.uniqueId,wn=".kendoChart",bn="above",An="area",_n="auto",kn="fit",Cn=Yt.AXIS_LABEL_CLICK,Pn="bar",Sn=.8,Tn="below",In="#000",Vn="both",Dn="bottom",Bn="bubble",En="bullet",Rn="candlestick",Ln="category",zn="center",On="change",Hn="circle",Un="click"+wn,Mn=Yt.CLIP,Nn="column",Fn=Yt.COORD_PRECISION,Wn="k-",jn="dataBound",Yn="date",Xn=/^\/Date\((.*?)\)\/$/,Gn="days",qn=Yt.DEFAULT_FONT,Jn=Yt.DEFAULT_HEIGHT,Kn=Yt.DEFAULT_PRECISION,Qn=Yt.DEFAULT_WIDTH,$n=Rt.PI/180,Zn="donut",ei=50,ti="drag",ni="dragEnd",ii="dragStart",oi="fadeIn",ri="glass",ai="hours",si=Yt.INITIAL_ANIMATION_DURATION,li="insideBase",ci="insideEnd",hi="interpolate",ui="left",pi="line",di=8,gi=Number.MAX_VALUE,fi=-Number.MAX_VALUE,xi="minutes",vi="months",mi="mouseleave"+wn,yi="mousemove.tracking",wi="mouseover"+wn,bi="mousemove"+wn,Ai=20,_i=150,ki="DOMMouseScroll"+wn+" mousewheel"+wn,Ci="ohlc",Pi="outsideEnd",Si="_outline",Ti="pie",Ii=70,Vi="plotAreaClick",Di="right",Bi="roundedBevel",Ei="roundedGlass",Ri="scatter",Li="scatterLine",zi="selectStart",Oi="select",Hi="selectEnd",Ui="seriesClick",Mi="seriesHover",Ni="string",Fi=6e4,Wi=60*Fi,ji=24*Wi,Yi=7*ji,Xi=31*ji,Gi=365*ji,qi={years:Gi,months:Xi,weeks:Yi,days:ji,hours:Wi,minutes:Fi},Ji="top",Ki=150,Qi=5,$i=100,Zi=100,eo="tooltip-inverse",to="touchstart"+wn,no="triangle",io="value",oo="verticalArea",ro="verticalBullet",ao="verticalLine",so="weeks",lo="#fff",co="x",ho="y",uo="years",po="zero",go=3,fo="zoomStart",xo="zoom",vo="zoomEnd",mo=[Pn,Nn,pi,ao,An,oo,Rn,Ci,En,ro],yo=[Ri,Li,Bn],wo=[xi,ai,Gn,so,vi,uo],bo={minutes:"HH:mm",hours:"HH:mm",days:"M/d",weeks:"M/d",months:"MMM 'yy",years:"yyyy"},Ao=Nt.extend({init:function(e,t){var n,i,o,r,a=this,s=Yt.ui.themes||{};Ot.destroy(e),Nt.fn.init.call(a,e),n=Wt({},a.options,t),a.element.addClass(Wn+n.name.toLowerCase()).css("position","relative"),a._originalOptions=Wt({},n),r=n.theme,o=s[r]||s[r.toLowerCase()],i=r&&o?o.chart:{},h(n),a._applyDefaults(n,i),a.options=Wt({},i,n),c(a.options),a.bind(a.events,a.options),a.wrapper=a.element,a._initDataSource(t),Ot.notify(a,Yt.ui)},_initDataSource:function(e){var t=this,n=(e||{}).dataSource;t._dataChangeHandler=zt(t._onDataChanged,t),t.dataSource=Mt.create(n).bind(On,t._dataChangeHandler),t._redraw(),t._attachEvents(),n&&t.options.autoBind&&t.dataSource.fetch()},setDataSource:function(e){var t=this;t.dataSource.unbind(On,t._dataChangeHandler),t.dataSource=e,e.bind(On,t._dataChangeHandler),t.options.autoBind&&e.fetch()},events:[jn,Ui,Mi,Cn,Vi,ii,ti,ni,fo,xo,vo,zi,Oi,Hi],items:function(){return e()},options:{name:"Chart",theme:"default",chartArea:{},legend:{visible:!0,labels:{}},categoryAxis:{},autoBind:!0,seriesDefaults:{type:Nn,data:[],highlight:{visible:!0},groupNameTemplate:"#= group.value + (kendo.dataviz.defined(series.name) ? ': ' + series.name : '') #",labels:{}},series:[],tooltip:{visible:!1},transitions:!0,valueAxis:{},plotArea:{},title:{},xAxis:{},yAxis:{}},refresh:function(){var e=this;e._applyDefaults(e.options),delete e._sourceSeries,e._onDataChanged()},redraw:function(e){var t,n,i=this;i._applyDefaults(i.options),e?(n=i._model._plotArea,t=n.findPane(e),n.redraw(t)):i._redraw()},_redraw:function(){var e,t=this,n=t._getModel(),i=Yt.ui.defaultView();t._destroyView(),t._model=n,t._plotArea=n._plotArea,i&&(e=t._view=i.fromModel(n),t._viewElement=t._renderView(e),t._tooltip=t._createTooltip(),t._highlight=new _t(e,t._viewElement),t._setupSelection())},_sharedTooltip:function(){var e=this,t=e.options;return e._plotArea instanceof dt&&t.tooltip.shared},_createTooltip:function(){var e,t=this,n=t.options,i=t.element;return e=t._sharedTooltip()?new Pt(i,t._plotArea,n.tooltip):new Ct(i,n.tooltip)},_renderView:function(){var e=this;return e._view.renderTo(e.element[0])},svg:function(){var e=this._getModel(),t=Yt.SVGView.fromModel(e);return t.render()},_applyDefaults:function(e,t){u(e,t),s(e,t)},_getModel:function(){var e,t=this,n=t.options,i=new nn(t._modelOptions());return i.parent=t,sn.buildTitle(n.title,i),e=i._plotArea=t._createPlotArea(),n.legend.visible&&i.append(new ko(e.options.legend)),i.append(e),i.reflow(),i},_modelOptions:function(){var e=this,t=e.options,n=e.element,i=Rt.floor(n.height()),o=Rt.floor(n.width());return Wt({width:o||Qn,height:i||Jn,transitions:t.transitions},t.chartArea)},_createPlotArea:function(){var e,t,n,i=this,o=i.options,r=o.series,a=r.length,s=[],l=[],c=[],h=[],u=[];for(e=0;a>e;e++)t=r[e],gn(t.type,mo)?s.push(t):gn(t.type,yo)?l.push(t):t.type===Ti?c.push(t):t.type===Zn?h.push(t):t.type===En&&u.push(t);return n=c.length>0?new xt(c,o):h.length>0?new vt(h,o):l.length>0?new ft(l,o):new dt(s,o)},_setupSelection:function(){var e,t,n,i,o,r,a=this,s=a._plotArea,l=s.axes,c=a._selections=[];for(a._selectStartHandler||(a._selectStartHandler=zt(a._selectStart,a),a._selectHandler=zt(a._select,a),a._selectEndHandler=zt(a._selectEnd,a)),t=0;l.length>t;t++)n=l[t],r=n.options,n instanceof Co&&r.select&&!r.vertical&&(i=0,o=r.categories.length-1,n instanceof So&&(i=r.categories[i],o=r.categories[o]),r.justified||(n instanceof So?o=m(o,1,r.baseUnit,r.weekStartDay):o++),e=new Vt(a,n,Wt({min:i,max:o},r.select)),e.bind(zi,a._selectStartHandler),e.bind(Oi,a._selectHandler),e.bind(Hi,a._selectEndHandler),c.push(e))},_selectStart:function(e){return this.trigger(zi,e)},_select:function(e){return this.trigger(Oi,e)},_selectEnd:function(e){return this.trigger(Hi,e)},_attachEvents:function(){var e=this,t=e.element;t.on(Un,zt(e._click,e)),t.on(wi,zt(e._mouseover,e)),t.on(ki,zt(e._mousewheel,e)),t.on(to,zt(e._tap,e)),t.on(mi,zt(e._mouseleave,e)),(e._plotArea.crosshairs.length||e._tooltip&&e._sharedTooltip())&&t.on(bi,zt(e._mousemove,e)),Ot.UserEvents&&(e._userEvents=new Ot.UserEvents(t,{global:!0,threshold:5,filter:":not(.k-selector)",multiTouch:!1,start:zt(e._start,e),move:zt(e._move,e),end:zt(e._end,e)}))},_start:function(e){var t=this,n=t._events;un(n[ii]||n[ti]||n[ni])&&t._startNavigation(e,ii)},_move:function(e){var t,n,i,o,r,a,s=this,l=s._navState,c={};if(l){for(e.preventDefault(),t=l.axes,n=0;t.length>n;n++)i=t[n],o=i.options.name,o&&(r=i.options.vertical?e.y:e.x,a=r.startLocation-r.location,0!==a&&(c[i.options.name]=i.translateRange(a)));l.axisRanges=c,s.trigger(ti,{axisRanges:c,originalEvent:e})}},_end:function(e){this._endNavigation(e,ni)},_mousewheel:function(e){var t,n,i,o,r,a,s=this,l=e.originalEvent,c=M(e),h=s._navState,u={};if(h||(t=s._startNavigation(l,fo),t||(h=s._navState)),h){for(n=h.totalDelta||c,h.totalDelta=n+c,i=s._navState.axes,o=0;i.length>o;o++)r=i[o],a=r.options.name,a&&(u[a]=r.scaleRange(n));s.trigger(xo,{delta:c,axisRanges:u,originalEvent:e}),s._mwTimeout&&clearTimeout(s._mwTimeout),s._mwTimeout=setTimeout(function(){s._endNavigation(e,vo)},_i)}},_startNavigation:function(e,t){var n,i,o,r=this,a=r._eventCoordinates(e),s=r._model._plotArea,l=s.findPointPane(a),c=s.axes.slice(0),h=!1;if(l){for(n=0;c.length>n;n++)if(i=c[n],i.box.containsPoint(a)){h=!0;break}!h&&s.backgroundBox().containsPoint(a)&&(o=r.trigger(t,{axisRanges:U(c),originalEvent:e}),o?r._userEvents.cancel():(r._suppressHover=!0,r._unsetActivePoint(),r._navState={pane:l,axes:c}))}},_endNavigation:function(e,t){var n=this;n._navState&&(n.trigger(t,{axisRanges:n._navState.axisRanges,originalEvent:e}),n._suppressHover=!1,n._navState=null)},_getChartElement:function(t){var n,i=this,o=e(t.target).data("modelId"),r=i._model;return o&&(n=r.modelMap[o]),n&&n.aliasFor&&(n=n.aliasFor(t,i._eventCoordinates(t))),n},_eventCoordinates:function(e){var t=this,n=un((e.x||{}).client),i=n?e.x.client:e.clientX,o=n?e.y.client:e.clientY;return t._toModelCoordinates(i,o)},_toModelCoordinates:function(t,n){var i=this.element,o=i.offset(),r=parseInt(i.css("paddingLeft"),10),a=parseInt(i.css("paddingTop"),10),s=e(window);return new tn(t-o.left-r+s.scrollLeft(),n-o.top-a+s.scrollTop())},_click:function(e){for(var t=this,n=t._getChartElement(e);n;)n.click&&n.click(t,e),n=n.parent},_startHover:function(e){var n,i=this,o=i._tooltip,r=i._highlight,a=i.options.tooltip;if(!i._suppressHover&&r&&!gn(e.target,r._overlays)&&!i._sharedTooltip())return n=i._getChartElement(e),n&&n.hover?(n.hover(i,e),i._activePoint=n,a=Wt({},a,n.options.tooltip),a.visible&&o.show(n),r.show(n),!0):t},_mouseover:function(t){var n=this;n._startHover(t)&&e(document).on(yi,zt(n._mouseMoveTracking,n))},_mouseMoveTracking:function(t){var n,i,o,r=this,a=r.options,s=r._tooltip,l=r._highlight,c=r._eventCoordinates(t),h=r._activePoint;r._plotArea.box.containsPoint(c)?h&&h.series&&(h.series.type===pi||h.series.type===An)&&(i=h.parent,o=i.getNearestPoint(c.x,c.y,h.seriesIx),o&&o!=h&&(o.hover(r,t),r._activePoint=o,n=Wt({},a.tooltip,h.options.tooltip),n.visible&&s.show(o),l.show(o))):(e(document).off(yi),r._unsetActivePoint())},_mousemove:function(e){var t,n=this,i=new Date,o=n._mousemove.timestamp;(!o||i-o>Ai)&&(t=n._eventCoordinates(e),n._trackCrosshairs(t),n._sharedTooltip()&&n._trackSharedTooltip(t),n._mousemove.timestamp=i)},_trackCrosshairs:function(e){var t,n,i=this._plotArea.crosshairs;for(t=0;i.length>t;t++)n=i[t],n.box.containsPoint(e)?n.showAt(e):n.hide()},_trackSharedTooltip:function(e){var t,n,i=this,o=i.options,r=i._plotArea,a=r.categoryAxis,s=i._tooltip,l=o.tooltip,c=i._highlight;t=a.getCategoryIndex(e),t!==i._tooltipCategoryIx&&(n=r.pointsByCategoryIndex(t),n.length>0?(l.visible&&s.showAt(n,e),c.show(n)):s.hide(),i._tooltipCategoryIx=t)},_mouseleave:function(){var e,t=this,n=t._plotArea,i=n.crosshairs,o=t._tooltip,r=t._highlight;for(e=0;i.length>e;e++)i[e].hide();setTimeout(zt(o.hide,o),Zi),r.hide(),t._tooltipCategoryIx=null},_unsetActivePoint:function(){var e=this,t=e._tooltip,n=e._highlight;e._activePoint=null,t&&t.hide(),n&&n.hide()},_onDataChanged:function(){var e,t,n=this,i=n.options,o=n._sourceSeries||i.series,r=o.length,a=n.dataSource.view(),s=(n.dataSource.group()||[]).length>0,l=s?(a[0]||[]).items:a,h=[];for(e=0;r>e;e++)t=o[e],n.isBindable(t)?(t.autoBind!==!1&&(t.data=a),cn(h,s?n._createGroupedSeries(t,a):[t])):h.push(t);n._sourceSeries=o,i.series=h,c(n.options),n._bindCategories(l),n.trigger(jn),n._redraw()},_bindCategories:function(e){var t,n,i=this,o=i.options,r=[].concat(o.categoryAxis);for(t=0;r.length>t;t++)n=r[t],n.autoBind!==!1&&i._bindCategoryAxis(n,e)},_bindCategoryAxis:function(e,t){var n,i,o;if(e.field)for(e.categories=[],n=0;t.length>n;n++)o=t[n],i=f(e.field,o),0===n?(e.categories=[i],e.dataItems=[o]):(e.categories.push(i),e.dataItems.push(o))},isBindable:function(e){var t,n,i=C(e.type),o=!0;for(n=0;i.length>n;n++)if(t=i[n],t===io?t="field":t+="Field",!e[t]){o=!1;break}return o},_createGroupedSeries:function(e,n){var i,o,r,a,s=[],l=n.length;for(e.groupNameTemplate&&(i=Ft(e.groupNameTemplate)),r=0;l>r;r++)a=Wt({},e),a.color=t,s.push(a),o=n[r],a.data=o.items,i&&(a.name=i({series:a,group:o}));return s},_tap:function(e){var t=this;t._startHover(e)||t._unsetActivePoint(),t._click(e)},destroy:function(){var t=this,n=t.dataSource;t.element.off(wn),n.unbind(On,t._dataChangeHandler),e(document).off(yi),t._userEvents&&t._userEvents.destroy(),t._destroyView(),Nt.fn.destroy.call(t)},_destroyView:function(){var t=this,n=Yt.IDPool.current,i=t._model,o=t._view,r=t._viewElement,a=t._selections;if(i&&i.destroy(),o&&o.destroy(),r&&e("[id]",r).each(function(){n.free(e(this).attr("id"))}),a)for(;a.length>0;)a.shift().destroy()}}),_o=Qt.extend({init:function(e,t){var n=this;Qt.fn.init.call(n,t),n.append(new an(e,n.options))},options:{position:Pi,margin:dn(3),padding:dn(4),color:In,background:"",border:{width:1,color:""},aboveAxis:!0,vertical:!1,animation:{type:oi,delay:si},zIndex:1},reflow:function(e){var t=this,n=t.options,i=n.vertical,o=n.aboveAxis,r=t.children[0],a=r.box,s=r.options.padding;r.options.align=i?zn:ui,r.options.vAlign=i?Ji:zn,n.position==ci?i?(r.options.vAlign=Ji,!o&&a.height()<e.height()&&(r.options.vAlign=Dn)):r.options.align=o?Di:ui:n.position==zn?(r.options.vAlign=zn,r.options.align=zn):n.position==li?i?r.options.vAlign=o?Dn:Ji:r.options.align=o?ui:Di:n.position==Pi&&(i?e=o?new Jt(e.x1,e.y1-a.height(),e.x2,e.y1):new Jt(e.x1,e.y2,e.x2,e.y2+a.height()):(r.options.align=zn,e=o?new Jt(e.x2+a.width(),e.y1,e.x2,e.y2):new Jt(e.x1-a.width(),e.y1,e.x1,e.y2))),i?s.left=s.right=(e.width()-r.contentBox.width())/2:s.top=s.bottom=(e.height()-r.contentBox.height())/2,r.reflow(e)}}),ko=Qt.extend({init:function(e){var t=this;Qt.fn.init.call(t,e),t.createLabels()},options:{position:Di,items:[],labels:{},offsetX:0,offsetY:0,margin:dn(10),padding:dn(5),border:{color:In,width:0},background:"",zIndex:1},createLabels:function(){var e,t,n,i=this,o=i.options.items,r=o.length;for(n=0;r>n;n++)t=o[n].name,e=new rn(t,i.options.labels),i.append(e)},reflow:function(e){var n=this,i=n.options,o=n.children.length;return 0===o?(n.box=e.clone(),t):"custom"==i.position?(n.customLayout(e),t):(i.position==Ji||i.position==Dn?n.horizontalLayout(e):n.verticalLayout(e),t)},getViewElements:function(e){var t,n,i,o,r,a,s,l=this,c=l.children,h=l.options,u=h.items,p=u.length,d=l.markerSize(),g=e.createGroup({zIndex:h.zIndex}),f=h.border||{};for(cn(g.children,Qt.fn.getViewElements.call(l,e)),s=0;p>s;s++)o=u[s].color,r=c[s],n=new Jt,a=r.box,i=i?i.wrap(a):a.clone(),n.x1=a.x1-2*d,n.x2=n.x1+d,n.y1=h.position==Ji||h.position==Dn?a.y1+d/2:a.y1+(a.height()-d)/2,n.y2=n.y1+d,g.children.push(e.createRect(n,{fill:o,stroke:o}));return c.length>0&&(t=dn(h.padding),t.left+=2*d,i.pad(t),g.children.unshift(e.createRect(i,{stroke:f.width?f.color:"",strokeWidth:f.width,dashType:f.dashType,fill:h.background}))),[g]},verticalLayout:function(e){var t,n,i,o,r,a=this,s=a.options,l=a.children,c=l.length,h=l[0].box.clone(),u=dn(s.margin),p=2*a.markerSize();for(o=1;c>o;o++)i=a.children[o],i.box.alignTo(a.children[o-1].box,Dn),h.wrap(i.box);s.position==ui?(t=e.x1+p+u.left,n=(e.y2-h.height())/2,h.x2+=p+u.left+u.right):(t=e.x2-h.width()-u.right,n=(e.y2-h.height())/2,h.translate(t,n),h.x1-=p+u.left),a.translateChildren(t+s.offsetX,n+s.offsetY),r=h.width(),h.x1=Rt.max(e.x1,h.x1),h.x2=h.x1+r,h.y1=e.y1,h.y2=e.y2,a.box=h},horizontalLayout:function(e){var t,n,i,o,r=this,a=r.options,s=r.children,l=s.length,c=s[0].box.clone(),h=3*r.markerSize(),u=dn(a.margin),p=s[0].box.width()+h,d=e.width(),g=0;for(o=1;l>o;o++)i=s[o],p+=i.box.width()+h,p>d-h?(i.box=new Jt(c.x1,c.y2,c.x1+i.box.width(),c.y2+i.box.height()),p=i.box.width()+h,g=i.box.y1):(i.box.alignTo(s[o-1].box,Di),i.box.y2=g+i.box.height(),i.box.y1=g,i.box.translate(h,0)),c.wrap(i.box);t=(e.width()-c.width()+h)/2,a.position===Ji?(n=e.y1+u.top,c.y2=e.y1+c.height()+u.top+u.bottom,c.y1=e.y1):(n=e.y2-c.height()-u.bottom,c.y1=e.y2-c.height()-u.top-u.bottom,c.y2=e.y2),r.translateChildren(t+a.offsetX,n+a.offsetY),c.x1=e.x1,c.x2=e.x2,r.box=c},customLayout:function(e){var t,n=this,i=n.options,o=n.children,r=o.length,a=o[0].box.clone(),s=2*n.markerSize();for(t=1;r>t;t++)a=n.children[t].box,a.alignTo(n.children[t-1].box,Dn),a.wrap(a);n.translateChildren(i.offsetX+s,i.offsetY),n.box=e},markerSize:function(){var e=this,t=e.children;return t.length>0?t[0].box.height()/2:0}}),Co=Xt.extend({init:function(e){var t=this;Xt.fn.init.call(t,e),e=t.options,e.categories=e.categories.slice(0)},options:{type:Ln,categories:[],vertical:!1,majorGridLines:{visible:!1,width:1,color:In},zIndex:1,justified:!1},range:function(){return{min:0,max:this.options.categories.length}},getTickPositions:function(e){var t,n=this,i=n.options,o=i.vertical,r=i.justified,a=n.lineBox(),s=o?a.height():a.width(),l=e-(r?1:0),c=s/l,h=o?ho:co,u=a[h+1],p=[];for(t=0;e>t;t++)p.push(vn(u,Fn)),u+=c;return r||p.push(a[h+2]),i.reverse?p.reverse():p},getMajorTickPositions:function(){var e=this;return e.getTickPositions(e.options.categories.length)},getMinorTickPositions:function(){var e=this;return e.getTickPositions(2*e.options.categories.length)},getSlot:function(e,t){var n,i,o,r=this,a=r.options,s=r.getMajorTickPositions(),l=a.reverse,c=a.justified,h=a.vertical?ho:co,u=r.lineBox(),p=u[h+(l?2:1)],d=u[h+(l?1:2)],g=u.clone(),f=Rt.max(1,s.length-(c?0:1));return e=un(e)?e:0,t=un(t)?t:e,e=D(e,0,f),t=D(t-1,e,f),t=Rt.max(e,t),n=0===e?p:s[e],i=c?n:s[t],o=t-e,(o>0||e===t)&&(i=s[t+1]||d),c&&(e===f?n=i:i=n),g[h+1]=l?i:n,g[h+2]=l?n:i,g},getCategoryIndex:function(e){var t,n,i,o,r=this,a=r.options,s=a.reverse,l=a.vertical,c=l?ho:co,h=r.lineBox(),u=h[c+1],p=h[c+2],d=e[c],g=r.getMajorTickPositions(),f=gi;if(u>d||d>p)return null;for(i=0;g.length>i;i++)if(t=g[i],n=g[i+1],un(n)||(n=s?u:p),s&&(t=n,n=g[i]),a.justified){if(d===n){o=Rt.max(0,l?g.length-i-1:i+1);break}f>Rt.abs(d-t)&&(f=d-t,o=i)}else if(d>=t&&n>=d){o=i;break}return o},getCategory:function(e){var t=this.getCategoryIndex(e);return null===t?null:this.options.categories[t]},translateRange:function(e){var t=this,n=t.options,i=t.lineBox(),o=n.vertical?i.height():i.width(),r=n.categories.length,a=o/r,s=vn(e/a,Kn);return{min:s,max:r+s}},scaleRange:function(e){var t=this,n=t.options,i=n.categories.length,o=e*i;return{min:-o,max:i+o}},labelsCount:function(){return this.options.categories.length},createAxisLabel:function(e,t){var n=this,i=n.options,o=i.dataItems?i.dataItems[e]:null,r=un(i.categories[e])?i.categories[e]:"";return new Gt(r,e,o,t)}}),Po=Gt.extend({formatValue:function(e,t){return Ot.toString(e,t.format,t.culture)}}),So=Co.extend({init:function(e){var t,n,i=this;e=e||{},e=Wt({roundToBaseUnit:!0},e,{min:x(e.min),max:x(e.max)}),e.categories&&e.categories.length>0&&(t=(e.baseUnit||"").toLowerCase(),n=t!==kn&&!gn(t,wo),n&&(e.baseUnit=i.defaultBaseUnit(e)),(t===kn||e.baseUnitStep===_n)&&i.autoBaseUnit(e),i.groupCategories(e)),Co.fn.init.call(i,e)},options:{type:Yn,labels:{dateFormats:bo},autoBaseUnitSteps:{minutes:[1,2,5,15,30],hours:[1,2,3],days:[1,2,3],weeks:[1,2],months:[1,2,3,6],years:[1,2,3,5,10,25,50]},maxDateGroups:10},translateRange:function(e){var t=this,n=Co.fn.translateRange.call(t,e),i=t.options,o=i.baseUnit,r=Rt.round(n.min),a=i.weekStartDay;return{min:m(i.min,r,o,a),max:m(i.max,r,o,a)}},scaleRange:function(e){for(var t,n,i=this,o=i.options,r=Rt.abs(e),a=o.min,s=o.max;r--;)t=A(a,s),n=Rt.round(.1*t),0>e?(a=_(a,n),s=_(s,-n)):(a=_(a,-n),s=_(s,n));return{min:a,max:s}},defaultBaseUnit:function(e){var t,n,i,o,r,a=e.categories,s=un(a)?a.length:0,l=gi;for(t=0;s>t;t++)n=x(a[t]),n&&o&&(i=A(n,o),i>0&&(l=Rt.min(l,i),r=l>=Gi?uo:l>=Xi-3*ji?vi:l>=Yi?so:l>=ji?Gn:l>=Wi?ai:xi)),o=n;return r||Gn},range:function(e){e=e||this.options;var t=x(e.categories),n=e.baseUnit===kn,i=n?wo[0]:e.baseUnit,o=v(e.min),a=v(e.max),s=r(t),l=v(s.min),c=v(s.max);return e.roundToBaseUnit?{min:m(o||l,0,i,e.weekStartDay),max:m(a||c,1,i,e.weekStartDay)}:{min:x(o||l),max:x(a||c)}},autoBaseUnit:function(e){for(var t,n,i,o=this,r=o.range(e),a=e.baseUnit===kn,s=0,l=a?wo[s++]:e.baseUnit,c=r.max-r.min,h=c/qi[l],u=h,p=e.maxDateGroups||o.options.maxDateGroups,d=Wt({},o.options.autoBaseUnitSteps,e.autoBaseUnitSteps);h>p;)if(t=t||d[l].slice(0),i=t.shift())n=i,h=u/n;else{if(!a){h>p&&(n=Rt.ceil(u/p));break}l=wo[s++]||xn(wo),u=c/qi[l],t=null}e.baseUnitStep=n,e.baseUnit=l},getMajorTickPositions:function(){var e,t,n,i,o,r,a,s,l,c,h,u,p,d,g,f,x,v=this,m=v.options,y=m.categories,w=[];if(m.roundToBaseUnit||0===y.length)w=Co.fn.getMajorTickPositions.call(v);else{for(n=m.vertical,i=m.reverse,o=v.lineBox(),r=n?o.height():o.width(),a=y[0].getTime(),s=v.range(v.options),l=s.max-s.min,c=r/l,h=y.length,u=(n?-1:1)*(i?-1:1),p=1===u?1:2,d=1===u?2:1,g=o[(n?ho:co)+p],f=o[(n?ho:co)+d],x=g,e=0;h>e;e++)t=y[e]-a,x=g+t*c*u,w.push(vn(x,Fn));xn(w)!==f&&w.push(f)}return w},groupCategories:function(e){var t,n,i,o,r,a,s=this,l=x(e.categories),c=e.baseUnit,h=e.baseUnitStep||1,u=s.range(e),p=e.roundToBaseUnit,d=[],g=s.categoryMap=[],f=[];for(t=p?m(u.max,h-1,c,e.weekStartDay):u.max,R(u.min,u.max)&&(t=x(v(t)+1)),n=u.min;t>n;n=i){for(i=m(n,h,c,e.weekStartDay),d.push(n),o=[],r=O(l,n);l.length>r;r++)if(a=l[r],a&&a>=n)if(i>a)e.justified&&R(a,t)?f.push(r):o.push(r);else{if(p||!R(i,t))break;f.push(r)}g.push(o)}f.length&&(d.push(t),g.push(f)),e.max||0!==(xn(g)||[]).length||(g.pop(),d.pop()),e.min=d[0],e.max=p?xn(d):t,e.categories=d},createAxisLabel:function(e,t){var n,i=this.options,o=i.dataItems?i.dataItems[e]:null,r=i.categories[e],a=i.baseUnit,s=!0,l=t.dateFormats[a];return i.justified&&(n=w(r,a,i.weekStartDay),s=R(n,r)),t=Wt({format:l},t,{visible:s}),new Po(r,e,o,t)}}),To=Xt.extend({init:function(e,t,n){var i=this;n=n||{},Wt(n,{min:x(n.min),max:x(n.max),axisCrossingValue:x(n.axisCrossingValues||n.axisCrossingValue)}),n=i.applyDefaults(x(e),x(t),n),Xt.fn.init.call(i,n)},options:{type:Yn,labels:{dateFormats:bo}},applyDefaults:function(e,n,i){var o=this,r=i.min||e,a=i.max||n,s=i.baseUnit||o.timeUnits(a-r),l=qi[s],c=w(v(r)-1,s)||x(a),h=b(v(a)+1,s),u=i.majorUnit?i.majorUnit:t,p=u||Yt.ceil(Yt.autoMajorUnit(c.getTime(),h.getTime()),l)/l,d=k(c,h,s),g=Yt.ceil(d,p),f=g-d,y=Rt.floor(f/2),A=f-y;return i.baseUnit||delete i.baseUnit,Wt({baseUnit:s,min:m(c,-y,s),max:m(h,A,s),minorUnit:p/5},i,{majorUnit:p})},range:function(){var e=this.options;return{min:e.min,max:e.max}},getDivisions:function(e){var t=this.options;return Rt.floor(k(t.min,t.max,t.baseUnit)/e+1)},getTickPositions:function(e){var t,n=this,i=n.options,o=i.vertical,r=i.reverse,a=n.lineBox(),s=o?a.height():a.width(),l=k(i.min,i.max,i.baseUnit),c=s/l,h=e*c,u=n.getDivisions(e),p=(o?-1:1)*(r?-1:1),d=1===p?1:2,g=a[(o?ho:co)+d],f=[];for(t=0;u>t;t++)f.push(vn(g,Fn)),g+=h*p;return f},getMajorTickPositions:function(){var e=this;return e.getTickPositions(e.options.majorUnit)},getMinorTickPositions:function(){var e=this;return e.getTickPositions(e.options.minorUnit)},getSlot:function(e,t){return en.fn.getSlot.call(this,x(e),x(t))},getValue:function(e){var t=en.fn.getValue.call(this,e);return null!==t?x(t):null},labelsCount:function(){return this.getDivisions(this.options.majorUnit)},createAxisLabel:function(e,t){var n=this.options,i=e*n.majorUnit,o=m(n.min,i,n.baseUnit),r=t.dateFormats[n.baseUnit];return t.format=t.format||r,new Po(o,e,null,t)},timeUnits:function(e){var t=ai;return e>=Gi?t=uo:e>=Xi?t=vi:e>=Yi?t=so:e>=ji&&(t=Gn),t},translateRange:function(e){var t=this,n=t.options,i=n.baseUnit,o=n.weekStartDay,r=t.lineBox(),a=n.vertical?r.height():r.width(),s=t.range(),l=a/(s.max-s.min),c=vn(e/l,Kn),h=_(n.min,c),u=_(n.max,c);return{min:m(h,0,i,o),max:m(u,0,i,o)}},scaleRange:function(e){for(var t,n,i=this,o=i.options,r=o.baseUnit,a=o.weekStartDay,s=Rt.abs(e),l=o.min,c=o.max;s--;)t=A(l,c),n=Rt.round(.1*t),0>e?(l=_(l,n),c=_(c,-n)):(l=_(l,-n),c=_(c,n)),l=m(l,0,r,a),c=m(c,1,r,a);return{min:l,max:c}}}),Io=Qt.extend({init:function(e){var t=this;Qt.fn.init.call(t,e)},options:{vertical:!1,gap:0,spacing:0},reflow:function(e){var t,n,i=this,o=i.options,r=o.vertical,a=r?ho:co,s=i.children,l=o.gap,c=o.spacing,h=s.length,u=h+l+c*(h-1),p=(r?e.height():e.width())/u,d=e[a+1]+p*(l/2);for(n=0;h>n;n++)t=(s[n].box||e).clone(),t[a+1]=d,t[a+2]=d+p,s[n].reflow(t),h-1>n&&(d+=p*c),d+=p}}),Vo=Qt.extend({init:function(e){var t=this;Qt.fn.init.call(t,e)},options:{vertical:!0,isReversed:!1},reflow:function(e){var t,n,i,o,r=this,a=r.options,s=a.vertical,l=s?co:ho,c=s?ho:co,h=e[c+2],u=r.children,p=r.box=new Jt,d=u.length;for(t=a.isReversed?s?Dn:ui:s?Ji:Di,n=0;d>n;n++)i=u[n],o=i.box.clone(),o.snapTo(e,l),i.options&&(i.options.stackBase=h),0===n?p=r.box=o.clone():o.alignTo(u[n-1].box,t),i.reflow(o),p.wrap(o)}}),Do={click:function(t,n){var i=this;t.trigger(Ui,{value:i.value,category:i.category,series:i.series,dataItem:i.dataItem,element:e(n.target)})},hover:function(t,n){var i=this;t.trigger(Mi,{value:i.value,category:i.category,series:i.series,dataItem:i.dataItem,element:e(n.target)})}},Bo=Qt.extend({init:function(e,t){var n=this;Qt.fn.init.call(n,t),n.value=e,0>e&&t.negativeColor&&(n.options.color=t.negativeColor),n.options.id=yn(),n.enableDiscovery()},options:{color:lo,border:{width:1},vertical:!0,overlay:{gradient:ri},aboveAxis:!0,labels:{visible:!1},animation:{type:Pn},opacity:1},render:function(){var e,t=this,n=t.value,i=t.options,o=i.labels,r=n;t._rendered||(t._rendered=!0,o.visible&&n&&(o.template?(e=Ft(o.template),r=e({dataItem:t.dataItem,category:t.category,value:t.value,series:t.series})):o.format&&(r=hn(o.format,r)),t.append(new _o(r,Wt({vertical:i.vertical,id:yn()},i.labels)))))},reflow:function(e){this.render();var t=this,n=t.options,i=t.children,o=i[0];t.box=e,o&&(o.options.aboveAxis=n.aboveAxis,o.reflow(e))},getViewElements:function(e){var t=this,n=t.options,i=n.vertical,o=n.border.width>0?{stroke:t.getBorderColor(),strokeWidth:n.border.width,strokeOpacity:n.border.opacity,dashType:n.border.dashType}:{},r=t.box,a=Wt({id:n.id,fill:n.color,fillOpacity:n.opacity,strokeOpacity:n.opacity,vertical:n.vertical,aboveAxis:n.aboveAxis,stackBase:n.stackBase,animation:n.animation,data:{modelId:n.modelId}},o),s=[];return r.width()>0&&r.height()>0&&(n.overlay&&(a.overlay=Wt({rotation:i?0:90},n.overlay)),s.push(e.createRect(r,a))),cn(s,Qt.fn.getViewElements.call(t,e)),s},highlightOverlay:function(e,t){var n=this,i=n.box;return t=Wt({data:{modelId:n.options.modelId}},t),t.id=null,e.createRect(i,t)},getBorderColor:function(){var e=this,t=e.options,n=t.color,i=t.border,o=i.color,r=i._brightness||Sn;return un(o)||(o=new $t(n).brightness(r).toHex()),o},tooltipAnchor:function(e,t){var n,i,o=this,r=o.options,a=o.box,s=r.vertical,l=r.aboveAxis;return s?(n=a.x2+Qi,i=l?a.y1:a.y2-t):r.isStacked?(n=l?a.x2-e:a.x1,i=a.y1-t-Qi):(n=l?a.x2+Qi:a.x1-e-Qi,i=a.y1),new tn(n,i)},formatValue:function(e){var t=this;return t.owner.formatPointValue(t,e)}});Wt(Bo.fn,Do),N=Qt.extend({init:function(e,t){var n=this;Qt.fn.init.call(n,t),n.plotArea=e,n.categoryAxis=e.seriesCategoryAxis(t.series[0]),n.valueAxisRanges={},n.points=[],n.categoryPoints=[],n.seriesPoints=[],n.render()},options:{series:[],invertAxes:!1,isStacked:!1},render:function(){var e=this;e.traverseDataPoints(zt(e.addValue,e))},addValue:function(e,t,n,i,o){var r,a=this,s=e.value,l=a.categoryPoints[n],c=a.seriesPoints[o];l||(a.categoryPoints[n]=l=[]),c||(a.seriesPoints[o]=c=[]),a.updateRange(s,n,i),r=a.createPoint(e,t,n,i,o),r&&(r.category=t,r.series=i,r.seriesIx=o,r.owner=a,r.dataItem=i.data[n]),a.points.push(r),c.push(r),l.push(r)},updateRange:function(e,t,n){var i=this,o=n.axis,r=i.valueAxisRanges[o];un(e)&&!isNaN(e)&&(r=i.valueAxisRanges[o]=r||{min:gi,max:fi},r.min=Rt.min(r.min,e),r.max=Rt.max(r.max,e))
},seriesValueAxis:function(e){var t=this.plotArea,n=e.axis,i=n?t.namedValueAxes[n]:t.valueAxis;if(!i)throw Error("Unable to locate value axis with name "+n);return i},reflow:function(e){var t,n,i,o=this,r=o.options,a=r.invertAxes,s=0,l=o.categorySlots=[],c=o.points,h=o.categoryAxis;o.traverseDataPoints(function(e,r,u,p){var d,g,f,x,v,m,y=o.pointValue(e);t=o.seriesValueAxis(p),n=o.categoryAxisCrossingValue(t),i=c[s++],i&&i.plotValue&&(y=i.plotValue),d=o.categorySlot(h,u,t),g=o.valueSlot(t,y,n),f=a?g:d,x=a?d:g,v=new Jt(f.x1,x.y1,f.x2,x.y2),m=t.options.reverse?n>y:y>=n,i&&(i.options.aboveAxis=m,i.reflow(v)),l[u]||(l[u]=d)}),o.reflowCategories(l),o.box=e},categoryAxisCrossingValue:function(e){var t=this.categoryAxis,n=e.options,i=[].concat(n.axisCrossingValues||n.axisCrossingValue);return i[t.axisIndex||0]||0},reflowCategories:function(){},valueSlot:function(e,t,n){return e.getSlot(t,n)},categorySlot:function(e,t){return e.getSlot(t)},traverseDataPoints:function(e){var t,n,i,o,r,a=this,s=a.options,l=s.series,c=a.categoryAxis.options.categories||[],h=d(l),u=a.bindableFields(),p=l.length;for(t=0;h>t;t++)for(n=0;p>n;n++)o=c[t],r=l[n],i=P(r,t,u),e(i,o,t,r,n)},bindableFields:function(){return[]},formatPointValue:function(e,t){return hn(t,e.value)},pointValue:function(e){return e.value}}),F=N.extend({init:function(e,t){var n=this;n._groupTotals={},n._groups=[],N.fn.init.call(n,e,t)},render:function(){var e=this;N.fn.render.apply(e),e.computeAxisRanges()},createPoint:function(e,n,i,o){var r,a,s,l,c,h=this,u=e.value,p=h.options,d=h.children,g=h.options.isStacked,f=Wt({},o.labels);return g&&f.position==Pi&&(f.position=ci),r=new Bo(u,Wt({},{vertical:!p.invertAxes,overlay:o.overlay,labels:f,isStacked:g},o,{color:e.fields.color||t})),a=d[i],a||(a=new Io({vertical:p.invertAxes,gap:p.gap,spacing:p.spacing}),h.append(a)),g?(c=h.getStackWrap(o,a),0===c.children.length?(s=new Vo({vertical:!p.invertAxes}),l=new Vo({vertical:!p.invertAxes,isReversed:!0}),c.append(s,l)):(s=c.children[0],l=c.children[1]),u>0?s.append(r):l.append(r)):a.append(r),r},getStackWrap:function(e,t){var n,i,o=t.children,r=e.stack,a=o.length;if(typeof r===Ni){for(i=0;a>i;i++)if(o[i]._stackGroup===r){n=o[i];break}}else n=o[0];return n||(n=new Qt,n._stackGroup=r,t.append(n)),n},updateRange:function(e,t,n){var i=this,o=i.options.isStacked,r=i.groupTotals(n.stack),a=r.positive,s=r.negative;un(e)&&(o?p(e>0?a:s,t,e):N.fn.updateRange.apply(i,arguments))},computeAxisRanges:function(){var e,t,n=this,r=n.options.isStacked;r&&(e=n.options.series[0].axis,t=n.categoryTotals(),n.valueAxisRanges[e]={min:i(t.negative.concat(0)),max:o(t.positive.concat(0))})},seriesValueAxis:function(e){var t=this,n=t.options;return N.fn.seriesValueAxis.call(t,n.isStacked?t.options.series[0]:e)},valueSlot:function(e,t,n){return e.getSlot(t,this.options.isStacked?0:n)},categorySlot:function(e,t,n){var i,o,r=this,a=r.options,s=e.getSlot(t);return a.isStacked&&(o=n.getSlot(0,0),i=a.invertAxes?co:ho,s[i+1]=s[i+2]=o[i+1]),s},reflow:function(e){var t=this;t.setStacksDirection(),N.fn.reflow.call(t,e)},setStacksDirection:function(){var e,t,n,i,o,r,a,s,l,c=this,h=c.options,u=h.series,p=d(u),g=c.children,f=u.length;for(t=0;f>t;t++)for(n=u[t],i=c.seriesValueAxis(n),e=0;p>e;e++)o=g[e],r=c.getStackWrap(n,o),a=r.children,s=a[0],l=a[1],s&&l&&(s.options.isReversed=i.options.reverse,l.options.isReversed=!i.options.reverse)},reflowCategories:function(e){var t,n=this,i=n.children,o=i.length;for(t=0;o>t;t++)i[t].reflow(e[t])},groupTotals:function(e){var t=this,n=typeof e===Ni?e:"default",i=t._groupTotals[n];return i||(i=t._groupTotals[n]={positive:[],negative:[]},t._groups.push(n)),i},categoryTotals:function(){var e,t,n,i=this,o=i._groups,r=i._groupTotals,a={positive:[],negative:[]},s=o.length;for(n=0;s>n;n++)e=o[n],t=r[e],cn(a.positive,t.positive),cn(a.negative,t.negative);return a},bindableFields:function(){return["color"]}}),W=N.extend({init:function(e,t){var n=this;n.wrapData(t),N.fn.init.call(n,e,t)},wrapData:function(e){var t,n,i,o=e.series;for(t=0;o.length>t;t++)i=o[t],n=i.data,n&&!Bt(n[0])&&"object"!=typeof n[0]&&(i.data=[n])},addValue:function(e,t,n,i,o){var r,a=this,s=a.categoryPoints[n],l=a.seriesPoints[o];s||(a.categoryPoints[n]=s=[]),l||(a.seriesPoints[o]=l=[]),a.updateRange(e.value,n,i),r=a.createPoint(e.value,n,i),r&&(r.category=t,r.series=i,r.seriesIx=o,r.owner=a,r.dataItem=i.data[n]),a.points.push(r),l.push(r),s.push(r)},reflowCategories:function(e){var t,n=this,i=n.children,o=i.length;for(t=0;o>t;t++)i[t].reflow(e[t])},createPoint:function(e,t,n){var i,o,r=this,a=r.options,s=r.children;return i=new j(e,Wt({},{vertical:!a.invertAxes,overlay:n.overlay,categoryIx:t,invertAxes:a.invertAxes},n)),o=s[t],o||(o=new Io({vertical:a.invertAxes,gap:a.gap,spacing:a.spacing}),r.append(o)),o.append(i),i},updateRange:function(e,t,n){var i=this,o=n.axis,r=e.current,a=e.target,s=i.valueAxisRanges[o];un(r)&&!isNaN(r)&&un(a&&!isNaN(a))&&(s=i.valueAxisRanges[o]=s||{min:gi,max:fi},s.min=Rt.min.apply(Rt,[s.min,r,a]),s.max=Rt.max.apply(Rt,[s.max,r,a]))},formatPointValue:function(e,t){return hn(t,e.value.current,e.value.target)},pointValue:function(e){return e.value.current}}),j=Qt.extend({init:function(e,t){var n=this;Qt.fn.init.call(n,t),n.value=e,n.options.id=yn(),n.enableDiscovery(),n.render()},options:{color:lo,border:{width:1},vertical:!1,animation:{type:Pn},opacity:1,target:{shape:"",border:{width:0,color:"green"},line:{width:2}},tooltip:{format:"Current: {0}</br>Target: {1}"}},render:function(){var e=this,t=e.options;e.target=new X({id:e.options.id,type:t.target.shape,background:t.target.color||t.color,opacity:t.opacity,zIndex:t.zIndex,border:t.target.border,vAlign:Ji,align:Di}),e.append(e.target)},reflow:function(e){var t=this,n=t.options,i=t.owner,o=t.target,r=n.invertAxes,a=i.seriesValueAxis(t.options),s=i.categoryAxisCrossingValue(a),l=i.categorySlot(i.categoryAxis,n.categoryIx,a),c=i.valueSlot(a,t.value.target,s),h=r?c:l,u=r?l:c,p=new Jt(h.x1,u.y1,h.x2,u.y2);o.options.height=r?p.height():n.target.line.width,o.options.width=r?n.target.line.width:p.width(),o.reflow(p),t.box=e},getViewElements:function(e){var t=this,n=t.options,i=n.vertical,o=n.border.width>0?{stroke:n.border.color||n.color,strokeWidth:n.border.width,dashType:n.border.dashType}:{},r=t.box,a=Wt({id:n.id,fill:n.color,fillOpacity:n.opacity,strokeOpacity:n.opacity,vertical:n.vertical,aboveAxis:n.aboveAxis,animation:n.animation,data:{modelId:n.modelId}},o),s=[];return r.width()>0&&r.height()>0&&(n.overlay&&(a.overlay=Wt({rotation:i?0:90},n.overlay)),s.push(e.createRect(r,a))),cn(s,Qt.fn.getViewElements.call(t,e)),s},tooltipAnchor:function(e,t){var n,i,o=this,r=o.options,a=o.box,s=r.vertical,l=r.aboveAxis;return s?(n=a.x2+Qi,i=l?a.y1:a.y2-t):r.isStacked?(n=l?a.x2-e:a.x1,i=a.y1-t-Qi):(n=l?a.x2+Qi:a.x1-e-Qi,i=a.y1),new tn(n,i)},highlightOverlay:function(e,t){var n=this,i=n.box;return t=Wt({data:{modelId:n.options.modelId}},t),t.id=null,e.createRect(i,t)},formatValue:function(e){var t=this;return t.owner.formatPointValue(t,e)}}),Wt(j.fn,Do),Y=Kt.extend({options:{type:Hn,align:zn,vAlign:zn},getViewElements:function(e,t){var n,i,o=this,r=o.options,a=r.type,s=o.paddingBox,l=s.width()/2;return r.visible&&o.hasBox()?(i=Wt(o.elementStyle(),t),n=a===no?e.createPolyline([new tn(s.x1+l,s.y1),new tn(s.x1,s.y2),new tn(s.x2,s.y2)],!0,i):a===Hn?e.createCircle(new tn(vn(s.x1+l,Fn),vn(s.y1+s.height()/2,Fn)),l,i):e.createRect(s,i),[n]):[]}}),X=Y.extend(),Wt(X.fn,Do),G=Qt.extend({init:function(e,t){var n=this;Qt.fn.init.call(n,t),n.value=e,n.options.id=yn(),n.enableDiscovery()},options:{aboveAxis:!0,vertical:!0,markers:{visible:!0,background:lo,size:di,type:Hn,border:{width:2},opacity:1},labels:{visible:!1,position:bn,margin:dn(3),padding:dn(4),animation:{type:oi,delay:si}}},render:function(){var e,t=this,n=t.options,i=n.markers,o=n.labels,r=i.background,a=Wt({},i.border),s=t.value;t._rendered||(t._rendered=!0,un(a.color)||(a.color=new $t(r).brightness(Sn).toHex()),t.marker=new Y({id:t.options.id,visible:i.visible&&i.size,type:i.type,width:i.size,height:i.size,background:r,border:a,opacity:i.opacity,zIndex:i.zIndex,animation:i.animation}),t.append(t.marker),o.visible&&(o.template?(e=Ft(o.template),s=e({dataItem:t.dataItem,category:t.category,value:t.value,series:t.series})):o.format&&(s=t.formatValue(o.format)),t.label=new an(s,Wt({id:yn(),align:zn,vAlign:zn,margin:{left:5,right:5}},o)),t.append(t.label)))},markerBox:function(){return this.marker.box},reflow:function(e){var t,n=this,i=n.options,o=i.vertical,r=i.aboveAxis;n.render(),n.box=e,t=e.clone(),o?r?t.y1-=t.height():t.y2+=t.height():r?t.x1+=t.width():t.x2-=t.width(),n.marker.reflow(t),n.reflowLabel(t)},reflowLabel:function(e){var t=this,n=t.options,i=t.marker,o=t.label,r=n.labels.position;o&&(r=r===bn?Ji:r,r=r===Tn?Dn:r,o.reflow(e),o.box.alignTo(i.box,r),o.reflow(o.box))},highlightOverlay:function(e,t){var n=this,i=n.marker;return t=Wt({data:{modelId:n.options.modelId}},t),i.getViewElements(e,Wt(t,{id:null,fill:i.options.border.color,fillOpacity:1,strokeOpacity:0}))[0]},tooltipAnchor:function(e,t){var n=this,i=n.marker.box,o=n.options.aboveAxis;return new tn(i.x2+Qi,o?i.y1-t:i.y2)},formatValue:function(e){var t=this;return t.owner.formatPointValue(t,e)}}),Wt(G.fn,Do),q=G.extend({init:function(e,t){var n=this;G.fn.init.call(n,e,t),n.category=e.category},options:{labels:{position:zn},highlight:{opacity:1,border:{width:1,opacity:1}}},highlightOverlay:function(e){var t=this,n=t.options,i=n.highlight,o=i.border.width,r=n.markers,a=t.box.center(),s=r.size/2-o/2,l=i.border.color||new $t(r.background).brightness(Sn).toHex();return e.createCircle(a,s,{id:null,data:{modelId:t.options.modelId},stroke:l,strokeWidth:o,strokeOpacity:i.border.opacity})},toggleHighlight:function(e){var n,i=this,o=i.options.highlight.opacity;i.highlighted=!i.highlighted,n=i.marker.getViewElements(e,{fillOpacity:i.highlighted?o:t})[0],n.refresh(pn(this.options.id))}}),J=Qt.extend({init:function(e,t,n){var i=this;Qt.fn.init.call(i),i.linePoints=e,i.series=t,i.seriesIx=n,i.options.id=yn(),i.enableDiscovery()},options:{},points:function(e){var t,n,i=this,o=i.linePoints.concat(e||[]),r=[],a=o.length;for(t=0;a>t;t++)n=o[t].markerBox().center(),r.push(new tn(n.x,n.y));return r},getViewElements:function(e){var t=this,n=t.series;return Qt.fn.getViewElements.call(t,e),[e.createPolyline(t.points(),!1,{id:t.options.id,stroke:n.color,strokeWidth:n.width,strokeOpacity:n.opacity,fill:"",dashType:n.dashType,data:{modelId:t.options.modelId},zIndex:-1})]},aliasFor:function(e,t){var n=this,i=n.seriesIx;return n.parent.getNearestPoint(t.x,t.y,i)}}),K={renderSegments:function(){var e,t,n,i,o,r,a,s=this,l=s.options,c=l.series,h=s.seriesPoints,u=h.length,p=[];for(t=0;u>t;t++){for(n=h[t],a=n.length,e=c[t],i=[],r=0;a>r;r++)o=n[r],o?i.push(o):s.seriesMissingValues(e)!==hi&&(i.length>1&&p.push(s.createSegment(i,e,t,xn(p))),i=[]);i.length>1&&p.push(s.createSegment(i,e,t,xn(p)))}s._segments=p,s.append.apply(s,p)},seriesMissingValues:function(e){var t=e.missingValues,n=!t&&this.options.isStacked;return n?po:t},createSegment:function(e,t,n){return new J(e,t,n)},getNearestPoint:function(e,t,n){var i,o,r,a,s,l=this,c=l.options.invertAxes,h=c?ho:co,u=c?t:e,p=l.seriesPoints[n],d=gi,g=p.length;for(s=0;g>s;s++)i=p[s],i&&un(i.value)&&null!==i.value&&(o=i.box,r=Rt.abs(o.center()[h]-u),d>r&&(a=i,d=r));return a}},Q=N.extend({init:function(e,t){var n=this;n._stackAxisRange={min:gi,max:fi},n._categoryTotals=[],n.enableDiscovery(),N.fn.init.call(n,e,t)},render:function(){var e=this;N.fn.render.apply(e),e.computeAxisRanges(),e.renderSegments()},createPoint:function(e,t,n,i){var o,r,a=this,s=e.value,l=a.options,c=l.isStacked,h=a.categoryPoints[n],u=a.seriesMissingValues(i),p=0,d=e.fields;if(!un(s)||null===s){if(u!==po)return null;s=0}return r=new G(s,Wt({vertical:!l.invertAxes,markers:{border:{color:i.color}}},i,{color:d.color,markers:{border:{color:d.color}}})),c&&(o=L(h),o&&(p=o.plotValue),r.plotValue=s+p),a.append(r),r},updateRange:function(e,t){var n,i=this,o=i.options.isStacked,a=i._stackAxisRange,s=i._categoryTotals;un(e)&&(o?(p(s,t,e),n=r(s),a.min=Rt.min(a.min,n.min),a.max=Rt.max(a.max,n.max)):N.fn.updateRange.apply(i,arguments))},computeAxisRanges:function(){var e,t=this,n=t.options.isStacked;n&&(e=t.options.series[0].axis,t.valueAxisRanges[e]=t._stackAxisRange)},getViewElements:function(e){var t=this,n=N.fn.getViewElements.call(t,e),i=e.createGroup({animation:{type:Mn}});return i.children=n,[i]},bindableFields:function(){return["color"]}}),Wt(Q.fn,K),$=J.extend({init:function(e,t,n,i){var o=this;o.stackPoints=t,J.fn.init.call(o,e,n,i)},points:function(){var e,t,n=this,i=n.parent,o=i.options.isStacked&&n.seriesIx>0,r=i.plotArea,a=i.options.invertAxes,s=i.seriesValueAxis(n.series),l=s.lineBox(),c=r.seriesCategoryAxis(n.series),h=c.lineBox(),u=a?h.x1:h.y1,p=n.stackPoints,d=J.fn.points.call(n,p);return u=a?D(u,l.x1,l.x2):D(u,l.y1,l.y2),!o&&d.length>1&&(e=d[0],t=xn(d),a?(d.unshift(new tn(u,e.y)),d.push(new tn(u,t.y))):(d.unshift(new tn(e.x,u)),d.push(new tn(t.x,u)))),d},getViewElements:function(e){var t=this,n=t.series,i=Wt({color:n.color,opacity:n.opacity},n.line),o=J.fn.points.call(t),r=t.points();return Qt.fn.getViewElements.call(t,e),[e.createPolyline(r,!1,{id:t.options.id,fillOpacity:n.opacity,fill:n.color,stack:n.stack,data:{modelId:t.options.modelId},zIndex:-1}),e.createPolyline(o,!1,{stroke:i.color,strokeWidth:i.width,strokeOpacity:i.opacity,dashType:i.dashType,data:{modelId:t.options.modelId},strokeLineCap:"butt",zIndex:-1})]}}),Z=Q.extend({createSegment:function(e,t,n,i){var o,r=this,a=r.options;return a.isStacked&&n>0&&i&&(o=i.linePoints.slice(0).reverse()),new $(e,o,t,n)},seriesMissingValues:function(e){return e.missingValues||po}}),et=Qt.extend({init:function(e,t){var n=this;Qt.fn.init.call(n,t),n.plotArea=e,n.xAxisRanges={},n.yAxisRanges={},n.points=[],n.seriesPoints=[],n.render()},options:{series:[],tooltip:{format:"{0}, {1}"},labels:{format:"{0}, {1}"}},render:function(){var e=this;e.traverseDataPoints(zt(e.addValue,e))},addValue:function(e,t){var n,i=this,o=e.x,r=e.y,a=t.seriesIx,s=i.seriesPoints[a];i.updateRange(e,t.series),un(o)&&null!==o&&un(r)&&null!==r&&(n=i.createPoint(e,t.series,a,t),n&&Lt(n,t)),i.points.push(n),s.push(n)},updateRange:function(e,t){var n=this,i=e.x,o=e.y,r=t.xAxis,a=t.yAxis,s=n.xAxisRanges[r],l=n.yAxisRanges[a];un(i)&&null!==i&&(s=n.xAxisRanges[r]=s||{min:gi,max:fi},typeof i===Ni&&(i=x(i)),s.min=Rt.min(s.min,i),s.max=Rt.max(s.max,i)),un(o)&&null!==o&&(l=n.yAxisRanges[a]=l||{min:gi,max:fi},typeof o===Ni&&(o=x(o)),l.min=Rt.min(l.min,o),l.max=Rt.max(l.max,o))},createPoint:function(e,t,n,i){var o,r=this;return o=new G(e,Wt({markers:{border:{color:t.color},opacity:t.opacity},tooltip:{format:r.options.tooltip.format},labels:{format:r.options.labels.format}},t,{color:i.color,markers:{border:{color:i.color}}})),r.append(o),o},seriesAxes:function(e){var t=this.plotArea,n=e.xAxis,i=n?t.namedXAxes[n]:t.axisX,o=e.yAxis,r=o?t.namedYAxes[o]:t.axisY;if(!i)throw Error("Unable to locate X axis with name "+n);if(!r)throw Error("Unable to locate Y axis with name "+o);return{x:i,y:r}},reflow:function(e){var t,n,i=this,o=i.points,r=0;i.traverseDataPoints(function(e,a){t=o[r++],n=i.seriesAxes(a.series);var s=n.x.getSlot(e.x,e.x),l=n.y.getSlot(e.y,e.y),c=new Jt(s.x1,l.y1,s.x2,l.y2);t&&t.reflow(c)}),i.box=e},getViewElements:function(e){var t=this,n=Qt.fn.getViewElements.call(t,e),i=e.createGroup({animation:{type:Mn}});return i.children=n,[i]},traverseDataPoints:function(e){var t,n,i,o,r,a,s,l=this,c=l.options,h=c.series,u=l.seriesPoints,p=l.bindableFields();for(n=0;h.length>n;n++)for(i=h[n],o=u[n],o||(u[n]=[]),t=0;i.data.length>t;t++)r=P(i,t,p),a=r.value,s=r.fields,e(a,Wt({pointIx:t,series:i,seriesIx:n,dataItem:i.data[t],owner:l},s))},bindableFields:function(){return["color"]},formatPointValue:function(e,t){var n=e.value;return hn(t,n.x,n.y)}}),tt=et.extend({render:function(){var e=this;et.fn.render.call(e),e.renderSegments()}}),Wt(tt.fn,K),nt=et.extend({options:{tooltip:{format:"{3}"},labels:{format:"{3}"}},addValue:function(e,t){var n,i=this,o=t.series,r=o.negativeValues,a=i.plotArea.options.seriesColors||[],s=!0;n=t.color||o.color||a[t.pointIx%a.length],0>e.size&&(n=r.color||n,s=r.visible),t.color=n,s&&et.fn.addValue.call(this,e,t)},reflow:function(e){var t=this;t.updateBubblesSize(e),et.fn.reflow.call(t,e)},createPoint:function(e,t,n,i){var o,r=this,a=t.data.length,s=i.pointIx*(si/a),l={delay:s,duration:si-s,type:Bn};return o=new q(e,Wt({tooltip:{format:r.options.tooltip.format},labels:{format:r.options.labels.format,animation:l}},t,{color:i.color,markers:{type:Hn,background:i.color,border:t.border,opacity:t.opacity,animation:l}})),r.append(o),o},updateBubblesSize:function(e){var t,n,i,o,r,a,s,l,c,h,u,p,d,g,f,x,v=this,m=v.options,y=m.series,w=Rt.min(e.width(),e.height());for(t=0;y.length>t;t++)for(i=y[t],o=v.seriesPoints[t],r=v.maxSize(o),a=i.minSize||Rt.max(.02*w,10),s=i.maxSize||.2*w,l=a/2,c=s/2,h=Rt.PI*l*l,u=Rt.PI*c*c,p=u-h,d=p/r,n=0;o.length>n;n++)g=o[n],f=Rt.abs(g.value.size)*d,x=Rt.sqrt((h+f)/Rt.PI),Wt(g.options,{markers:{size:2*x,zIndex:c-x},labels:{zIndex:c-x+1}})},maxSize:function(e){var t,n,i=e.length,o=0;for(t=0;i>t;t++)n=e[t].value.size,o=Rt.max(o,Rt.abs(n));return o},bindableFields:function(){return["color","category","visibleInLegend"]},getViewElements:function(e){var t=this,n=Qt.fn.getViewElements.call(t,e),i=e.createGroup();return i.children=n,[i]},formatPointValue:function(e,t){var n=e.value;return hn(t,n.x,n.y,n.size,e.category)}}),it=Qt.extend({init:function(e,t){var n=this;Qt.fn.init.call(n,t),n.value=e,n.options.id=yn(),n.enableDiscovery()},options:{border:{_brightness:.8},line:{width:2},overlay:{gradient:ri},tooltip:{format:"<table style='text-align: left;'><th colspan='2'>{4:d}</th><tr><td>Open:</td><td>{0:C}</td></tr><tr><td>High:</td><td>{1:C}</td></tr><tr><td>Low:</td><td>{2:C}</td></tr><tr><td>Close:</td><td>{3:C}</td></tr></table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}}},reflow:function(e){var t,n,i,o=this,r=o.options,a=o.owner,s=o.value,l=a.seriesValueAxis(r),c=[];n=l.getSlot(s.open,s.close),i=l.getSlot(s.low,s.high),n.x1=i.x1=e.x1,n.x2=i.x2=e.x2,o.realBody=n,t=i.center().x,c.push([new tn(t,i.y1),new tn(t,n.y1)]),c.push([new tn(t,n.y2),new tn(t,i.y2)]),o.lowHighLinePoints=c,o.box=i.clone().wrap(n)},getViewElements:function(e){var t=this,n=t.options,i=[],o=n.border.width>0?{stroke:t.getBorderColor(),strokeWidth:n.border.width,dashType:n.border.dashType,strokeOpacity:un(n.border.opacity)?n.border.opacity:n.opacity}:{},r=Wt({fill:t.color,fillOpacity:n.opacity},o),a={strokeOpacity:un(n.line.opacity)?n.line.opacity:n.opacity,strokeWidth:n.line.width,stroke:n.line.color||t.color,dashType:n.line.dashType,strokeLineCap:"butt"},s=e.createGroup({animation:{type:Mn}});return n.overlay&&(r.overlay=Wt({rotation:0},n.overlay)),i.push(e.createRect(t.realBody,r)),i.push(e.createPolyline(t.lowHighLinePoints[0],!1,a)),i.push(e.createPolyline(t.lowHighLinePoints[1],!1,a)),i.push(t.createOverlayRect(e,n)),cn(i,Qt.fn.getViewElements.call(t,e)),s.children=i,[s]},getBorderColor:function(){var e=this,t=e.options,n=e.color,i=t.border,o=i.color;return un(o)||(o=new $t(n).brightness(i._brightness).toHex()),o},createOverlayRect:function(e,t){return e.createRect(this.box,{data:{modelId:t.modelId},fill:"#fff",fillOpacity:0})},highlightOverlay:function(e,t){var n=this,i=n.options,o=i.highlight,r=o.border,a=n.getBorderColor(),s=o.line,l={data:{modelId:i.modelId}},c=Wt({},l,t,{stroke:a,strokeOpacity:r.opacity,strokeWidth:r.width}),h=Wt({},l,{stroke:s.color||a,strokeWidth:s.width,strokeOpacity:s.opacity,strokeLineCap:"butt"}),u=e.createGroup();return u.children.push(e.createRect(n.realBody,c)),u.children.push(e.createPolyline(n.lowHighLinePoints[0],!1,h)),u.children.push(e.createPolyline(n.lowHighLinePoints[1],!1,h)),u},tooltipAnchor:function(){var e=this,t=e.box;return new tn(t.x2+Qi,t.y1+Qi)},formatValue:function(e){var t=this;return t.owner.formatPointValue(t,e)}}),Wt(it.fn,Do),ot=N.extend({options:{},bindableFields:function(){return["color","downColor"]},reflowCategories:function(e){var t,n=this,i=n.children,o=i.length;for(t=0;o>t;t++)i[t].reflow(e[t])},addValue:function(e,t,n,i,o){var r,a,s=this,l=s.options,c=e.value,h=s.children,u=e.fields.color||i.color,p=this.splitValue(c),d=H(p),g=s.categoryPoints[n];g||(s.categoryPoints[n]=g=[]),d&&(r=s.createPoint(c,i)),a=h[n],a||(a=new Io({vertical:l.invertAxes,gap:l.gap,spacing:l.spacing}),s.append(a)),r&&(s.updateRange(c,n,i),a.append(r),i.type==Rn&&c.open>c.close&&(u=e.fields.downColor||i.downColor),r.color=u,r.categoryIx=n,r.category=t,r.series=i,r.seriesIx=o,r.owner=s,r.dataItem=i.data[n]),s.points.push(r),g.push(r)},createPoint:function(e,t){return new it(e,t)},splitValue:function(e){return[e.low,e.open,e.close,e.high]},updateRange:function(e,t,n){var i=this,o=n.axis,r=i.valueAxisRanges[o],a=i.splitValue(e);r=i.valueAxisRanges[o]=r||{min:gi,max:fi},r=i.valueAxisRanges[o]={min:Rt.min.apply(Rt,a.concat([r.min])),max:Rt.max.apply(Rt,a.concat([r.max]))}},formatPointValue:function(e,t){var n=e.value;return hn(t,n.open,n.high,n.low,n.close,e.category)}}),rt=it.extend({reflow:function(e){var t,n,i,o,r=this,a=r.options,s=r.owner,l=r.value,c=s.seriesValueAxis(a),h=[],u=[],p=[];o=c.getSlot(l.low,l.high),n=c.getSlot(l.open,l.open),i=c.getSlot(l.close,l.close),n.x1=i.x1=o.x1=e.x1,n.x2=i.x2=o.x2=e.x2,t=o.center().x,h.push(new tn(n.x1,n.y1)),h.push(new tn(t,n.y1)),u.push(new tn(t,i.y1)),u.push(new tn(i.x2,i.y1)),p.push(new tn(t,o.y1)),p.push(new tn(t,o.y2)),r.oPoints=h,r.cPoints=u,r.lhPoints=p,r.box=o.clone().wrap(n.clone().wrap(i))},getViewElements:function(e){var t=this,n=t.options,i=[],o={strokeOpacity:n.opacity,zIndex:-1,strokeWidth:n.width,stroke:t.color,dashType:n.dashType},r=e.createGroup({animation:{type:Mn}});return i.push(t.createOverlayRect(e,n)),i.push(e.createPolyline(t.oPoints,!0,o)),i.push(e.createPolyline(t.cPoints,!0,o)),i.push(e.createPolyline(t.lhPoints,!0,o)),cn(i,Qt.fn.getViewElements.call(t,e)),r.children=i,[r]},highlightOverlay:function(e){var t=this,n=t.options,i=n.highlight,o={data:{modelId:n.modelId}},r=Wt(o,{strokeWidth:i.line.width,strokeOpacity:i.line.opacity,stroke:i.line.color||t.color}),a=e.createGroup();return a.children.push(e.createPolyline(t.oPoints,!0,r)),a.children.push(e.createPolyline(t.cPoints,!0,r)),a.children.push(e.createPolyline(t.lhPoints,!0,r)),a}}),at=ot.extend({createPoint:function(e,t){return new rt(e,t)},bindableFields:function(){return["color"]}}),st=Qt.extend({init:function(e,t,n){var i=this;i.value=e,i.sector=t,i.enableDiscovery(),Qt.fn.init.call(i,n)},options:{color:lo,overlay:{gradient:Bi},border:{width:.5},labels:{visible:!1,distance:35,font:qn,margin:dn(.5),align:Hn,zIndex:1,position:Pi},animation:{type:Ti},highlight:{visible:!0,border:{width:1}}},render:function(){var e,t=this,n=t.options,i=n.labels,o=t.value;t._rendered||(t._rendered=!0,i.template?(e=Ft(i.template),o=e({dataItem:t.dataItem,category:t.category,value:t.value,series:t.series,percentage:t.percentage})):i.format&&(o=hn(i.format,o)),i.visible&&o&&(t.label=new an(o,Wt({},i,{id:yn(),align:zn,vAlign:"",animation:{type:oi,delay:t.animationDelay}})),t.append(t.label)))},reflow:function(e){var t=this;t.render(),t.box=e,t.reflowLabel()},reflowLabel:function(){var e,t,n,i,o=this,r=o.sector.clone(),a=o.options,s=o.label,l=a.labels,c=l.distance,h=r.middle();s&&(i=s.box.height(),n=s.box.width(),l.position==zn?(r.r=Rt.abs((r.r-i)/2)+i,e=r.point(h),s.reflow(new Jt(e.x,e.y-i/2,e.x,e.y))):l.position==ci?(r.r=r.r-i/2,e=r.point(h),s.reflow(new Jt(e.x,e.y-i/2,e.x,e.y))):(e=r.clone().expand(c).point(h),e.x>=r.c.x?(t=e.x+n,s.orientation=Di):(t=e.x-n,s.orientation=ui),s.reflow(new Jt(t,e.y-i,e.x,e.y))))},getViewElements:function(e){var t=this,n=t.sector,i=t.options,o=i.border||{},r=o.width>0?{stroke:o.color,strokeWidth:o.width,strokeOpacity:o.opacity,dashType:o.dashType}:{},a=[],s=i.overlay;return s&&(s=Wt({},i.overlay,{r:n.r,ir:n.ir,cx:n.c.x,cy:n.c.y,bbox:n.getBBox()})),t.value&&a.push(t.createSegment(e,n,Wt({id:i.id,fill:i.color,overlay:s,fillOpacity:i.opacity,strokeOpacity:i.opacity,animation:Wt(i.animation,{delay:t.animationDelay}),data:{modelId:i.modelId},zIndex:i.zIndex,singleSegment:1===(t.options.data||[]).length},r))),cn(a,Qt.fn.getViewElements.call(t,e)),a},createSegment:function(e,t,n){return n.singleSegment?e.createCircle(t.c,t.r,n):e.createSector(t,n)},highlightOverlay:function(e,t){var n,i=this,o=i.options.highlight||{},r=o.border||{},a=i.options.id+Si;return t=Wt({},t,{id:a}),0!==i.value&&(n=i.createSegment(e,i.sector,Wt({},t,{fill:o.color,fillOpacity:o.opacity,strokeOpacity:r.opacity,strokeWidth:r.width,stroke:r.color,id:null,data:{modelId:i.options.modelId}}))),n},tooltipAnchor:function(e,t){var n=this,i=n.sector.clone().expand(Qi),o=e/2,r=t/2,a=i.middle(),s=a*$n,l=i.point(a),c=l.x-o,h=l.y-r,u=Rt.sin(s),p=Rt.cos(s);return.9>Rt.abs(u)&&(c+=o*-p/Rt.abs(p)),.9>Rt.abs(p)&&(h+=r*-u/Rt.abs(u)),new tn(c,h)},formatValue:function(e){var t=this;return t.owner.formatPointValue(t,e)}}),Wt(st.fn,Do),lt=Qt.extend({init:function(e,t){var n=this;Qt.fn.init.call(n,t),n.plotArea=e,n.segments=[],n.legendItems=[],n.render()},options:{startAngle:90,connectors:{width:1,color:"#939393",padding:4}},render:function(){var e=this;e.traverseDataPoints(zt(e.addValue,e))},traverseDataPoints:function(e){var t,n,i,o,r,a,s,l,c,h,u,p,d=this,g=d.options,f=d.plotArea.options.seriesColors||[],x=f.length,v=g.series,m=v.length,y=yn(),w=d.bindableFields();for(o=0;m>o;o++)for(t=v[o],a=t.data,h=d.pointsTotal(t),s=360/h,u=un(t.startAngle)?t.startAngle:g.startAngle,o!=m-1&&t.labels.position==Pi&&(t.labels.position=zn),p=0;a.length>p;p++)n=P(t,p,w),l=n.value,i=n.fields,r=vn(l*s,Kn),c=1!=a.length&&!!i.explode,t.color=i.color||f[p%x],e(l,new on(null,0,0,u,r),{owner:d,category:i.category||"",categoryIx:p,series:t,seriesIx:o,dataItem:a[p],percentage:l/h,explode:c,visibleInLegend:i.visibleInLegend,overlay:{id:y+o},zIndex:m-o,animationDelay:d.animationDelay(p,o,m)}),u+=r},bindableFields:function(){return["category","color","explode","visibleInLegend"]},addValue:function(e,t,n){var i,o=this;o.createLegendItem(e,n),e&&(i=new st(e,t,n.series),i.options.id=yn(),Lt(i,n),o.append(i),o.segments.push(i))},createLegendItem:function(e,t){var n,i,o=this,r=(o.options.legend||{}).labels||{};t&&t.visibleInLegend!==!1&&(n=t.category||"",(r||{}).template&&(i=Ft(r.template),n=i({text:n,series:t.series,dataItem:t.dataItem,percentage:t.percentage,value:e})),o.legendItems.push({name:n,color:t.series.color}))},pointsTotal:function(e){var t,n=e.data,i=n.length,o=0;for(t=0;i>t;t++)o+=P(e,t).value;return o},reflow:function(e){var t,n,i,o,r,a,s,l,c=this,h=c.options,u=e.clone(),p=5,d=Rt.min(u.width(),u.height()),g=d/2,f=d-.85*d,x=un(h.padding)?h.padding:f,v=new Jt(u.x1,u.y1,u.x1+d,u.y1+d),m=v.center(),y=c.seriesConfigs||[],w=u.center(),b=c.segments,A=b.length,_=h.series.length,k=[],C=[];for(x=x>g-p?g-p:x,v.translate(w.x-m.x,w.y-m.y),a=g-x,l=new tn(a+v.x1+x,a+v.y1+x),s=0;A>s;s++)o=b[s],r=o.sector,r.r=a,r.c=l,n=o.seriesIx,y.length&&(t=y[n],r.ir=t.ir,r.r=t.r),n==_-1&&o.explode&&(r.c=r.clone().radius(.15*r.r).point(r.middle())),o.reflow(v),i=o.label,i&&i.options.position===Pi&&n==_-1&&(i.orientation===Di?C.push(i):k.push(i));k.length>0&&(k.sort(c.labelComparator(!0)),c.leftLabelsReflow(k)),C.length>0&&(C.sort(c.labelComparator(!1)),c.rightLabelsReflow(C)),c.box=v},leftLabelsReflow:function(e){var t=this,n=t.distanceBetweenLabels(e);t.distributeLabels(n,e)},rightLabelsReflow:function(e){var t=this,n=t.distanceBetweenLabels(e);t.distributeLabels(n,e)},distanceBetweenLabels:function(e){var t,n,i,o=this,r=o.segments,a=r[r.length-1],s=a.sector,l=e[0].box,c=e.length-1,h=s.r+a.options.labels.distance,u=[];for(n=vn(l.y1-(s.c.y-h-l.height()-l.height()/2)),u.push(n),i=0;c>i;i++)l=e[i].box,t=e[i+1].box,n=vn(t.y1-l.y2),u.push(n);return n=vn(s.c.y+h-e[c].box.y2-e[c].box.height()/2),u.push(n),u},distributeLabels:function(e,t){var n,i,o,r,a=this,s=e.length;for(r=0;s>r;r++)for(i=o=r,n=-e[r];n>0&&(i>=0||s>o);)n=a._takeDistance(e,r,--i,n),n=a._takeDistance(e,r,++o,n);a.reflowLabels(e,t)},_takeDistance:function(e,t,n,i){if(e[n]>0){var o=Rt.min(e[n],i);i-=o,e[n]-=o,e[t]+=o}return i},reflowLabels:function(e,t){var n,i,o,r,a=this,s=a.segments,l=s[s.length-1],c=l.sector,h=t.length,u=l.options.labels,p=u.distance,d=c.c.y-(c.r+p)-t[0].box.height();for(e[0]+=2,r=0;h>r;r++)n=t[r],d+=e[r],o=n.box,i=a.hAlignLabel(o.x2,c.clone().expand(p),d,d+o.height(),n.orientation==Di),n.orientation==Di?(u.align!==Hn&&(i=c.r+c.c.x+p),n.reflow(new Jt(i+o.width(),d,i,d))):(u.align!==Hn&&(i=c.c.x-c.r-p),n.reflow(new Jt(i-o.width(),d,i,d))),d+=o.height()},getViewElements:function(e){var t,n,i,o,r,s,l,c,h,u,p,d,g,f,x,v=this,m=v.options,y=m.connectors,w=v.segments,b=[],A=w.length,_=4;for(c=0;A>c;c++)r=w[c],n=r.sector,i=n.middle(),l=r.label,s={seriesId:r.seriesIx},l&&(o=[],l.options.position===Pi&&0!==r.value&&(d=l.box,g=n.c,f=n.point(i),x=new tn(d.x1,d.center().y),f=n.clone().expand(y.padding).point(i),o.push(f),l.orientation==Di?(u=new tn(d.x1-y.padding,d.center().y),p=a(g,f,x,u),x=new tn(u.x-_,u.y),p=p||x,p.x=Rt.min(p.x,x.x),v.pointInCircle(p,n.c,n.r+_)||p.x<n.c.x?(h=n.c.x+n.r+_,r.options.labels.align!==Nn?x.x>h?o.push(new tn(h,f.y)):o.push(new tn(f.x+2*_,f.y)):o.push(new tn(h,f.y)),o.push(new tn(x.x,u.y))):(p.y=u.y,o.push(p))):(u=new tn(d.x2+y.padding,d.center().y),p=a(g,f,x,u),x=new tn(u.x+_,u.y),p=p||x,p.x=Rt.max(p.x,x.x),v.pointInCircle(p,n.c,n.r+_)||p.x>n.c.x?(h=n.c.x-n.r-_,r.options.labels.align!==Nn?h>x.x?o.push(new tn(h,f.y)):o.push(new tn(f.x-2*_,f.y)):o.push(new tn(h,f.y)),o.push(new tn(x.x,u.y))):(p.y=u.y,o.push(p))),o.push(u),t=e.createPolyline(o,!1,{id:yn(),stroke:y.color,strokeWidth:y.width,animation:{type:oi,delay:r.animationDelay},data:{modelId:r.options.modelId}}),b.push(t)));return cn(b,Qt.fn.getViewElements.call(v,e)),b},labelComparator:function(e){return e=e?-1:1,function(t,n){return t=(t.parent.sector.middle()+270)%360,n=(n.parent.sector.middle()+270)%360,(t-n)*e}},hAlignLabel:function(e,t,n,i,o){var r=t.c.x,a=t.c.y,s=t.r,l=Rt.min(Rt.abs(a-n),Rt.abs(a-i));return l>s?e:r+Rt.sqrt(s*s-l*l)*(o?1:-1)},pointInCircle:function(e,t,n){return g(t.x-e.x)+g(t.y-e.y)<g(n)},formatPointValue:function(e,t){return hn(t,e.value)},animationDelay:function(e){return e*Ii}}),ct=st.extend({options:{overlay:{gradient:Ei},labels:{position:zn},animation:{type:Ti}},reflowLabel:function(){var e,t,n=this,i=n.sector.clone(),o=n.options,r=n.label,a=o.labels,s=i.middle();r&&(t=r.box.height(),a.position==zn?(i.r-=(i.r-i.ir)/2,e=i.point(s),r.reflow(new Jt(e.x,e.y-t/2,e.x,e.y))):st.fn.reflowLabel.call(n))},createSegment:function(e,t,n){return e.createRing(t,n)}}),Wt(ct.fn,Do),ht=lt.extend({options:{startAngle:90,connectors:{width:1,color:"#939393",padding:4}},addValue:function(e,t,n){var i,o=this;o.createLegendItem(e,n),e&&(i=new ct(e,t,n.series),i.options.id=yn(),Lt(i,n),o.append(i),o.segments.push(i))},reflow:function(e){var t,n,i,o,r,a,s=this,l=s.options,c=e.clone(),h=5,u=Rt.min(c.width(),c.height()),p=u/2,d=u-.85*u,g=un(l.padding)?l.padding:d,f=l.series,x=f.length,v=0,m=0,y=0,w=0;for(s.seriesConfigs=[],g=g>p-h?p-h:g,i=p-g,r=0;x>r;r++)t=f[r],0===r&&un(t.holeSize)&&(n=t.holeSize,i-=t.holeSize),un(t.size)?i-=t.size:v++,un(t.margin)&&r!=x-1&&(i-=t.margin);for(un(n)||(w=(p-g)/(x+.75),n=.75*w,i-=n),y=n,r=0;x>r;r++)t=f[r],o=un(t.size)?t.size:i/v,y+=m,a=y+o,s.seriesConfigs.push({ir:y,r:a}),m=t.margin||0,y=a;lt.fn.reflow.call(s,e)},animationDelay:function(e,t,n){return e*ei+si*(t+1)/(n+1)}}),ut=Kt.extend({init:function(e){var t=this;Kt.fn.init.call(t,e),e=t.options,e.id=yn(),t.title=sn.buildTitle(e.title,t,ut.fn.options.title),t.content=new Qt,t.append(t.content),t.axes=[],t.charts=[]},options:{zIndex:-1,shrinkToFit:!0,title:{align:ui},visible:!0},appendAxis:function(e){var t=this;t.content.append(e),t.axes.push(e),e.pane=t},appendChart:function(e){var t=this;t.charts.push(e),t.content.append(e),e.pane=t
},empty:function(){var e,t=this,n=t.parent;if(n){for(e=0;t.axes.length>e;e++)n.removeAxis(t.axes[e]);for(e=0;t.charts.length>e;e++)n.removeChart(t.charts[e])}t.axes=[],t.charts=[],t.content.destroy(),t.content.children=[]},reflow:function(e){var t=this;xn(t.children)===t.content&&t.children.pop(),Kt.fn.reflow.call(t,e),t.title&&(t.contentBox.y1+=t.title.box.height())},getViewElements:function(e){var t=this,n=N.fn.getViewElements.call(t,e),i=e.createGroup({id:t.options.id}),o=[];return i.children=n.concat(t.renderGridLines(e),t.content.getViewElements(e)),t.view=e,t.options.visible&&(o=[i]),o},renderGridLines:function(e){var t,n,i,o,r,a,s=this,l=s.axes,c=l.concat(s.parent.axes),h=[],u=[];for(n=0;l.length>n;n++)for(o=l[n],r=o.options.vertical,t=r?h:u,i=0;c.length>i;i++)0===t.length&&(a=c[i],r!==a.options.vertical&&cn(t,o.renderGridLines(e,a,o)));return h.concat(u)},refresh:function(){var e=this,t=e.view,n=pn(e.options.id);t&&n&&n.parentNode.replaceChild(t.renderElement(e.getViewElements(t)[0]),n)}}),pt=Qt.extend({init:function(e,t){var n=this;Qt.fn.init.call(n,t),n.series=e,n.charts=[],n.options.legend.items=[],n.axes=[],n.crosshairs=[],n.options.id=yn(),n.enableDiscovery(),n.createPanes(),n.render(),n.createCrosshairs()},options:{series:[],plotArea:{margin:{}},background:"",border:{color:In,width:0},legend:{}},createPanes:function(){var e,t,n=this,i=[],o=n.options.panes||[],r=Rt.max(o.length,1);for(e=0;r>e;e++)t=new ut(o[e]),t.paneIndex=e,i.push(t),n.append(t);n.panes=i},destroy:function(){var e,t=this,n=t.charts,i=t.axes;for(e=0;n.length>e;e++)n[e].destroy();for(e=0;i.length>e;e++)i[e].destroy();Qt.fn.destroy.call(t)},createCrosshairs:function(){var e,t,n,i,o,r=this,a=r.panes;for(e=0;a.length>e;e++)for(n=a[e],t=0;n.axes.length>t;t++)i=n.axes[t],i.options.crosshair&&i.options.crosshair.visible&&(o=new St(i,i.options.crosshair),r.crosshairs.push(o),r.append(o))},findPane:function(e){var t,n,i=this,o=i.panes;for(t=0;o.length>t;t++)if(o[t].options.name===e){n=o[t];break}return n||o[0]},findPointPane:function(e){var t,n,i=this,o=i.panes;for(t=0;o.length>t;t++)if(o[t].box.containsPoint(e)){n=o[t];break}return n},appendAxis:function(e){var t=this,n=t.findPane(e.options.pane);n.appendAxis(e),t.axes.push(e),e.plotArea=t},removeAxis:function(e){var t,n,i=this,o=[];for(t=0;i.axes.length>t;t++)n=i.axes[t],e!==n&&o.push(n);i.axes=o},appendChart:function(e,t){var n=this;n.charts.push(e),n.addToLegend(e),t?t.appendChart(e):n.append(e)},removeChart:function(e){var t,n,i=this,o=[];for(t=0;i.charts.length>t;t++)n=i.charts[t],n!==e&&o.push(n);i.charts=o},addToLegend:function(e){var t,n,i,o,r=e.options.series,a=r.length,s=[],l=this.options.legend.labels||{};if(e.legendItems)s=e.legendItems;else for(t=0;a>t;t++)n=r[t],n.visibleInLegend!==!1&&(i=n.name||"",l.template&&(o=Ft(l.template),i=o({text:i,series:n})),s.push({name:i,color:n.color}));cn(this.options.legend.items,s)},groupAxes:function(e){var t,n,i,o,r=[],a=[];for(i=0;e.length>i;i++)for(t=e[i].axes,o=0;t.length>o;o++)n=t[o],n.options.vertical?a.push(n):r.push(n);return{x:r,y:a,any:r.concat(a)}},groupSeriesByPane:function(){var e,t,n,i=this,o=i.series,r={};for(e=0;o.length>e;e++)n=o[e],t=i.seriesPaneName(n),r[t]?r[t].push(n):r[t]=[n];return r},filterSeriesByType:function(e,t){var n,i,o=[];for(t=[].concat(t),n=0;e.length>n;n++)i=e[n],gn(i.type,t)&&o.push(i);return o},reflow:function(e){var t=this,n=t.options.plotArea,i=t.panes,o=dn(n.margin);t.box=e.clone().unpad(o),t.reflowPanes(),t.reflowAxes(i),t.reflowCharts(i)},redraw:function(e){var t,n=this;for(e=[].concat(e),t=0;e.length>t;t++)e[t].empty();for(n.render(e),n.reflowAxes(n.panes),n.reflowCharts(e),t=0;e.length>t;t++)e[t].refresh()},axisCrossingValues:function(e,t){var n,i=e.options,o=[].concat(i.axisCrossingValues||i.axisCrossingValue),r=t.length-o.length,a=o[0]||0;for(n=0;r>n;n++)o.push(a);return o},alignAxisTo:function(e,t,n,i){var o=e.getSlot(n,n),r=e.options.reverse?2:1,a=t.getSlot(i,i),s=t.options.reverse?2:1,l=e.box.translate(a[co+s]-o[co+r],a[ho+s]-o[ho+r]);e.pane!==t.pane&&l.translate(0,e.pane.box.y1-t.pane.box.y1),e.reflow(l)},alignAxes:function(e,t){var n,i,o,r,a=this,s=e[0],l=t[0],c=a.axisCrossingValues(s,t),h=a.axisCrossingValues(l,e),u={},p={},d={},g={};for(r=0;t.length>r;r++)o=t[r],n=o.pane,i=n.options.id,a.alignAxisTo(o,s,h[r],c[r]),o.options._overlap||(vn(o.lineBox().x1)===vn(s.lineBox().x1)&&(u[i]&&o.reflow(o.box.alignTo(u[i].box,ui).translate(-o.options.margin,0)),u[i]=o),vn(o.lineBox().x2)===vn(s.lineBox().x2)&&(o._mirrored||(o.options.labels.mirror=!o.options.labels.mirror,o._mirrored=!0),a.alignAxisTo(o,s,h[r],c[r]),p[i]&&o.reflow(o.box.alignTo(p[i].box,Di).translate(o.options.margin,0)),p[i]=o),0!==r&&l.pane===o.pane&&o.alignTo(l));for(r=0;e.length>r;r++)o=e[r],n=o.pane,i=n.options.id,a.alignAxisTo(o,l,c[r],h[r]),o.options._overlap||(vn(o.lineBox().y1)===vn(l.lineBox().y1)&&(o._mirrored||(o.options.labels.mirror=!o.options.labels.mirror,o._mirrored=!0),a.alignAxisTo(o,l,c[r],h[r]),d[i]&&o.reflow(o.box.alignTo(d[i].box,Ji).translate(0,-o.options.margin)),d[i]=o),vn(o.lineBox().y2,Fn)===vn(l.lineBox().y2,Fn)&&(g[i]&&o.reflow(o.box.alignTo(g[i].box,Dn).translate(0,o.options.margin)),g[i]=o),0!==r&&o.alignTo(s))},shrinkAxisWidth:function(e){var t,n,i,o=this,r=o.groupAxes(e).any,a=B(r),s=0;for(t=0;e.length>t;t++)n=e[t],n.axes.length>0&&(s=Rt.max(s,a.width()-n.contentBox.width()));for(t=0;r.length>t;t++)i=r[t],i.options.vertical||i.reflow(i.box.shrink(s,0))},shrinkAxisHeight:function(e){var t,n,i,o,r,a;for(t=0;e.length>t;t++)for(n=e[t],i=n.axes,o=Rt.max(0,B(i).height()-n.contentBox.height()),r=0;i.length>r;r++)a=i[r],a.options.vertical&&a.reflow(a.box.shrink(0,o))},fitAxes:function(e){var t,n,i,o,r,a,s,l,c=this,h=c.groupAxes(e).any,u=0;for(s=0;e.length>s;s++)if(r=e[s],t=r.axes,n=r.contentBox,t.length>0)for(i=B(t),u=Rt.max(u,n.x1-i.x1),o=Rt.max(n.y1-i.y1,n.y2-i.y2),l=0;t.length>l;l++)a=t[l],a.reflow(a.box.translate(0,o));for(s=0;h.length>s;s++)a=h[s],a.reflow(a.box.translate(u,0))},reflowAxes:function(e){var t,n=this,i=n.groupAxes(e);for(t=0;e.length>t;t++)n.reflowPaneAxes(e[t]);i.x.length>0&&i.y.length>0&&(n.alignAxes(i.x,i.y),n.shrinkAxisWidth(e),n.alignAxes(i.x,i.y),n.shrinkAxisHeight(e),n.alignAxes(i.x,i.y),n.fitAxes(e))},reflowPaneAxes:function(e){var t,n=e.axes,i=n.length;if(i>0)for(t=0;i>t;t++)n[t].reflow(e.contentBox)},reflowCharts:function(e){var t,n,i=this,o=i.charts,r=o.length,a=i.box;for(n=0;r>n;n++)t=o[n].pane,(!t||gn(t,e))&&o[n].reflow(a)},reflowPanes:function(){var e,t,n,i,o,r=this,a=r.box,s=r.panes,l=s.length,c=a.height(),h=l,u=0,p=a.y1;for(e=0;l>e;e++)t=s[e],i=t.options.height,t.options.width=a.width(),t.options.height?(i.indexOf&&i.indexOf("%")&&(o=parseInt(i,10)/100,t.options.height=o*a.height()),t.reflow(a.clone()),c-=t.options.height):u++;for(e=0;l>e;e++)t=s[e],t.options.height||(t.options.height=c/u);for(e=0;l>e;e++)t=s[e],n=a.clone().move(a.x1,p),t.reflow(n),h--,p+=t.options.height},backgroundBox:function(){var e,t,n,i,o,r,a=this,s=a.axes,l=s.length;for(n=0;l>n;n++)for(o=s[n],i=0;l>i;i++)r=s[i],o.options.vertical!==r.options.vertical&&(e=o.lineBox().clone().wrap(r.lineBox()),t=t?t.wrap(e):e);return t||a.box},getViewElements:function(e){var t=this,n=t.backgroundBox(),i=t.options,o=i.plotArea,r=o.border||{},a=Qt.fn.getViewElements.call(t,e);return cn(a,[e.createRect(n,{fill:o.background,fillOpacity:o.opacity,zIndex:-2,strokeWidth:.1}),e.createRect(n,{id:i.id,data:{modelId:i.modelId},stroke:r.width?r.color:"",strokeWidth:r.width,fill:lo,fillOpacity:0,zIndex:-1,dashType:r.dashType})]),a},pointsByCategoryIndex:function(e){var t,n,i,o,r,a=this.charts,s=[];if(null!==e)for(t=0;a.length>t;t++)if(r=a[t],"_navigator"!==r.pane.options.name&&(i=a[t].categoryPoints[e],i&&i.length))for(n=0;i.length>n;n++)o=i[n],o&&un(o.value)&&null!==o.value&&s.push(o);return s},paneByPoint:function(e){var t,n,i=this,o=i.panes;for(n=0;o.length>n;n++)if(t=o[n],t.box.containsPoint(e))return t}}),dt=pt.extend({init:function(e,t){var n=this;n.namedCategoryAxes={},n.namedValueAxes={},n.valueAxisRangeTracker=new gt,e.length>0&&(n.invertAxes=gn(e[0].type,[Pn,En,ao,oo])),pt.fn.init.call(n,e,t)},options:{categoryAxis:{categories:[]},valueAxis:{}},render:function(e){var t=this;e=e||t.panes,t.createCategoryAxes(e),t.aggregateDateSeries(e),t.createCharts(e),t.createValueAxes(e)},removeAxis:function(e){var t=this,n=e.options.name;pt.fn.removeAxis.call(t,e),e instanceof Co?delete t.namedCategoryAxes[n]:(t.valueAxisRangeTracker.reset(n),delete t.namedValueAxes[n]),e===t.categoryAxis&&delete t.categoryAxis,e===t.valueAxis&&delete t.valueAxis},createCharts:function(e){var t,n,i,o=this,r=o.groupSeriesByPane();for(t=0;e.length>t;t++)n=e[t],i=r[n.options.name||"default"],i&&(o.createAreaChart(o.filterSeriesByType(i,[An,oo]),n),o.createBarChart(o.filterSeriesByType(i,[Nn,Pn]),n),o.createLineChart(o.filterSeriesByType(i,[pi,ao]),n),o.createCandlestickChart(o.filterSeriesByType(i,Rn),n),o.createOHLCChart(o.filterSeriesByType(i,Ci),n),o.createBulletChart(o.filterSeriesByType(i,[En,ro]),n))},aggregateDateSeries:function(e){var t,i,o,r,a,s,l,c,h,u,p,d,g,f,x,v,m,y=this,w=y.srcSeries||y.series,b=[];for(l=0;w.length>l;l++){if(c=w[l],h=Wt({},c),t=y.seriesCategoryAxis(c),i=y.findPane(t.options.pane),gn(i,e)&&E(t.options.type,Yn))for(o=t.options.categories,r=t.categoryMap,u=h.data,h.data=p=[],a=0;o.length>a;a++){for(s=r[a],d=[],m=[],g=0;s.length>g;g++)f=s[g],x=P(c,f),v=x.value,un(v)&&d.push(x.value),m.push(c.data[f]);p[a]=d.length>1?n(d,c,m):u[s[0]]}b.push(h)}y.srcSeries=w,y.series=b},appendChart:function(e,t){for(var n=this,i=e.options.series,o=n.seriesCategoryAxis(i[0]),r=o.options.categories,a=Rt.max(0,d(i)-r.length);a--;)r.push("");n.valueAxisRangeTracker.update(e.valueAxisRanges),pt.fn.appendChart.call(n,e,t)},seriesPaneName:function(t){var n=this,i=n.options,o=t.axis,r=[].concat(i.valueAxis),a=e.grep(r,function(e){return e.name===o})[0],s=i.panes||[{}],l=(s[0]||{}).name||"default",c=(a||{}).pane||l;return c},seriesCategoryAxis:function(e){var t=this,n=e.categoryAxis,i=n?t.namedCategoryAxes[n]:t.categoryAxis;if(!i)throw Error("Unable to locate category axis with name "+n);return i},createBarChart:function(e,t){if(0!==e.length){var n=this,i=e[0],o=new F(n,{series:e,invertAxes:n.invertAxes,isStacked:i.stack&&e.length>1,gap:i.gap,spacing:i.spacing});n.appendChart(o,t)}},createBulletChart:function(e,t){if(0!==e.length){var n=this,i=e[0],o=new W(n,{series:e,invertAxes:n.invertAxes,gap:i.gap,spacing:i.spacing});n.appendChart(o,t)}},createLineChart:function(e,t){if(0!==e.length){var n=this,i=e[0],o=new Q(n,{invertAxes:n.invertAxes,isStacked:i.stack&&e.length>1,series:e});n.appendChart(o,t)}},createAreaChart:function(e,t){if(0!==e.length){var n=this,i=e[0],o=new Z(n,{invertAxes:n.invertAxes,isStacked:i.stack&&e.length>1,series:e});n.appendChart(o,t)}},createOHLCChart:function(e,t){if(0!==e.length){var n=this,i=e[0],o=new at(n,{invertAxes:n.invertAxes,gap:i.gap,series:e,spacing:i.spacing});n.appendChart(o,t)}},createCandlestickChart:function(e,t){if(0!==e.length){var n=this,i=e[0],o=new ot(n,{invertAxes:n.invertAxes,gap:i.gap,series:e,spacing:i.spacing});n.appendChart(o,t)}},axisRequiresRounding:function(e,t){var n,i,o=this,r=o.filterSeriesByType(o.series,[Pn,Nn,Ci,Rn]);for(n=0;r.length>n;n++)if(i=r[n].categoryAxis||"",i===e||!i&&0===t)return!0},createCategoryAxes:function(e){var t,n,i,o,r,a,s,l,c,h=this,u=h.invertAxes,p=[].concat(h.options.categoryAxis),d=[];for(t=0;p.length>t;t++)if(n=p[t],i=h.findPane(n.pane),gn(i,e)){if(a=n.name,o=n.categories||[],s=o[0]instanceof Date,r=n.type||"",n=Wt({vertical:u,axisCrossingValue:u?gi:0},n),un(n.justified)||(n.justified=h.inJustified()),h.axisRequiresRounding(a,t)&&(n.justified=!1,n.roundToBaseUnit=!0),l=!r&&s||E(r,Yn)?new So(n):new Co(n),a){if(h.namedCategoryAxes[a])throw Error("Category axis with name "+a+" is already defined");h.namedCategoryAxes[a]=l}l.axisIndex=t,d.push(l),h.appendAxis(l)}c=h.categoryAxis||d[0],h.categoryAxis=c,u?h.axisY=c:h.axisX=c},inJustified:function(){var e,t,n=this,i=n.series;for(e=0;i.length>e;e++)if(t=i[e],t.type!==An)return!1;return!0},createValueAxes:function(e){var t,n,i,o,r,a,s,l=this,c=l.valueAxisRangeTracker,h=c.query(),u=[].concat(l.options.valueAxis),p=l.invertAxes,d={vertical:!p},g=[];for(s=0;u.length>s;s++)if(t=u[s],n=l.findPane(t.pane),gn(n,e)){if(a=t.name,r=c.query(a)||h||{min:0,max:1},0===s&&r&&h&&(r.min=Rt.min(r.min,h.min),r.max=Rt.max(r.max,h.max)),i=new en(r.min,r.max,Wt({},d,t)),a){if(l.namedValueAxes[a])throw Error("Value axis with name "+a+" is already defined");l.namedValueAxes[a]=i}i.axisIndex=s,g.push(i),l.appendAxis(i)}o=l.valueAxis||g[0],l.valueAxis=o,p?l.axisX=o:l.axisY=o},click:function(t,n){var i,o,r,a=this,s=t._eventCoordinates(n),l=new tn(s.x,s.y),c=a.pointPane(l),h=[],u=[];if(c){for(i=c.axes,o=0;i.length>o;o++)r=i[o],r.getValue?z(u,r.getValue(l)):z(h,r.getCategory(l));0===h.length&&z(h,a.categoryAxis.getCategory(l)),h.length>0&&u.length>0&&t.trigger(Vi,{element:e(n.target),category:V(h),value:V(u)})}},pointPane:function(e){var t,n,i=this,o=i.panes;for(n=0;o.length>n;n++)if(t=o[n],t.contentBox.containsPoint(e))return t}}),gt=Ht.extend({init:function(){var e=this;e.axisRanges={}},update:function(e){var t,n,i,o=this,r=o.axisRanges;for(i in e)t=r[i],n=e[i],r[i]=t=t||{min:gi,max:fi},t.min=Rt.min(t.min,n.min),t.max=Rt.max(t.max,n.max)},reset:function(e){this.axisRanges[e]=t},query:function(e){return this.axisRanges[e]}}),ft=pt.extend({init:function(e,t){var n=this;n.namedXAxes={},n.namedYAxes={},n.xAxisRangeTracker=new gt,n.yAxisRangeTracker=new gt,pt.fn.init.call(n,e,t)},options:{xAxis:{},yAxis:{}},render:function(e){var t,n,i,o=this,r=o.groupSeriesByPane();for(e=e||o.panes,t=0;e.length>t;t++)n=e[t],i=r[n.options.name||"default"],i&&(o.createScatterChart(o.filterSeriesByType(i,Ri),n),o.createScatterLineChart(o.filterSeriesByType(i,Li),n),o.createBubbleChart(o.filterSeriesByType(i,Bn),n));o.createAxes(e)},appendChart:function(e,t){var n=this;n.xAxisRangeTracker.update(e.xAxisRanges),n.yAxisRangeTracker.update(e.yAxisRanges),pt.fn.appendChart.call(n,e,t)},removeAxis:function(e){var t=this,n=e.options.name;pt.fn.removeAxis.call(t,e),e.options.vertical?(t.yAxisRangeTracker.reset(n),delete t.namedYAxes[n]):(t.xAxisRangeTracker.reset(n),delete t.namedXAxes[n]),e===t.axisX&&delete t.axisX,e===t.axisY&&delete t.axisY},seriesPaneName:function(t){var n=this,i=n.options,o=t.xAxis,r=[].concat(i.xAxis),a=e.grep(r,function(e){return e.name===o})[0],s=t.yAxis,l=[].concat(i.yAxis),c=e.grep(l,function(e){return e.name===s})[0],h=i.panes||[{}],u=h[0].name||"default",p=(a||{}).pane||(c||{}).pane||u;return p},createScatterChart:function(e,t){var n=this;e.length>0&&n.appendChart(new et(n,{series:e}),t)},createScatterLineChart:function(e,t){var n=this;e.length>0&&n.appendChart(new tt(n,{series:e}),t)},createBubbleChart:function(e,t){var n=this;e.length>0&&n.appendChart(new nt(n,{series:e}),t)},createXYAxis:function(e,t,n){var i,o,r,a,s,l,c,h=this,u=e.name,p=t?h.namedYAxes:h.namedXAxes,d=t?h.yAxisRangeTracker:h.xAxisRangeTracker,g=d.query(),f=d.query(u)||g||{min:0,max:1},x=Wt({},e,{vertical:t}),v=h.series,m=[x.min,x.max];for(o=0;v.length>o;o++)if(r=v[o],a=r[t?"yAxis":"xAxis"],a==x.name||0===n&&!a){s=P(r,0).value,m.push(s[t?"y":"x"]);break}for(0===n&&g&&(f.min=Rt.min(f.min,g.min),f.max=Rt.max(f.max,g.max)),c=0;m.length>c;c++)if(m[c]instanceof Date){l=!0;break}if(i=E(x.type,Yn)||!x.type&&l?new To(f.min,f.max,x):new en(f.min,f.max,x),u){if(p[u])throw Error((t?"Y":"X")+" axis with name "+u+" is already defined");p[u]=i}return h.appendAxis(i),i},createAxes:function(e){var t,n=this,i=n.options,o=[].concat(i.xAxis),r=[],a=[].concat(i.yAxis),s=[];Dt(o,function(i){t=n.findPane(this.pane),gn(t,e)&&r.push(n.createXYAxis(this,!1,i))}),Dt(a,function(i){t=n.findPane(this.pane),gn(t,e)&&s.push(n.createXYAxis(this,!0,i))}),n.axisX=n.axisX||r[0],n.axisY=n.axisY||s[0]},click:function(t,n){var i,o,r,a,s=this,l=t._eventCoordinates(n),c=new tn(l.x,l.y),h=s.axes,u=h.length,p=[],d=[];for(i=0;u>i;i++)o=h[i],a=o.options.vertical?d:p,r=o.getValue(c),null!==r&&a.push(r);p.length>0&&d.length>0&&t.trigger(Vi,{element:e(n.target),x:V(p),y:V(d)})}}),xt=pt.extend({render:function(){var e=this,t=e.series;e.createPieChart(t)},createPieChart:function(e){var t=this,n=e[0],i=new lt(t,{series:e,padding:n.padding,startAngle:n.startAngle,connectors:n.connectors,legend:t.options.legend});t.appendChart(i)}}),vt=xt.extend({render:function(){var e=this,t=e.series;e.createDonutChart(t)},createDonutChart:function(e){var t=this,n=e[0],i=new ht(t,{series:e,padding:n.padding,connectors:n.connectors,legend:t.options.legend});t.appendChart(i)}}),mt=Zt.extend({options:{easing:"easeOutElastic",duration:si},setup:function(){var e,t=this.element,n=t.config;t.options.singleSegment&&(n=t),this.endRadius=n.r,e=this.startRadius=n.ir||0,n.r=e},step:function(e){var t=this,n=t.element,i=t.endRadius,o=n.config,r=t.startRadius;n.options.singleSegment&&(o=n),o.r=fn(r,i,e)}}),yt=Zt.extend({options:{easing:"easeOutElastic",duration:si},setup:function(){var e=this.element;e.endRadius=e.radius,e.radius=0},step:function(e){var t=this.element,n=t.endRadius;t.radius=fn(0,n,e)}}),wt=ln(Pn,qt),bt=ln(Ti,mt),At=ln(Bn,yt),_t=Ht.extend({init:function(e,t,n){var i=this;i.options=Wt({},i.options,n),i.view=e,i.viewElement=t,i._overlays=[]},options:{fill:lo,fillOpacity:.2,stroke:lo,strokeWidth:1,strokeOpacity:.2},show:function(e){var t,n,i,o,r,a=this,s=a.view,l=a.viewElement,c=a._overlays;for(a.hide(),a._points=e=[].concat(e),i=0;e.length>i;i++)o=e[i],r=o.options,(!r||r.highlight.visible)&&(o.highlightOverlay&&(t=o.highlightOverlay(s,a.options),t&&(n=s.renderElement(t),l.appendChild(n),c.push(n))),o.toggleHighlight&&o.toggleHighlight(s))},hide:function(){for(var e,t,n,i,o=this,r=o._points,a=o._overlays;a.length;)e=o._overlays.pop(),e.parentNode.removeChild(e);if(r)for(t=0;r.length>t;t++)n=r[t],i=n.options,(!i||i.highlight.visible)&&n.toggleHighlight&&n.toggleHighlight(o.view);o._points=[]}}),kt=Ht.extend({init:function(t,n){var i=this;i.options=Wt({},i.options,n),i.chartElement=t,i.chartPadding={top:parseInt(t.css("paddingTop"),10),left:parseInt(t.css("paddingLeft"),10)},i.template=kt.template,i.template||(i.template=kt.template=mn("<div class='"+Wn+"tooltip' "+"style='display:none; position: absolute; font: #= d.font #;"+"border: #= d.border.width #px solid;"+"opacity: #= d.opacity #; filter: alpha(opacity=#= d.opacity * 100 #);'>"+"</div>")),i.element=e(i.template(i.options)).appendTo(t),i._moveProxy=zt(i.move,i)},options:{border:{width:1},opacity:1,animation:{duration:Ki}},move:function(){var e=this,t=e.options,n=e.element,i=e._offset();e.visible||n.css({top:i.top,left:i.left}),n.stop(!0,!0).show().animate({left:i.left,top:i.top},t.animation.duration),e.visible=!0},_offset:function(){var t=this,n=t.element,i=t.anchor,o=t.chartPadding,r=vn(i.y+o.top),a=vn(i.x+o.left),s=Ot.support.zoomLevel(),l=e(window),c=window.pageYOffset||document.documentElement.scrollTop||0,h=window.pageXOffset||document.documentElement.scrollLeft||0;return c=t.chartElement.offset().top-c,h=t.chartElement.offset().left-h,r+=t._currentPosition(r+c,n.outerHeight(),l.outerHeight()/s),a+=t._currentPosition(a+h,n.outerWidth(),l.outerWidth()/s),{top:r,left:a}},setStyle:function(e){this.element.css({backgroundColor:e.background,borderColor:e.border.color||e.background,font:e.font,color:e.color,opacity:e.opacity,borderWidth:e.border.width})},show:function(){var e=this;e.showTimeout=setTimeout(e._moveProxy,$i)},hide:function(){var e=this;clearTimeout(e.showTimeout),e.visible&&(e._hideElement(),e.point=null,e.visible=!1,e.index=null)},_hideElement:function(){this.element.fadeOut()},_pointContent:function(e){var t,n,i=this,o=Wt({},i.options,e.options.tooltip);return un(e.value)&&(t=""+e.value),o.template?(n=Ft(o.template),t=n({value:e.value,category:e.category,series:e.series,dataItem:e.dataItem,percentage:e.percentage})):o.format&&(t=e.formatValue(o.format)),t},_pointAnchor:function(e){var t=this,n=t.element;return e.tooltipAnchor(n.outerWidth(),n.outerHeight())},_currentPosition:function(e,t,n){var i=0;return e+t>n&&(i=n-(e+t)),0>e&&(i=-e),i},_updateStyle:function(e,t){if(un(e.background)||(e.background=t.color),!un(e.color)){var n=this,i=n.element,o=new $t(e.background).percBrightness();o>180?i.addClass(Wn+eo):i.removeClass(Wn+eo)}}}),Ct=kt.extend({show:function(e){var t=this,n=Wt({},t.options,e.options.tooltip);e&&(t.element.html(t._pointContent(e)),t.anchor=t._pointAnchor(e),t._updateStyle(n,e.options),t.setStyle(n),kt.fn.show.call(t,e))}}),Pt=kt.extend({init:function(e,t,n){var i=this;kt.fn.init.call(i,e,n),i.plotArea=t},options:{sharedTemplate:"<table><th colspan='2'>#= categoryText #</th># for(var i = 0; i < points.length; i++) { ## var point = points[i]; #<tr># if(point.series.name) { #<td>#= point.series.name #:</td> # } #<td>#= content(point) #</td></tr># } #</table>",categoryFormat:"{0:d}"},showAt:function(e,t){var n,i=this,o=i.options,r=i.plotArea,a=r.categoryAxis,s=a.getCategoryIndex(t),l=a.getCategory(t),c=a.getSlot(s);n=i._content(e,l),i.element.html(n),i.anchor=i._slotAnchor(t,c),i._updateStyle(o,e[0].options),i.setStyle(o),kt.fn.show.call(i)},_slotAnchor:function(e,t){var n,i=this,o=i.plotArea,r=o.categoryAxis,a=e.y-i.element.height()/2;return n=r.options.vertical?tn(e.x,a):tn(t.center().x,a)},_content:function(e,t){var n,i,o=this;return n=Ot.template(o.options.sharedTemplate),i=n({points:e,category:t,categoryText:hn(o.options.categoryFormat,t),content:o._pointContent})}}),St=Qt.extend({init:function(e,t){var n=this;Qt.fn.init.call(n,t),n.axis=e,n.options.id||(n.options.id=yn()),n._visible=!1,n.stickyMode=e instanceof Co},options:{color:In,width:1,zIndex:-1,tooltip:{visible:!1}},repaint:function(){var e=this,t=e.element;e.getViewElements(e._view),t=e.element,t.refresh(pn(e.options.id))},showAt:function(e){var t=this;t.updateAxisReference(),t._visible=!0,t.point=e,t.repaint(),t.options.tooltip.visible&&(t.tooltip||(t.tooltip=new Tt(t,Wt({},t.options.tooltip,{stickyMode:t.stickyMode}))),t.tooltip.showAt(e))},hide:function(){var e=this;e._visible&&(e._visible=!1,e.repaint(),e.tooltip&&e.tooltip.hide())},linePoints:function(){var e,t,n,i=this,o=i.axis,r=o.options.vertical,a=i.getBox(),s=i.point,l=r?ho:co;return t=tn(a.x1,a.y1),n=r?tn(a.x2,a.y1):tn(a.x1,a.y2),s&&(i.stickyMode?(e=o.getSlot(o.getCategoryIndex(s)),t[l]=n[l]=e.center()[l]):t[l]=n[l]=s[l]),i.box=a,[t,n]},getBox:function(){var e,t,n,i=this,o=i.axis,r=o.pane.axes,a=r.length,s=o.options.vertical,l=o.lineBox().clone(),c=s?co:ho;for(n=0;a>n;n++)t=r[n],t.options.vertical!=s&&(e?e.wrap(t.lineBox()):e=t.lineBox().clone());return l[c+1]=e[c+1],l[c+2]=e[c+2],l},getViewElements:function(e){var t=this,n=t.options,i=[];return t.points=t.linePoints(),t.element=e.createPolyline(t.points,!1,{id:n.id,stroke:n.color,strokeWidth:n.width,strokeOpacity:n.opacity,dashType:n.dashType,zIndex:n.zIndex,visible:t._visible}),i.push(t.element),t._view=e,cn(i,Qt.fn.getViewElements.call(t,e)),i},updateAxisReference:function(){var e,t,n=this,i=n.axis,o=i.plotArea,r=o.axes;for(t=0;r.length>t;t++)if(e=r[t],un(i.axisIndex)&&i instanceof en!=e instanceof Co&&i.axisIndex===e.axisIndex){n.axis=e;break}}}),Tt=kt.extend({init:function(e,t){var n=this,i=e.axis.getRoot().parent.element;n.crosshair=e,kt.fn.init.call(n,i,Wt({},n.options,{background:e.axis.plotArea.options.seriesColors[0]},t)),n._updateStyle(n.options,{}),n.setStyle(n.options)},options:{padding:10},showAt:function(e){var t=this,n=t.element;t.point=e,t.element.html(t.content(e)),t.anchor=t.getAnchor(n.outerWidth(),n.outerHeight()),t.move()},move:function(){var e=this,t=e.element,n=e._offset();t.css({top:n.top,left:n.left}).show()},content:function(e){var t,n,i,o=this,r=o.options,a=o.crosshair.axis,s=a.options;return n=t=a[r.stickyMode?"getCategory":"getValue"](e),r.template?(i=Ft(r.template),t=i({value:n})):r.format?t=hn(r.format,n):s.type===Yn&&(t=hn(s.labels.dateFormats[s.baseUnit],n)),t},getAnchor:function(e,t){var n,i,o=this,r=o.options,a=r.position,s=o.crosshair.axis.options.vertical,l=o.crosshair.points,c=l[0],h=l[1],u=e/2,p=t/2,d=r.padding;return s?a===ui?(n=c.x-e-d,i=c.y-p):(n=h.x+d,i=h.y-p):a===Dn?(n=h.x-u,i=h.y+d):(n=c.x-u,i=c.y-t-d),tn(n,i)},hide:function(){this.element.hide(),this.point=null}}),It={max:function(e){var t=Rt.max.apply(Rt,e);return isNaN(t)?o(e):t},min:function(e){var t=Rt.min.apply(Rt,e);return isNaN(t)?i(e):t},sum:function(e){var t,n,i=e.length,o=0;for(t=0;i>t;t++)n=e[t],un(n)&&!isNaN(n)&&(o+=n);return o},count:function(e){return e.length},avg:function(e){return It.sum(e)/It.count(e)}},Vt=Ut.extend({init:function(t,n,i){var o,r,a=this,s=t.element,l=n.lineBox(),c=a.getValueAxis(n),h=c.lineBox(),u="."+Wn;Ut.fn.init.call(a),a.options=Wt({},a.options,i),i=a.options,a.chart=t,a.chartElement=s,a.categoryAxis=n,a._dateAxis=a.categoryAxis instanceof So,a.valueAxis=c,a._dateAxis&&Wt(i,{min:x(i.min),max:x(i.max),from:x(i.from),to:x(i.to)}),a.template=Vt.template,a.template||(a.template=Vt.template=mn("<div class='"+Wn+"selector' "+"style='width: #= d.width #px; height: #= d.height #px;"+" top: #= d.offset.top #px; left: #= d.offset.left #px;'>"+"<div class='"+Wn+"mask'></div>"+"<div class='"+Wn+"mask'></div>"+"<div class='"+Wn+"selection'>"+"<div class='"+Wn+"handle "+Wn+"leftHandle'><div></div></div>"+"<div class='"+Wn+"handle "+Wn+"rightHandle'><div></div></div>"+"</div></div>")),r={left:parseInt(s.css("paddingLeft"),10),right:parseInt(s.css("paddingTop"),10)},a.options=Wt({},{width:l.width(),height:h.height(),padding:r,offset:{left:h.x2+r.left,top:h.y1+r.right},from:i.min,to:i.max},i),a.options.visible&&(a.wrapper=o=e(a.template(a.options)).appendTo(s),a.selection=o.find(u+"selection"),a.leftMask=o.find(u+"mask").first(),a.rightMask=o.find(u+"mask").last(),a.leftHandle=o.find(u+"leftHandle"),a.rightHandle=o.find(u+"rightHandle"),a.options.selection={border:{left:parseFloat(a.selection.css("border-left-width"),10),right:parseFloat(a.selection.css("border-right-width"),10)}},a.leftHandle.css("top",(a.selection.height()-a.leftHandle.height())/2),a.rightHandle.css("top",(a.selection.height()-a.rightHandle.height())/2),a.set(a._index(i.from),a._index(i.to)),a.bind(a.events,a.options),a.wrapper[0].style.cssText=a.wrapper[0].style.cssText,a.wrapper.on(ki,zt(a._mousewheel,a)),Ot.UserEvents?a.userEvents=new Ot.UserEvents(a.wrapper,{global:!0,threshold:5,stopPropagation:!0,multiTouch:!0,start:zt(a._start,a),move:zt(a._move,a),end:zt(a._end,a),tap:zt(a._tap,a),gesturestart:zt(a._gesturechange,a),gesturechange:zt(a._gesturechange,a)}):a.leftHandle.add(a.rightHandle).removeClass(Wn+"handle"))},events:[zi,Oi,Hi],options:{visible:!0,mousewheel:{zoom:Vn},min:fi,max:gi},destroy:function(){var e=this,t=e.userEvents;t&&t.destroy()},_rangeEventArgs:function(e){var t=this;return{axis:t.categoryAxis.options,from:t._value(e.from),to:t._value(e.to)}},_start:function(t){var n,i=this,o=i.options,r=e(t.event.target);!i._state&&r&&(i.chart._unsetActivePoint(),i._state={moveTarget:r.parents(".k-handle").add(r).first(),startLocation:t.x?t.x.location:0,range:{from:i._index(o.from),to:i._index(o.to)}},n=i._rangeEventArgs({from:i._index(o.from),to:i._index(o.to)}),i.trigger(zi,n)&&(i.userEvents.cancel(),i._state=null))},_move:function(e){if(this._state){var t=this,n=t._state,i=t.options,o=t.categoryAxis.options.categories,r=t._index(i.from),a=t._index(i.to),s=t._index(i.min),l=t._index(i.max),c=n.startLocation-e.x.location,h=n.range,u={from:h.from,to:h.to},p=h.to-h.from,d=n.moveTarget,g=t.wrapper.width()/(o.length-1),f=Rt.round(c/g);d&&(e.preventDefault(),d.is(".k-selection")?(h.from=Rt.min(Rt.max(s,r-f),l-p),h.to=Rt.min(h.from+p,l)):d.is(".k-leftHandle")?(h.from=Rt.min(Rt.max(s,r-f),l-1),h.to=Rt.max(h.from+1,h.to)):d.is(".k-rightHandle")&&(h.to=Rt.min(Rt.max(s+1,a-f),l),h.from=Rt.min(h.to-1,h.from)),(h.from!==u.from||h.to!==u.to)&&(t.move(h.from,h.to),t.trigger(Oi,t._rangeEventArgs(h))))}},_end:function(){var e=this,t=e._state.range;delete e._state,e.set(t.from,t.to),e.trigger(Hi,e._rangeEventArgs(t))},_gesturechange:function(e){if(this._state){var t=this,n=t.chart,i=t._state,o=t.options,r=t.categoryAxis,a=i.range,s=n._toModelCoordinates(e.touches[0].x.location).x,l=n._toModelCoordinates(e.touches[1].x.location).x,c=Rt.min(s,l),h=Rt.max(s,l);e.preventDefault(),i.moveTarget=null,a.from=r.getCategoryIndex(new Yt.Point2D(c))||o.min,a.to=r.getCategoryIndex(new Yt.Point2D(h))||o.max,t.move(a.from,a.to)}},_tap:function(e){var t=this,n=t.options,i=t.chart._eventCoordinates(e),o=t.categoryAxis,r=o.getCategoryIndex(new Yt.Point2D(i.x,o.box.y1)),a=t._index(n.from),s=t._index(n.to),l=t._index(n.min),c=t._index(n.max),h=s-a,u=a+h/2,p=Rt.round(u-r),d={},g=3===e.event.which;t._state||g||(e.preventDefault(),t.chart._unsetActivePoint(),o.options.justified||p--,d.from=Rt.min(Rt.max(l,a-p),c-h),d.to=Rt.min(d.from+h,c),t._start(e),t._state&&(t._state.range=d,t.trigger(Oi,t._rangeEventArgs(d)),t._end()))},_mousewheel:function(e){var t,n=this,i=n.options,o=M(e);n._start({event:{target:n.selection}}),n._state&&(t=n._state.range,e.preventDefault(),e.stopPropagation(),Rt.abs(o)>1&&(o*=go),i.mousewheel.reverse&&(o*=-1),n.expand(o)&&n.trigger(Oi,{axis:n.categoryAxis.options,delta:o,originalEvent:e,from:n._value(t.from),to:n._value(t.to)}),n._mwTimeout&&clearTimeout(n._mwTimeout),n._mwTimeout=setTimeout(function(){n._end()},_i))},_index:function(e){var t=this,n=t.categoryAxis,i=n.options.categories,o=e;return e instanceof Date&&(o=O(i,e),!n.options.justified&&e>xn(i)&&(o+=1)),o},_value:function(e){var t=this,n=this.categoryAxis,i=n.options.categories,o=e;return t._dateAxis&&(o=e>i.length-1?t.options.max:i[e]),o},_slot:function(e){var t=this,n=this.categoryAxis;return n.getSlot(t._index(e))},move:function(e,t){var n,i,o,r,a=this,s=a.options,l=s.offset,c=s.padding,h=s.selection.border;o=a._slot(e),n=vn(o.x1-l.left+c.left),a.leftMask.width(n),a.selection.css("left",n),o=a._slot(t),i=vn(s.width-(o.x1-l.left+c.left)),a.rightMask.width(i),r=s.width-i,r!=s.width&&(r+=h.right),a.rightMask.css("left",r),a.selection.width(Rt.max(s.width-(n+i)-h.right,0))},set:function(e,t){var n=this,i=n.options,o=n._index(i.min),r=n._index(i.max);e=D(n._index(e),o,r),t=D(n._index(t),e+1,r),i.visible&&n.move(e,t),i.from=n._value(e),i.to=n._value(t)},expand:function(e){var n=this,i=n.options,o=n._index(i.min),r=n._index(i.max),a=i.mousewheel.zoom,s=n._index(i.from),l=n._index(i.to),c={from:s,to:l},h=Wt({},c);return n._state&&(c=n._state.range),a!==Di&&(c.from=D(D(s-e,0,l-1),o,r)),a!==ui&&(c.to=D(D(l+e,c.from+1,r),o,r)),c.from!==h.from||c.to!==h.to?(n.set(c.from,c.to),!0):t},getValueAxis:function(e){var t,n,i=e.pane.axes,o=i.length;for(t=0;o>t;t++)if(n=i[t],n.options.vertical!==e.options.vertical)return n}}),Lt(e.easing,{easeOutElastic:function(e,t,n,i){var o=1.70158,r=0,a=i;return 0===e?n:1===e?n+i:(r||(r=.5),Rt.abs(i)>a?(a=i,o=r/4):o=r/(2*Rt.PI)*Rt.asin(i/a),a*Rt.pow(2,-10*e)*Rt.sin((1*e-o)*1.1*Rt.PI/r)+i+n)}}),Yt.ui.plugin(Ao),Wt(Yt,{Aggregates:It,AreaChart:Z,Bar:Bo,BarAnimationDecorator:wt,BarChart:F,BarLabel:_o,BubbleAnimationDecorator:At,BubbleChart:nt,CandlestickChart:ot,Candlestick:it,CategoricalPlotArea:dt,CategoryAxis:Co,ClusterLayout:Io,Crosshair:St,CrosshairTooltip:Tt,DateCategoryAxis:So,DateValueAxis:To,DonutChart:ht,DonutPlotArea:vt,DonutSegment:ct,Highlight:_t,SharedTooltip:Pt,Legend:ko,LineChart:Q,LinePoint:G,Pane:ut,PieAnimation:mt,PieAnimationDecorator:bt,PieChart:lt,PiePlotArea:xt,PieSegment:st,ScatterChart:et,ScatterLineChart:tt,Selection:Vt,ShapeElement:Y,StackLayout:Vo,Tooltip:Ct,OHLCChart:at,OHLCPoint:rt,XYPlotArea:ft,addDuration:m,axisGroupBox:B,validNumbers:H,bindPoint:P,categoriesCount:d,ceilDate:b,duration:k,floorDate:w,lteDateIndex:O,sparseArrayLimits:r,toDate:x,toTime:v})})(window.kendo.jQuery)});