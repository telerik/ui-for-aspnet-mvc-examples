/** 
 * Kendo UI v2016.3.914 (http://www.telerik.com/kendo-ui)                                                                                                                                               
 * Copyright 2016 Telerik AD. All rights reserved.                                                                                                                                                      
 *                                                                                                                                                                                                      
 * Kendo UI commercial licenses may be obtained at                                                                                                                                                      
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  
 * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       

*/
!function(t,define){define("kendo.groupable.min",["kendo.core.min","kendo.draganddrop.min"],t)}(function(){return function(t,e){function r(t){return t.position().top+3}var n=window.kendo,a=n.ui.Widget,i=t.proxy,o=!1,d=".kendoGroupable",s="change",g=n.template('<div class="k-group-indicator" data-#=data.ns#field="${data.field}" data-#=data.ns#title="${data.title || ""}" data-#=data.ns#dir="${data.dir || "asc"}"><a href="\\#" class="k-link"><span class="k-icon k-i-sarrow-${(data.dir || "asc") == "asc" ? "n" : "s"}">(sorted ${(data.dir || "asc") == "asc" ? "ascending": "descending"})</span>${data.title ? data.title: data.field}</a><a class="k-button k-button-icon k-button-bare"><span class="k-icon k-i-group-delete"></span></a></div>',{useWithBlock:!1}),l=function(e){var r=e.attr(n.attr("title"));return r&&(r=n.htmlEncode(r)),t('<div class="k-header k-drag-clue" />').css({width:e.width(),paddingLeft:e.css("paddingLeft"),paddingRight:e.css("paddingRight"),lineHeight:e.height()+"px",paddingTop:e.css("paddingTop"),paddingBottom:e.css("paddingBottom")}).html(r||e.attr(n.attr("field"))).prepend('<span class="k-icon k-drag-status k-i-denied" />')},u=t('<div class="k-grouping-dropclue"/>'),c=a.extend({init:function(g,c){var p,f,h=this,m=n.guid(),k=i(h._intializePositions,h),v=h._dropCuePositions=[];a.fn.init.call(h,g,c),o=n.support.isRtl(g),f=o?"right":"left",h.draggable=p=h.options.draggable||new n.ui.Draggable(h.element,{filter:h.options.draggableElements,hint:l,group:m}),h.groupContainer=t(h.options.groupContainer,h.element).kendoDropTarget({group:p.options.group,dragenter:function(t){h._canDrag(t.draggable.currentTarget)&&(t.draggable.hint.find(".k-drag-status").removeClass("k-i-denied").addClass("k-i-add"),u.css("top",r(h.groupContainer)).css(f,0).appendTo(h.groupContainer))},dragleave:function(t){t.draggable.hint.find(".k-drag-status").removeClass("k-i-add").addClass("k-i-denied"),u.remove()},drop:function(e){var r,a=e.draggable.currentTarget,i=a.attr(n.attr("field")),d=a.attr(n.attr("title")),s=h.indicator(i),g=h._dropCuePositions,l=g[g.length-1];(a.hasClass("k-group-indicator")||h._canDrag(a))&&(l?(r=h._dropCuePosition(n.getOffset(u).left+parseInt(l.element.css("marginLeft"),10)*(o?-1:1)+parseInt(l.element.css("marginRight"),10)),r&&h._canDrop(t(s),r.element,r.left)&&(r.before?r.element.before(s||h.buildIndicator(i,d)):r.element.after(s||h.buildIndicator(i,d)),h._change())):(h.groupContainer.append(h.buildIndicator(i,d)),h._change()))}}).kendoDraggable({filter:"div.k-group-indicator",hint:l,group:p.options.group,dragcancel:i(h._dragCancel,h),dragstart:function(t){var e=t.currentTarget,n=parseInt(e.css("marginLeft"),10),a=e.position(),i=o?a.left-n:a.left+e.outerWidth();k(),u.css({top:r(h.groupContainer),left:i}).appendTo(h.groupContainer),this.hint.find(".k-drag-status").removeClass("k-i-denied").addClass("k-i-add")},dragend:function(){h._dragEnd(this)},drag:i(h._drag,h)}).on("click"+d,".k-button",function(e){e.preventDefault(),h._removeIndicator(t(this).parent())}).on("click"+d,".k-link",function(e){var r=t(this).parent(),a=h.buildIndicator(r.attr(n.attr("field")),r.attr(n.attr("title")),"asc"==r.attr(n.attr("dir"))?"desc":"asc");r.before(a).remove(),h._change(),e.preventDefault()}),p.bind(["dragend","dragcancel","dragstart","drag"],{dragend:function(){h._dragEnd(this)},dragcancel:i(h._dragCancel,h),dragstart:function(t){var r,n,a;return h.options.allowDrag||h._canDrag(t.currentTarget)?(k(),v.length?(r=v[v.length-1].element,n=parseInt(r.css("marginRight"),10),a=r.position().left+r.outerWidth()+n):a=0,e):(t.preventDefault(),e)},drag:i(h._drag,h)}),h.dataSource=h.options.dataSource,h.dataSource&&h._refreshHandler?h.dataSource.unbind(s,h._refreshHandler):h._refreshHandler=i(h.refresh,h),h.dataSource&&(h.dataSource.bind("change",h._refreshHandler),h.refresh())},refresh:function(){var e=this,r=e.dataSource;e.groupContainer&&e.groupContainer.empty().append(t.map(r.group()||[],function(r){var a=r.field,i=n.attr("field"),o=e.element.find(e.options.filter).filter(function(){return t(this).attr(i)===a});return e.buildIndicator(r.field,o.attr(n.attr("title")),r.dir)}).join("")),e._invalidateGroupContainer()},destroy:function(){var t=this;a.fn.destroy.call(t),t.groupContainer.off(d),t.groupContainer.data("kendoDropTarget")&&t.groupContainer.data("kendoDropTarget").destroy(),t.groupContainer.data("kendoDraggable")&&t.groupContainer.data("kendoDraggable").destroy(),t.options.draggable||t.draggable.destroy(),t.dataSource&&t._refreshHandler&&(t.dataSource.unbind("change",t._refreshHandler),t._refreshHandler=null),t.groupContainer=t.element=t.draggable=null},events:["change"],options:{name:"Groupable",filter:"th",draggableElements:"th",messages:{empty:"Drag a column header and drop it here to group by that column"}},indicator:function(e){var r=t(".k-group-indicator",this.groupContainer);return t.grep(r,function(r){return t(r).attr(n.attr("field"))===e})[0]},buildIndicator:function(t,e,r){return g({field:t.replace(/"/g,"'"),dir:r,title:e,ns:n.ns})},descriptors:function(){var e,r,a,i,o,d=this,s=t(".k-group-indicator",d.groupContainer);return e=d.element.find(d.options.filter).map(function(){var e=t(this),a=e.attr(n.attr("aggregates")),d=e.attr(n.attr("field"));if(a&&""!==a)for(r=a.split(","),a=[],i=0,o=r.length;o>i;i++)a.push({field:d,aggregate:r[i]});return a}).toArray(),t.map(s,function(r){return r=t(r),a=r.attr(n.attr("field")),{field:a,dir:r.attr(n.attr("dir")),aggregates:e||[]}})},_removeIndicator:function(t){var e=this;t.remove(),e._invalidateGroupContainer(),e._change()},_change:function(){var t,r=this;if(r.dataSource){if(t=r.descriptors(),r.trigger("change",{groups:t}))return r.refresh(),e;r.dataSource.group(t)}},_dropCuePosition:function(e){var r,n,a,i,d,s=this._dropCuePositions;if(u.is(":visible")&&0!==s.length)return e=Math.ceil(e),r=s[s.length-1],n=r.left,a=r.right,i=parseInt(r.element.css("marginLeft"),10),d=parseInt(r.element.css("marginRight"),10),e>=a&&!o||n>e&&o?e={left:r.element.position().left+(o?-i:r.element.outerWidth()+d),element:r.element,before:!1}:(e=t.grep(s,function(t){return e>=t.left&&t.right>=e||o&&e>t.right})[0],e&&(e={left:o?e.element.position().left+e.element.outerWidth()+d:e.element.position().left-i,element:e.element,before:!0})),e},_drag:function(t){var e=this._dropCuePosition(t.x.location);e&&u.css({left:e.left,right:"auto"})},_canDrag:function(t){var e=t.attr(n.attr("field"));return"false"!=t.attr(n.attr("groupable"))&&e&&(t.hasClass("k-group-indicator")||!this.indicator(e))},_canDrop:function(t,e,r){var n=t.next(),a=t[0]!==e[0]&&(!n[0]||e[0]!==n[0]||!o&&r>n.position().left||o&&r<n.position().left);return a},_dragEnd:function(e){var r=this,a=e.currentTarget.attr(n.attr("field")),i=r.indicator(a);e!==r.options.draggable&&!e.dropped&&i&&r._removeIndicator(t(i)),r._dragCancel()},_dragCancel:function(){u.remove(),this._dropCuePositions=[]},_intializePositions:function(){var e,r=this,a=t(".k-group-indicator",r.groupContainer);r._dropCuePositions=t.map(a,function(r){return r=t(r),e=n.getOffset(r).left,{left:parseInt(e,10),right:parseInt(e+r.outerWidth(),10),element:r}})},_invalidateGroupContainer:function(){var t=this.groupContainer;t&&t.is(":empty")&&t.html(this.options.messages.empty)}});n.ui.plugin(c)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(t,e,r){(r||e)()});
//# sourceMappingURL=kendo.groupable.min.js.map
