/*
* Kendo UI v2015.2.805 (http://www.telerik.com/kendo-ui)
* Copyright 2015 Telerik AD. All rights reserved.
*
* Kendo UI commercial licenses may be obtained at
* http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
!function(t,define){define(["./kendo.dataviz.chart.min"],t)}(function(){return function(t,e){function n(){}function i(t){return n.prototype=t,new n}var o,r=window.kendo,s=r.Class,a=r.Observable,l=r.deepExtend,c=Math,h=t.proxy,d=r.util,u=d.last,f=d.renderTemplate,p=r.dataviz,g=d.defined,m=p.filterSeriesByType,v=r.template,_=p.ui.Chart,w=p.Selection,y=p.addDuration,b=d.limitValue,x=p.lteDateIndex,k=p.toDate,C=p.toTime,S=28,T="change",D="k-",A="drag",P="dragEnd",M="_navigator",E=M,I=p.EQUALLY_SPACED_SERIES,B=3,L="zoom",z="zoomEnd",R=_.extend({init:function(e,n){t(e).addClass(D+"chart"),_.fn.init.call(this,e,n)},_applyDefaults:function(t,e){var n=this,i=n.element.width()||p.DEFAULT_WIDTH,o={seriesDefaults:{categoryField:t.dateField},axisDefaults:{categoryAxis:{name:"default",majorGridLines:{visible:!1},labels:{step:2},majorTicks:{visible:!1},maxDateGroups:c.floor(i/S)}}};e&&(e=l({},e,o)),n._navigator||F.setup(t,e),_.fn._applyDefaults.call(n,t,e)},_initDataSource:function(t){var e,n,i=t||{},o=i.dataSource,r=o&&o.serverFiltering,s=[].concat(i.categoryAxis)[0],a=i.navigator||{},c=a.select,h=c&&c.from&&c.to;r&&h&&(e=[].concat(o.filter||[]),n=new p.DateCategoryAxis(l({baseUnit:"fit"},s,{categories:[c.from,c.to]})),o.filter=F.buildFilter(n.range().min,c.to).concat(e)),_.fn._initDataSource.call(this,t)},options:{name:"StockChart",dateField:"date",axisDefaults:{categoryAxis:{type:"date",baseUnit:"fit",justified:!0},valueAxis:{narrowRange:!0,labels:{format:"C"}}},navigator:{select:{},seriesDefaults:{markers:{visible:!1},tooltip:{visible:!0,template:"#= kendo.toString(category, 'd') #"},line:{width:2}},hint:{},visible:!0},tooltip:{visible:!0},legend:{visible:!1}},_resize:function(){var t=this.options.transitions;this.options.transitions=!1,this._fullRedraw(),this.options.transitions=t},_redraw:function(){var t=this,e=t._navigator;!this._dirty()&&e&&e.dataSource?e.redrawSlaves():t._fullRedraw()},_dirty:function(){var e=this.options,n=[].concat(e.series,e.navigator.series),i=t.grep(n,function(t){return t&&t.visible}).length,o=this._seriesCount!==i;return this._seriesCount=i,o},_fullRedraw:function(){var t=this,e=t._navigator;e||(e=t._navigator=new F(t)),e._setRange(),_.fn._redraw.call(t),e._initSelection()},_onDataChanged:function(){var t=this;_.fn._onDataChanged.call(t),t._dataBound=!0},_bindCategoryAxis:function(t,e,n){var i,o=this,r=o.options.categoryAxis,s=r.length;if(_.fn._bindCategoryAxis.apply(this,arguments),t.name===E)for(;s>n;)i=r[n++],i.pane==M&&(i.categories=t.categories)},_trackSharedTooltip:function(t){var e=this,n=e._plotArea,i=n.paneByPoint(t);i&&i.options.name===M?e._unsetActivePoint():_.fn._trackSharedTooltip.call(e,t)},destroy:function(){var t=this;t._navigator.destroy(),_.fn.destroy.call(t)}}),F=a.extend({init:function(t){var e=this;e.chart=t,e.options=l({},e.options,t.options.navigator),e._initDataSource(),g(e.options.hint.visible)||(e.options.hint.visible=e.options.visible),t.bind(A,h(e._drag,e)),t.bind(P,h(e._dragEnd,e)),t.bind(L,h(e._zoom,e)),t.bind(z,h(e._zoomEnd,e))},options:{},_initDataSource:function(){var t=this,e=t.options,n=e.autoBind,i=e.dataSource;g(n)||(n=t.chart.options.autoBind),t._dataChangedHandler=h(t._onDataChanged,t),i&&(t.dataSource=r.data.DataSource.create(i).bind(T,t._dataChangedHandler),n&&t.dataSource.fetch())},_onDataChanged:function(){var t,e,n,i,o,r=this,s=r.chart,a=s.options.series,l=a.length,c=s.options.categoryAxis,h=c.length,d=r.dataSource.view();for(t=0;l>t;t++)n=a[t],n.axis==E&&s._isBindable(n)&&(n.data=d);for(e=0;h>e;e++)i=c[e],i.pane==M&&(i.name==E?(s._bindCategoryAxis(i,d,e),o=i.categories):i.categories=o);s._model&&(r.redraw(),r.filterAxes(),(!s.options.dataSource||s.options.dataSource&&s._dataBound)&&r.redrawSlaves())},destroy:function(){var t=this,e=t.dataSource;e&&e.unbind(T,t._dataChangeHandler),t.selection&&t.selection.destroy()},redraw:function(){this._redrawSelf(),this._initSelection()},_initSelection:function(){var e=this,n=e.chart,r=e.options,s=e.mainAxis(),a=i(s),l=s.range(),c=l.min,h=l.max,d=s.options.categories,u=e.options.select,f=e.selection,p=k(u.from),g=k(u.to);0!==d.length&&(f&&(f.destroy(),f.wrapper.remove()),a.box=s.box,f=e.selection=new w(n,a,{min:c,max:h,from:p,to:g,selectStart:t.proxy(e._selectStart,e),select:t.proxy(e._select,e),selectEnd:t.proxy(e._selectEnd,e),mousewheel:{zoom:"left"}}),r.hint.visible&&(e.hint=new o(n.element,{min:c,max:h,template:r.hint.template,format:r.hint.format})))},_setRange:function(){var t,e=this.chart._createPlotArea(!0),n=e.namedCategoryAxes[E],i=n.options,o=n.range(),r=o.min,s=y(o.max,i.baseUnitStep,i.baseUnit),a=this.options.select||{},l=k(a.from)||r;r>l&&(l=r),t=k(a.to)||s,t>s&&(t=s),this.options.select={from:l,to:t},this.filterAxes()},_redrawSelf:function(t){var e=this.chart._plotArea;e&&e.redraw(u(e.panes),t)},redrawSlaves:function(){var t=this,e=t.chart,n=e._plotArea,i=n.panes.slice(0,-1);n.srcSeries=e.options.series,n.redraw(i)},_drag:function(t){var e,n,i,o=this,r=o.chart,s=r._eventCoordinates(t.originalEvent),a=o.mainAxis(),l=a.range(),c=a.pane.box.containsPoint(s),h=r._plotArea.categoryAxis,d=t.axisRanges[h.options.name],u=o.options.select,f=o.selection;d&&!c&&f&&(e=u.from&&u.to?C(u.to)-C(u.from):C(f.options.to)-C(f.options.from),n=k(b(C(d.min),l.min,C(l.max)-e)),i=k(b(C(n)+e,C(l.min)+e,l.max)),o.options.select={from:n,to:i},o._liveDrag()&&(o.filterAxes(),o.redrawSlaves()),f.set(n,i),o.showHint(n,i))},_dragEnd:function(){var t=this;t.filterAxes(),t.filterDataSource(),t.redrawSlaves(),t.hint&&t.hint.hide()},_liveDrag:function(){var t=r.support,e=t.touch,n=t.browser,i=n.mozilla,o=n.msie&&9>n.version;return!e&&!i&&!o},readSelection:function(){var t=this,e=t.selection,n=e.options,i=t.options.select;i.from=n.from,i.to=n.to},filterAxes:function(){var t,e,n=this,i=n.options.select||{},o=n.chart,r=o.options.categoryAxis,s=i.from,a=i.to;for(t=0;r.length>t;t++)e=r[t],e.pane!==M&&(e.min=k(s),e.max=k(a))},filterDataSource:function(){var t,e=this,n=e.options.select||{},i=e.chart,o=i.dataSource,r=o&&o.options.serverFiltering;e.dataSource&&r&&(t=new p.DateCategoryAxis(l({baseUnit:"fit"},i.options.categoryAxis[0],{categories:[n.from,n.to]})).options,o.filter(F.buildFilter(y(t.min,-t.baseUnitStep,t.baseUnit),y(t.max,t.baseUnitStep,t.baseUnit))))},_zoom:function(t){var e,n,i=this,o=i.chart,s=t.delta,a=o._plotArea.categoryAxis,l=i.options.select,h=i.selection,d=i.mainAxis().options.categories;h&&(e=x(h.options.from,d),n=x(h.options.to,d),t.originalEvent.preventDefault(),c.abs(s)>1&&(s*=B),n-e>1?(h.expand(s),i.readSelection()):(a.options.min=l.from,l.from=a.scaleRange(-t.delta).min),r.support.touch||(i.filterAxes(),i.redrawSlaves()),h.set(l.from,l.to),i.showHint(i.options.select.from,i.options.select.to))},_zoomEnd:function(t){this._dragEnd(t)},showHint:function(t,e){var n=this,i=n.chart,o=i._plotArea;n.hint&&n.hint.show(t,e,o.backgroundBox())},_selectStart:function(t){var e=this.chart;e._selectStart.call(e,t)},_select:function(t){var e=this,n=e.chart;e.showHint(t.from,t.to),n._select.call(n,t)},_selectEnd:function(t){var e=this,n=e.chart;e.hint&&e.hint.hide(),e.readSelection(),e.filterAxes(),e.filterDataSource(),e.redrawSlaves(),n._selectEnd.call(n,t)},mainAxis:function(){var t=this.chart._plotArea;return t?t.namedCategoryAxes[E]:e}});F.setup=function(t,e){t=t||{},e=e||{};var n=l({},e.navigator,t.navigator),i=t.panes=[].concat(t.panes),o=l({},n.pane,{name:M});n.visible||(o.visible=!1,o.height=.1),i.push(o),F.attachAxes(t,n),F.attachSeries(t,n,e)},F.attachAxes=function(t,e){var n=e.series||[],i=t.categoryAxis=[].concat(t.categoryAxis),o=t.valueAxis=[].concat(t.valueAxis),r=m(n,I),s=0===r.length,a=l({type:"date",pane:M,roundToBaseUnit:!s,justified:s,_collapse:!1,majorTicks:{visible:!0},tooltip:{visible:!1},labels:{step:1},autoBind:!e.dataSource,autoBaseUnitSteps:{minutes:[1],hours:[1,2],days:[1,2],weeks:[],months:[1],years:[1]},_overlap:!1}),c=e.categoryAxis;i.push(l({},a,{maxDateGroups:200},c,{name:E,baseUnit:"fit",baseUnitStep:"auto",labels:{visible:!1},majorTicks:{visible:!1}}),l({},a,c,{name:E+"_labels",maxDateGroups:20,baseUnitStep:"auto",plotBands:[],autoBaseUnitSteps:{minutes:[]}}),l({},a,c,{name:E+"_ticks",maxDateGroups:200,majorTicks:{width:.5},plotBands:[],labels:{visible:!1,mirror:!0}})),o.push(l({name:E,pane:M,majorGridLines:{visible:!1},visible:!1},e.valueAxis))},F.attachSeries=function(t,e,n){var i,o=t.series=t.series||[],r=[].concat(e.series||[]),s=n.seriesColors,a=e.seriesDefaults;for(i=0;r.length>i;i++)o.push(l({color:s[i%s.length],categoryField:e.dateField,visibleInLegend:!1,tooltip:{visible:!1}},a,r[i],{axis:E,categoryAxis:E,autoBind:!e.dataSource}))},F.buildFilter=function(t,e){return[{field:"Date",operator:"gte",value:k(t)},{field:"Date",operator:"lt",value:k(e)}]},o=s.extend({init:function(e,n){var i=this;i.options=l({},i.options,n),i.container=e,i.chartPadding={top:parseInt(e.css("paddingTop"),10),left:parseInt(e.css("paddingLeft"),10)},i.template=i.template,i.template||(i.template=i.template=f("<div class='"+D+"navigator-hint' style='display: none; position: absolute; top: 1px; left: 1px;'><div class='"+D+"tooltip "+D+"chart-tooltip'>&nbsp;</div><div class='"+D+"scroll' /></div>")),i.element=t(i.template()).appendTo(e)},options:{format:"{0:d} - {1:d}",hideDelay:500},show:function(t,e,n){var i,o=this,s=k(C(t)+C(e-t)/2),a=o.options,l=r.format(o.options.format,t,e),c=o.element.find("."+D+"tooltip"),h=o.element.find("."+D+"scroll"),d=.4*n.width(),u=n.center().x-d,f=n.center().x,p=f-u,g=a.max-a.min,m=p/g,_=s-a.min;o._hideTimeout&&clearTimeout(o._hideTimeout),o._visible||(o.element.stop(!1,!0).css("visibility","hidden").show(),o._visible=!0),a.template&&(i=v(a.template),l=i({from:t,to:e})),c.html(l).css({left:n.center().x-c.outerWidth()/2,top:n.y1}),h.css({width:d,left:u+_*m,top:n.y1+parseInt(c.css("margin-top"),10)+parseInt(c.css("border-top-width"),10)+c.height()/2}),o.element.css("visibility","visible")},hide:function(){var t=this;t._hideTimeout&&clearTimeout(t._hideTimeout),t._hideTimeout=setTimeout(function(){t._visible=!1,t.element.fadeOut("slow")},t.options.hideDelay)}}),p.ui.plugin(R),l(p,{Navigator:F})}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(t,e){e()});